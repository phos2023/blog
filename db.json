{"meta":{"version":1,"warehouse":"5.0.1"},"models":{"Asset":[{"_id":"source/images/banner.jpeg","path":"images/banner.jpeg","modified":1,"renderable":0},{"_id":"source/pdf/PlanC 的博客 - Git 代理配置.pdf","path":"pdf/PlanC 的博客 - Git 代理配置.pdf","modified":1,"renderable":0},{"_id":"node_modules/hexo-theme-landscape/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.css","path":"fancybox/jquery.fancybox.min.css","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.js","path":"fancybox/jquery.fancybox.min.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/js/jquery-3.6.4.min.js","path":"js/jquery-3.6.4.min.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/js/script.js","path":"js/script.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-landscape/source/css/images/banner.jpg","path":"css/images/banner.jpg","modified":1,"renderable":1}],"Cache":[{"_id":"source/_posts/Git-代理配置.md","hash":"36cb2f0c9cd816d2ebd54d5ecd0b491f87681eca","modified":1739181355410},{"_id":"source/_posts/QML-中使用-Python-对象.md","hash":"ecf45de1e665a79b41b632f598380cad46b723ea","modified":1739184371112},{"_id":"source/_posts/QML-主窗口的基本-UI-结构.md","hash":"30c3b227847963d5f210035cb5b053d029b8b045","modified":1739184222081},{"_id":"source/_posts/QML-使用-Action.md","hash":"92519af6a2c501be58b92fee303badacbd5a4914","modified":1739184304756},{"_id":"source/_posts/QML-使用-Canvas-绘图.md","hash":"05c2b3f2a2db33148e2a25c8dbb88fbdcac9e289","modified":1739184492980},{"_id":"source/_posts/QML-使用Loader变更页面.md","hash":"a7a4ce7a2caf1d664a8f653fa4e25b18245f58d8","modified":1739184726592},{"_id":"source/_posts/QML-创建和加载自定义组件.md","hash":"1c10ee957be2f136618f623192bc0f2a7af029cf","modified":1739184655000},{"_id":"source/_posts/QML-创建自定义的类.md","hash":"3d86fa2d537bda2c4ce69b61a941d62237bae956","modified":1739184581212},{"_id":"source/_posts/QML-定义属性和方法.md","hash":"12e8ea1af4fb41d745658f35111e0a3fc90c02fa","modified":1739184133393},{"_id":"source/_posts/QML-布局.md","hash":"364c98918fbbd334792e188308025dac6160e95f","modified":1739184112245},{"_id":"source/_posts/QObject-和对象树.md","hash":"ed23a911a86d389726491318a843d75120e8ddb6","modified":1739183603914},{"_id":"source/_posts/Qt-的信号槽机制.md","hash":"c788e76a349631121527add3e7aeb4ab3b015453","modified":1739183823185},{"_id":"source/_posts/hello-world.md","hash":"7d98d6592de80fdcd2949bd7401cec12afd98cdf","modified":1739179237378},{"_id":"source/_posts/加载-QML.md","hash":"cca916807a099d1f36ddfc1a33a3198c65c2260f","modified":1739184103286},{"_id":"source/_posts/在-QML-中使用信号槽.md","hash":"9306708991c99ef42b21ee32ff1733093a91f241","modified":1739184958297},{"_id":"source/_posts/安装-PySide.md","hash":"e1e1761b161374239804836c36410e8d2958cd84","modified":1739183657277},{"_id":"source/images/banner.jpeg","hash":"7e5261282a9db326ee349f61631f409af6b7fda3","modified":1739183018588},{"_id":"node_modules/hexo-theme-landscape/_config.yml","hash":"b608c1f1322760dce9805285a602a95832730a2e","modified":1739179411812},{"_id":"node_modules/hexo-theme-landscape/LICENSE","hash":"c480fce396b23997ee23cc535518ffaaf7f458f8","modified":1739179361337},{"_id":"node_modules/hexo-theme-landscape/README.md","hash":"1a9b279e6dd29fd19245f913f0c4a316ffaa62db","modified":1739179411788},{"_id":"node_modules/hexo-theme-landscape/package.json","hash":"4bf95d52f77edf811f23f6d264a7493311a8d078","modified":1739179411788},{"_id":"node_modules/hexo-theme-landscape/languages/de-DE.yml","hash":"d29d1c4256b7ed9df42f511c2ff0a23ad5fd6c1f","modified":1739179411812},{"_id":"node_modules/hexo-theme-landscape/languages/de.yml","hash":"3ebf0775abbee928c8d7bda943c191d166ded0d3","modified":1739179411812},{"_id":"node_modules/hexo-theme-landscape/languages/default.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1739179411812},{"_id":"node_modules/hexo-theme-landscape/languages/en-GB.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1739179411812},{"_id":"node_modules/hexo-theme-landscape/languages/en-US.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1739179411816},{"_id":"node_modules/hexo-theme-landscape/languages/en.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1739179411816},{"_id":"node_modules/hexo-theme-landscape/languages/es-ES.yml","hash":"7008a8fc91f18d2a735864817b8ebda30c7a2c66","modified":1739179411816},{"_id":"node_modules/hexo-theme-landscape/languages/es.yml","hash":"76edb1171b86532ef12cfd15f5f2c1ac3949f061","modified":1739179411816},{"_id":"node_modules/hexo-theme-landscape/languages/fr-FR.yml","hash":"8d09dbdab00a30a2870b56f7c0a7ca7deafa7b88","modified":1739179411816},{"_id":"node_modules/hexo-theme-landscape/languages/fr.yml","hash":"415e1c580ced8e4ce20b3b0aeedc3610341c76fb","modified":1739179411820},{"_id":"node_modules/hexo-theme-landscape/languages/hu-HU.yml","hash":"712d18664898fa21ba38d4973e90ef41a324ea25","modified":1739179411820},{"_id":"node_modules/hexo-theme-landscape/languages/hu.yml","hash":"284d557130bf54a74e7dcef9d42096130e4d9550","modified":1739179411820},{"_id":"node_modules/hexo-theme-landscape/languages/it-IT.yml","hash":"2cb6dc2fab9bd2dbe1c8bb869a9e8bf85a564fdd","modified":1739179411820},{"_id":"node_modules/hexo-theme-landscape/languages/it.yml","hash":"89b7d91306b2c1a0f3ac023b657bf974f798a1e8","modified":1739179411824},{"_id":"node_modules/hexo-theme-landscape/languages/ja-JP.yml","hash":"08481267e0c112e1f6855620f2837ec4c4a98bbd","modified":1739179411824},{"_id":"node_modules/hexo-theme-landscape/languages/ja.yml","hash":"a73e1b9c80fd6e930e2628b393bfe3fb716a21a9","modified":1739179411828},{"_id":"node_modules/hexo-theme-landscape/languages/ko-KR.yml","hash":"19209ad8f9d4057e8df808937f950eb265e1db69","modified":1739179411828},{"_id":"node_modules/hexo-theme-landscape/languages/ko.yml","hash":"881d6a0a101706e0452af81c580218e0bfddd9cf","modified":1739179411832},{"_id":"node_modules/hexo-theme-landscape/languages/mn-MN.yml","hash":"b9e5f3e7c0c2f779cf2cfded6db847b5941637ca","modified":1739179411832},{"_id":"node_modules/hexo-theme-landscape/languages/mn.yml","hash":"2e7523951072a9403ead3840ad823edd1084c116","modified":1739179411836},{"_id":"node_modules/hexo-theme-landscape/languages/nl-NL.yml","hash":"5ebbc30021f05d99938f96dfff280392df7f91f0","modified":1739179411836},{"_id":"node_modules/hexo-theme-landscape/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1739179411836},{"_id":"node_modules/hexo-theme-landscape/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1739179411836},{"_id":"node_modules/hexo-theme-landscape/languages/pt-PT.yml","hash":"0f852b6b228e6ea59aa3540574bb89b233f2a098","modified":1739179411840},{"_id":"node_modules/hexo-theme-landscape/languages/pt.yml","hash":"57d07b75d434fbfc33b0ddb543021cb5f53318a8","modified":1739179411840},{"_id":"node_modules/hexo-theme-landscape/languages/ru-RU.yml","hash":"360d11a28bb768afb1dd15f63fa7fd3a8cc547ee","modified":1739179411840},{"_id":"node_modules/hexo-theme-landscape/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1739179411848},{"_id":"node_modules/hexo-theme-landscape/languages/th-TH.yml","hash":"ebfdba9bc4842c829473c1e6e4544344f182724d","modified":1739179411852},{"_id":"node_modules/hexo-theme-landscape/languages/th.yml","hash":"84a55b00aa01f03982be294e43c33a20e6d32862","modified":1739179411852},{"_id":"node_modules/hexo-theme-landscape/languages/tr.yml","hash":"a1cdbfa17682d7a971de8ab8588bf57c74224b5b","modified":1739179411856},{"_id":"node_modules/hexo-theme-landscape/languages/zh-CN.yml","hash":"1efd95774f401c80193eac6ee3f1794bfe93dc5a","modified":1739179411856},{"_id":"node_modules/hexo-theme-landscape/languages/zh-TW.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1739179411856},{"_id":"node_modules/hexo-theme-landscape/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1739179361405},{"_id":"node_modules/hexo-theme-landscape/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1739179361429},{"_id":"node_modules/hexo-theme-landscape/layout/index.ejs","hash":"aa1b4456907bdb43e629be3931547e2d29ac58c8","modified":1739179361469},{"_id":"node_modules/hexo-theme-landscape/layout/layout.ejs","hash":"0d1765036e4874500e68256fedb7470e96eeb6ee","modified":1739179361481},{"_id":"node_modules/hexo-theme-landscape/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1739179361489},{"_id":"node_modules/hexo-theme-landscape/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1739179361497},{"_id":"node_modules/hexo-theme-landscape/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1739179361521},{"_id":"node_modules/hexo-theme-landscape/scripts/fancybox.js","hash":"c857d7a5e4a5d71c743a009c5932bf84229db428","modified":1739179404720},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/archive.ejs","hash":"beb4a86fcc82a9bdda9289b59db5a1988918bec3","modified":1739179361393},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/category.ejs","hash":"dd1e5af3c6af3f5d6c85dfd5ca1766faed6a0b05","modified":1739179361421},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/recent_posts.ejs","hash":"60c4b012dcc656438ff59997e60367e5a21ab746","modified":1739179361497},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/tag.ejs","hash":"2de380865df9ab5f577f7d3bcadf44261eb5faae","modified":1739179361517},{"_id":"node_modules/hexo-theme-landscape/layout/_widget/tagcloud.ejs","hash":"b4a2079101643f63993dcdb32925c9b071763b46","modified":1739179361525},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/after-footer.ejs","hash":"377d257d5d16e0158a4405c72401517b074fd7ff","modified":1739179361369},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/archive-post.ejs","hash":"c7a71425a946d05414c069ec91811b5c09a92c47","modified":1739179361373},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/archive.ejs","hash":"7cb70a7a54f8c7ae49b10d1f37c0a9b74eab8826","modified":1739179361377},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/article.ejs","hash":"56597e951203dd662a6d2c817c7c4f1c920d4a25","modified":1739179361413},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/footer.ejs","hash":"3656eb692254346671abc03cb3ba1459829e0dce","modified":1739179361437},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/gauges-analytics.ejs","hash":"21a1e2a3907d1a3dad1cd0ab855fe6735f233c74","modified":1739179361445},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/google-analytics.ejs","hash":"2ea7442ea1e1a8ab4e41e26c563f58413b59a3d0","modified":1739179361461},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/head.ejs","hash":"f05bced793b0314d4f2ef0c993b3a51d0b7d203a","modified":1739179361461},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/header.ejs","hash":"6a5033d189554c9a6d42e2ef7952ae5c9742648e","modified":1739179361465},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/mobile-nav.ejs","hash":"e952a532dfc583930a666b9d4479c32d4a84b44e","modified":1739179361481},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/sidebar.ejs","hash":"930da35cc2d447a92e5ee8f835735e6fd2232469","modified":1739179361505},{"_id":"node_modules/hexo-theme-landscape/source/css/_extend.styl","hash":"222fbe6d222531d61c1ef0f868c90f747b1c2ced","modified":1739179411796},{"_id":"node_modules/hexo-theme-landscape/source/css/_variables.styl","hash":"ca28281423ae57d76b6c1eb91cd845fd4e518bd6","modified":1739179411796},{"_id":"node_modules/hexo-theme-landscape/source/css/style.styl","hash":"e55a1d92954ed20f6887f92dc727bb995a010a43","modified":1739179411808},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.css","hash":"1be9b79be02a1cfc5d96c4a5e0feb8f472babd95","modified":1739179361357},{"_id":"node_modules/hexo-theme-landscape/source/js/script.js","hash":"49773efcb2221bbdf2d86f3f5c5ff2d841b528cc","modified":1739179411788},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/category.ejs","hash":"c6bcd0e04271ffca81da25bcff5adf3d46f02fc0","modified":1739179361421},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/date.ejs","hash":"f1458584b679545830b75bef2526e2f3eb931045","modified":1739179361433},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/gallery.ejs","hash":"3d9d81a3c693ff2378ef06ddb6810254e509de5b","modified":1739179361445},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/nav.ejs","hash":"16a904de7bceccbb36b4267565f2215704db2880","modified":1739179361489},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/tag.ejs","hash":"2fcb0bf9c8847a644167a27824c9bb19ac74dd14","modified":1739179361513},{"_id":"node_modules/hexo-theme-landscape/layout/_partial/post/title.ejs","hash":"4d7e62574ddf46de9b41605fe3140d77b5ddb26d","modified":1739179361533},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/archive.styl","hash":"db15f5677dc68f1730e82190bab69c24611ca292","modified":1739179411796},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/article.styl","hash":"2d1f6f79ebf9cb55ebdb3865a2474437eb2b37c6","modified":1739179411796},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/comment.styl","hash":"79d280d8d203abb3bd933ca9b8e38c78ec684987","modified":1739179411800},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/footer.styl","hash":"e35a060b8512031048919709a8e7b1ec0e40bc1b","modified":1739179411800},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/header.styl","hash":"268d2989acb06e2ddd06cc36a6918c6cd865476b","modified":1739179411804},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/highlight.styl","hash":"9cc3b2927d814f2f6e8e188f9d3657b94f4c6ef3","modified":1739179411804},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/mobile.styl","hash":"a399cf9e1e1cec3e4269066e2948d7ae5854d745","modified":1739179411804},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/sidebar-aside.styl","hash":"890349df5145abf46ce7712010c89237900b3713","modified":1739179411808},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/sidebar.styl","hash":"404ec059dc674a48b9ab89cd83f258dec4dcb24d","modified":1739179411808},{"_id":"node_modules/hexo-theme-landscape/source/css/_util/grid.styl","hash":"0bf55ee5d09f193e249083602ac5fcdb1e571aed","modified":1739179411800},{"_id":"node_modules/hexo-theme-landscape/source/css/_partial/sidebar-bottom.styl","hash":"8fd4f30d319542babfd31f087ddbac550f000a8a","modified":1739179411808},{"_id":"node_modules/hexo-theme-landscape/source/css/_util/mixin.styl","hash":"44f32767d9fd3c1c08a60d91f181ee53c8f0dbb3","modified":1739179411804},{"_id":"node_modules/hexo-theme-landscape/source/fancybox/jquery.fancybox.min.js","hash":"6181412e73966696d08e1e5b1243a572d0f22ba6","modified":1739179411780},{"_id":"node_modules/hexo-theme-landscape/source/js/jquery-3.6.4.min.js","hash":"eda46747c71d38a880bee44f9a439c3858bb8f99","modified":1739179407068},{"_id":"source/pdf/PlanC 的博客 - Git 代理配置.pdf","hash":"daa8d546715ff0c41a1ffaf4e5a1e3e8ffe4a373","modified":1739180276575},{"_id":"node_modules/hexo-theme-landscape/source/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1739179404716},{"_id":"public/2025/02/10/QML-创建自定义的类/index.html","hash":"c2548a634cc66431ffdfceb876c9a2cca6754d83","modified":1739185671661},{"_id":"public/2025/02/10/QObject-和对象树/index.html","hash":"98e59775c0db689962c03dffe12aa5574085a2ad","modified":1739185671661},{"_id":"public/2025/02/10/安装-PySide/index.html","hash":"0159265218844273368a89997d4a5dd834f83780","modified":1739185671661},{"_id":"public/2025/02/10/Git-代理配置/index.html","hash":"9efd45613b2526a978de721bf976fa04f01376a6","modified":1739185671661},{"_id":"public/2025/02/10/hello-world/index.html","hash":"a45aff7ab4ba042b4024a3f2675db4e74daecbbf","modified":1739185671661},{"_id":"public/archives/index.html","hash":"7adddd17bbfbe7e95258502962fe5636bca6164b","modified":1739185671661},{"_id":"public/archives/page/2/index.html","hash":"d2b0da253e873b43c1f4b0df9883b06fa8b0a125","modified":1739185671661},{"_id":"public/archives/2025/index.html","hash":"7e0e5eb0ce35251dddbc59caa44f47cb06beda48","modified":1739185671661},{"_id":"public/archives/2025/page/2/index.html","hash":"909a9aac4c68e4ff771408d5deea901ab90825b6","modified":1739185671661},{"_id":"public/archives/2025/02/index.html","hash":"5d6a0367dff8d15a14c43b69cd442f680251034f","modified":1739185671661},{"_id":"public/archives/2025/02/page/2/index.html","hash":"0861eab0c8089af8c8c777a17ba13816324ac4d9","modified":1739185671661},{"_id":"public/tags/Git/index.html","hash":"929418983aba2ed3744b0ebd26fc94d3e1132233","modified":1739185671661},{"_id":"public/tags/Proxy/index.html","hash":"ff18ff61629a57b8cab3e9199d6a9f948cef1362","modified":1739185671661},{"_id":"public/tags/Qt/index.html","hash":"ad26c9b41b7ce78384f4c4bb8bc688ac2d5f4f5e","modified":1739185671661},{"_id":"public/tags/Qt/page/2/index.html","hash":"263269fd834adc12fc92687f276f7a4067c0d6bc","modified":1739185671661},{"_id":"public/tags/QML/index.html","hash":"16b1df070ed11aefa6f4801edc081f3dbcd3b9c0","modified":1739185671661},{"_id":"public/tags/QML/page/2/index.html","hash":"1dda0041cd2541accdb0d85346979bfa59397db7","modified":1739185671661},{"_id":"public/tags/Python/index.html","hash":"88ba5a7ba1dcdf440b5dde3a81794b4d28e2dd50","modified":1739185671661},{"_id":"public/tags/Python/page/2/index.html","hash":"83f19ec29ef57102e860dbf324841b8c24200e8e","modified":1739185671661},{"_id":"public/tags/PySide/index.html","hash":"da92e95929312561c00a9ae8c5dd7ec911435e95","modified":1739185671661},{"_id":"public/tags/PySide/page/2/index.html","hash":"4cc263dafc2b26a08e84d69a4d0af8cc52dcc233","modified":1739185671661},{"_id":"public/2025/02/10/QML-使用Loader变更页面/index.html","hash":"8428826dd4d5ac38ad93d309e8560e90e4881c74","modified":1739185671661},{"_id":"public/2025/02/10/QML-创建和加载自定义组件/index.html","hash":"82d6d8bdafaf059704c5e3c7eb6419d1f13da3b1","modified":1739185671661},{"_id":"public/2025/02/10/QML-使用-Canvas-绘图/index.html","hash":"9853835abda6f4904689e0291096b8674e827e4f","modified":1739185671661},{"_id":"public/2025/02/10/QML-中使用-Python-对象/index.html","hash":"8b67ee3d6460cb96db6dbd8bbfa2f9b69d653352","modified":1739185671661},{"_id":"public/2025/02/10/QML-使用-Action/index.html","hash":"ad78461113e16b447aef068c9b9b6186fd8573c1","modified":1739185671661},{"_id":"public/2025/02/10/QML-主窗口的基本-UI-结构/index.html","hash":"2b221b232866c9fe85e16d4b3b7dbde3507029f7","modified":1739185671661},{"_id":"public/2025/02/10/QML-定义属性和方法/index.html","hash":"eb3befcea3826cc098fc3699178c3db229915215","modified":1739185671661},{"_id":"public/2025/02/10/在-QML-中使用信号槽/index.html","hash":"e5b20f574a51c87debbc10aae751ebe7cb5dc450","modified":1739185671661},{"_id":"public/2025/02/10/QML-布局/index.html","hash":"a4b753c41e43c5755217739db54020c29c454410","modified":1739185671661},{"_id":"public/2025/02/10/加载-QML/index.html","hash":"f5cdc51b5308bbc53565d0c76f0fc1fa36f8bc5f","modified":1739185671661},{"_id":"public/2025/02/10/Qt-的信号槽机制/index.html","hash":"79c862798067e64e5a1776e27b2885a497b9df7c","modified":1739185671661},{"_id":"public/index.html","hash":"edd0f3239f4d5a5ae7507e464a196eb7e0e5012f","modified":1739185671661},{"_id":"public/page/2/index.html","hash":"fdddceed2281969b0b027ff299ea0eaa8bce4b57","modified":1739185671661},{"_id":"public/fancybox/jquery.fancybox.min.css","hash":"1be9b79be02a1cfc5d96c4a5e0feb8f472babd95","modified":1739185671661},{"_id":"public/js/script.js","hash":"49773efcb2221bbdf2d86f3f5c5ff2d841b528cc","modified":1739185671661},{"_id":"public/css/style.css","hash":"ce7eef4e983d493b8fe2338bd1e968f6be935eb4","modified":1739185671661},{"_id":"public/fancybox/jquery.fancybox.min.js","hash":"6181412e73966696d08e1e5b1243a572d0f22ba6","modified":1739185671661},{"_id":"public/js/jquery-3.6.4.min.js","hash":"eda46747c71d38a880bee44f9a439c3858bb8f99","modified":1739185671661},{"_id":"public/images/banner.jpeg","hash":"7e5261282a9db326ee349f61631f409af6b7fda3","modified":1739185671661},{"_id":"public/css/images/banner.jpg","hash":"f44aa591089fcb3ec79770a1e102fd3289a7c6a6","modified":1739185671661},{"_id":"public/pdf/PlanC 的博客 - Git 代理配置.pdf","hash":"daa8d546715ff0c41a1ffaf4e5a1e3e8ffe4a373","modified":1739185671661}],"Category":[],"Data":[],"Page":[],"Post":[{"title":"Git 代理配置","date":"2025-02-10T09:36:09.000Z","_content":"\n转载自 [PlanC 的博客 - Git 代理配置](https://hubenchang0515.github.io/Phosphophyllite/articles/%E4%BB%A3%E7%90%86%E4%B8%8E%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/Git%20%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE.html)\n\n{% pdf '/blog/pdf/PlanC 的博客 - Git 代理配置.pdf' %}","source":"_posts/Git-代理配置.md","raw":"---\ntitle: Git 代理配置\ndate: 2025-02-10 17:36:09\ntags: \n    - Git\n    - Proxy\n---\n\n转载自 [PlanC 的博客 - Git 代理配置](https://hubenchang0515.github.io/Phosphophyllite/articles/%E4%BB%A3%E7%90%86%E4%B8%8E%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/Git%20%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE.html)\n\n{% pdf '/blog/pdf/PlanC 的博客 - Git 代理配置.pdf' %}","slug":"Git-代理配置","published":1,"updated":"2025-02-10T09:55:55.410Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t7w0000mkin2gyvg5j9","content":"<p>转载自 <a href=\"https://hubenchang0515.github.io/Phosphophyllite/articles/%E4%BB%A3%E7%90%86%E4%B8%8E%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/Git%20%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE.html\">PlanC 的博客 - Git 代理配置</a></p>\n\n\n\t<div class=\"row\">\n    <embed src=\"/blog/pdf/PlanC 的博客 - Git 代理配置.pdf\" width=\"100%\" height=\"550\" type=\"application/pdf\">\n\t</div>\n\n\n","excerpt":"","more":"<p>转载自 <a href=\"https://hubenchang0515.github.io/Phosphophyllite/articles/%E4%BB%A3%E7%90%86%E4%B8%8E%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/Git%20%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE.html\">PlanC 的博客 - Git 代理配置</a></p>\n\n\n\t<div class=\"row\">\n    <embed src=\"/blog/pdf/PlanC 的博客 - Git 代理配置.pdf\" width=\"100%\" height=\"550\" type=\"application/pdf\">\n\t</div>\n\n\n"},{"title":"QML 中使用 Python 对象","date":"2025-02-10T10:45:45.000Z","_content":"\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/06.python_object.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 在QML中使用Python对象\nQML只负责UI界面的绘制工作，软件的业务逻辑应该由C++或Python等其他语言实现。  \n\n要把Python对象注册到QML的上下文中，则该对象的类必须是QObject的子类，下面实现了一个简单的文件IO类 :  \n```Python\nclass MyQmlFile(QObject) :\n    def __init__(self, parent=None) :\n        super().__init__(parent)\n        \n    @QtCore.Slot(str,str)\n    def write(self, url, text) :\n        # 打开文件时需要将url转换为本地路径，编码采用UTF-8\n        fp = open(QUrl(url).toLocalFile(), \"w\", encoding='UTF-8')\n        fp.write(text)\n        fp.close()\n        \n    @QtCore.Slot(str, result=str)\n    def read(self, url) :\n        fp = open(QUrl(url).toLocalFile(), \"r\", encoding='UTF-8')\n        ret = fp.read()\n        fp.close()\n        return ret\n```\n* 如果要在QML中使用对象的方法，则方法必须定义为槽，否则不能访问。\n\n将这个类实例化为一个对象，并将对象注册到QML中，即可在QML中进行文件IO :  \n```Python\nif __name__ == \"__main__\":\n    app = QGuiApplication(sys.argv)\n    engine = QQmlApplicationEngine()\n\n    # 实例化为对象\n    myQmlFile = MyQmlFile()\n\n    # 先将对象注册到QML上下文中，第一个参数为其在QML中的名字\n    engine.rootContext().setContextProperty(\"file\", myQmlFile)\n\n    # 然后再加载QML文件\n    engine.load(\"mainwindow.qml\")\n\n    sys.exit(app.exec_())\n```\n\n> 这里不能在注册的时候创建临时对象，因为QML引擎不会将该对象的引用计数加一，Python的GC会将该对象回收。\n> ```Python\n> if __name__ == \"__main__\":\n>    app = QGuiApplication(sys.argv)\n>    engine = QQmlApplicationEngine()\n>\n>    # 这样做会出错\n>    engine.rootContext().setContextProperty(\"file\", MyQmlFile())\n>\n>    # 然后再加载QML文件\n>    engine.load(\"mainwindow.qml\")\n>\n>    sys.exit(app.exec_())\n>```\n\n打开和保存文件的时候，需要一个选择文件的窗口，可以使用`QtQuick.Dialogs 1.3`中的`FileDialog` :  \n```QML\nFileDialog {\n    id: \n    title:        // 窗口标题\n    folder:       // 初始路径\n\n    onAccepted:   // 确认选择文件的信号处理器\n    onRejected:   // 点击取消的信号处理器\n\n    fileUrl:      // 选中的文件的URL\n}\n```\n* 通过`open`和`close`方法来打开和关闭该窗口\n\n下面代码实现了一个简单的文本文件编辑器 :  \n\n* `main.py`\n\n```Python\nimport sys,os\nfrom PySide2 import QtCore\nfrom PySide2.QtCore import QObject, QUrl\nfrom PySide2.QtGui import QGuiApplication\nfrom PySide2.QtQml import QQmlApplicationEngine\n\nclass MyQmlFile(QObject) :\n    def __init__(self, parent=None) :\n        super().__init__(parent)\n        \n    @QtCore.Slot(str,str)\n    def write(self, url, text) :\n        # 打开文件时需要将url转换为本地路径，编码采用UTF-8\n        fp = open(QUrl(url).toLocalFile(), \"w\", encoding='UTF-8')\n        fp.write(text)\n        fp.close()\n        \n    @QtCore.Slot(str, result=str)\n    def read(self, url) :\n        fp = open(QUrl(url).toLocalFile(), \"r\", encoding='UTF-8')\n        ret = fp.read()\n        fp.close()\n        return ret\n\nif __name__ == \"__main__\":\n    app = QGuiApplication(sys.argv)\n    engine = QQmlApplicationEngine()\n\n    # 实例化为对象\n    myQmlFile = MyQmlFile()\n\n    # 先将对象注册到QML上下文中，第一个参数为其在QML中的名字\n    engine.rootContext().setContextProperty(\"file\", myQmlFile)\n\n    # 然后再加载QML文件\n    qmlFile = \"mainwindow.qml\"\n    qmlPath = os.path.abspath(os.path.join(os.path.dirname(__file__), qmlFile))\n    engine.load(qmlPath)\n\n    sys.exit(app.exec_())\n```\n\n* `mainwindow.qml`\n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Dialogs 1.3\n\nApplicationWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // FileDialog是用于选择文件的窗口\n    FileDialog {\n        id: openFileDialog\n        title: qsTr(\"打开文件\")\n        folder: \".\"\n        onAccepted: {\n            // 使用从Python注册的file对象读取文件内容\n            editor.text = file.read(fileUrls)\n\n            // 关闭这个窗口\n            close() \n        }\n    }\n\n    FileDialog {\n        id: saveFileDialog\n        title: qsTr(\"保存文件\")\n        folder: \".\"\n        onAccepted: {\n            // 使用从Python注册的file对象保存文件内容\n            file.write(fileUrls, editor.text)\n\n            // 关闭这个窗口\n            close()\n        }\n    }\n\n    // 打开文件的Action\n    Action {\n        id: openFileAction\n\n        // 触发action时显示文件窗口\n        onTriggered: {\n            openFileDialog.open()\n        }\n    }\n\n    // 保存文件的Action\n    Action {\n        id: saveFileAction\n\n        onTriggered: {\n            saveFileDialog.open()\n        }\n    }\n\n    // 复制的Action\n    Action {\n        id: copyAction\n\n        onTriggered: {\n            editor.copy() // 调用editor的copy方法\n            editor.forceActiveFocus() // 恢复焦点\n        }\n\n    }\n\n    // 粘贴的Action\n    Action {\n        id: pasteAction\n\n        onTriggered: {\n            editor.paste() // 调用editor的paste方法\n            editor.forceActiveFocus() // 恢复焦点\n        }\n    }\n\n    // 状态栏\n    menuBar : MenuBar {\n        Menu {\n            title: qsTr(\"文件(&F)\")\n            MenuItem { \n                action: openFileAction\n                text: qsTr(\"打开(&O)\")\n            }\n            MenuItem { \n                action: saveFileAction\n                text: qsTr(\"保存(&S)\")\n            }\n        }\n\n        Menu {\n            title: qsTr(\"编辑(&E)\")\n            MenuItem { \n                action: copyAction\n                text: qsTr(\"复制\")\n            }\n            MenuItem {\n                action: pasteAction\n                text: qsTr(\"粘贴\")\n            }\n        }\n    }\n\n    // Header工具栏\n    header : ToolBar {\n        Row {\n            ToolButton {\n                action: openFileAction\n                icon.source: \"./res/open.png\"\n                icon.color: \"transparent\"\n            }\n\n            ToolButton {\n                action: saveFileAction\n                icon.source: \"./res/save.png\"\n                icon.color: \"transparent\"\n            }\n\n            ToolButton {\n                action: copyAction \n                icon.source: \"./res/copy.png\"\n                icon.color: \"transparent\"\n            }\n\n            ToolButton {\n                action: pasteAction \n                icon.source: \"./res/paste.png\"\n                icon.color: \"transparent\"\n            }\n        }\n    }\n\n    // Footer放置一个文本当作状态栏\n    footer : Text {\n        text: qsTr(\"状态栏\")\n\n    }\n\n    // 其余对象属于Content\n    ScrollView { \n        id: scrollView\n        anchors.fill: parent\n        focus: true\n\n        property int select : 0\n\n        TextArea {\n            id: editor\n            font.pixelSize: 22\n            focus: true  // 获取焦点(即键盘输入状态)\n            persistentSelection: true  // 丢失焦点时保留选取\n            selectByMouse: true  // 允许通过鼠标选取\n\n            // text发生改变时根据长宽判断是否需要显示滚动条\n            onTextChanged : {\n                if(editor.height > scrollView.height)\n                {\n                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOn\n                }\n                else\n                {\n                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOff\n                }\n\n                if(editor.width > scrollView.width)\n                {\n                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOn\n                }\n                else\n                {\n                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOff\n                }\n            }\n        }\n    }\n}\n```\n\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/06.python_object/editor.png)\n\n## 参考 :  \n* QML\n  * [QUrl](https://doc.qt.io/qtforpython/PySide2/QtCore/QUrl.html)\n  * [QQmlEngine](https://doc.qt.io/qtforpython/PySide2/QtQml/QQmlEngine.htm)\n  * [QQmlContext](https://doc.qt.io/qtforpython/PySide2/QtQml/QQmlContext.html)\n\n* PySide2\n  * [FileDialog](https://doc.qt.io/qt-5/qml-qtquick-dialogs-filedialog.html)","source":"_posts/QML-中使用-Python-对象.md","raw":"---\ntitle: QML 中使用 Python 对象\ndate: 2025-02-10 18:45:45\ntags:\n    - Qt\n    - QML\n    - Python\n    - PySide\n---\n\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/06.python_object.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 在QML中使用Python对象\nQML只负责UI界面的绘制工作，软件的业务逻辑应该由C++或Python等其他语言实现。  \n\n要把Python对象注册到QML的上下文中，则该对象的类必须是QObject的子类，下面实现了一个简单的文件IO类 :  \n```Python\nclass MyQmlFile(QObject) :\n    def __init__(self, parent=None) :\n        super().__init__(parent)\n        \n    @QtCore.Slot(str,str)\n    def write(self, url, text) :\n        # 打开文件时需要将url转换为本地路径，编码采用UTF-8\n        fp = open(QUrl(url).toLocalFile(), \"w\", encoding='UTF-8')\n        fp.write(text)\n        fp.close()\n        \n    @QtCore.Slot(str, result=str)\n    def read(self, url) :\n        fp = open(QUrl(url).toLocalFile(), \"r\", encoding='UTF-8')\n        ret = fp.read()\n        fp.close()\n        return ret\n```\n* 如果要在QML中使用对象的方法，则方法必须定义为槽，否则不能访问。\n\n将这个类实例化为一个对象，并将对象注册到QML中，即可在QML中进行文件IO :  \n```Python\nif __name__ == \"__main__\":\n    app = QGuiApplication(sys.argv)\n    engine = QQmlApplicationEngine()\n\n    # 实例化为对象\n    myQmlFile = MyQmlFile()\n\n    # 先将对象注册到QML上下文中，第一个参数为其在QML中的名字\n    engine.rootContext().setContextProperty(\"file\", myQmlFile)\n\n    # 然后再加载QML文件\n    engine.load(\"mainwindow.qml\")\n\n    sys.exit(app.exec_())\n```\n\n> 这里不能在注册的时候创建临时对象，因为QML引擎不会将该对象的引用计数加一，Python的GC会将该对象回收。\n> ```Python\n> if __name__ == \"__main__\":\n>    app = QGuiApplication(sys.argv)\n>    engine = QQmlApplicationEngine()\n>\n>    # 这样做会出错\n>    engine.rootContext().setContextProperty(\"file\", MyQmlFile())\n>\n>    # 然后再加载QML文件\n>    engine.load(\"mainwindow.qml\")\n>\n>    sys.exit(app.exec_())\n>```\n\n打开和保存文件的时候，需要一个选择文件的窗口，可以使用`QtQuick.Dialogs 1.3`中的`FileDialog` :  \n```QML\nFileDialog {\n    id: \n    title:        // 窗口标题\n    folder:       // 初始路径\n\n    onAccepted:   // 确认选择文件的信号处理器\n    onRejected:   // 点击取消的信号处理器\n\n    fileUrl:      // 选中的文件的URL\n}\n```\n* 通过`open`和`close`方法来打开和关闭该窗口\n\n下面代码实现了一个简单的文本文件编辑器 :  \n\n* `main.py`\n\n```Python\nimport sys,os\nfrom PySide2 import QtCore\nfrom PySide2.QtCore import QObject, QUrl\nfrom PySide2.QtGui import QGuiApplication\nfrom PySide2.QtQml import QQmlApplicationEngine\n\nclass MyQmlFile(QObject) :\n    def __init__(self, parent=None) :\n        super().__init__(parent)\n        \n    @QtCore.Slot(str,str)\n    def write(self, url, text) :\n        # 打开文件时需要将url转换为本地路径，编码采用UTF-8\n        fp = open(QUrl(url).toLocalFile(), \"w\", encoding='UTF-8')\n        fp.write(text)\n        fp.close()\n        \n    @QtCore.Slot(str, result=str)\n    def read(self, url) :\n        fp = open(QUrl(url).toLocalFile(), \"r\", encoding='UTF-8')\n        ret = fp.read()\n        fp.close()\n        return ret\n\nif __name__ == \"__main__\":\n    app = QGuiApplication(sys.argv)\n    engine = QQmlApplicationEngine()\n\n    # 实例化为对象\n    myQmlFile = MyQmlFile()\n\n    # 先将对象注册到QML上下文中，第一个参数为其在QML中的名字\n    engine.rootContext().setContextProperty(\"file\", myQmlFile)\n\n    # 然后再加载QML文件\n    qmlFile = \"mainwindow.qml\"\n    qmlPath = os.path.abspath(os.path.join(os.path.dirname(__file__), qmlFile))\n    engine.load(qmlPath)\n\n    sys.exit(app.exec_())\n```\n\n* `mainwindow.qml`\n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Dialogs 1.3\n\nApplicationWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // FileDialog是用于选择文件的窗口\n    FileDialog {\n        id: openFileDialog\n        title: qsTr(\"打开文件\")\n        folder: \".\"\n        onAccepted: {\n            // 使用从Python注册的file对象读取文件内容\n            editor.text = file.read(fileUrls)\n\n            // 关闭这个窗口\n            close() \n        }\n    }\n\n    FileDialog {\n        id: saveFileDialog\n        title: qsTr(\"保存文件\")\n        folder: \".\"\n        onAccepted: {\n            // 使用从Python注册的file对象保存文件内容\n            file.write(fileUrls, editor.text)\n\n            // 关闭这个窗口\n            close()\n        }\n    }\n\n    // 打开文件的Action\n    Action {\n        id: openFileAction\n\n        // 触发action时显示文件窗口\n        onTriggered: {\n            openFileDialog.open()\n        }\n    }\n\n    // 保存文件的Action\n    Action {\n        id: saveFileAction\n\n        onTriggered: {\n            saveFileDialog.open()\n        }\n    }\n\n    // 复制的Action\n    Action {\n        id: copyAction\n\n        onTriggered: {\n            editor.copy() // 调用editor的copy方法\n            editor.forceActiveFocus() // 恢复焦点\n        }\n\n    }\n\n    // 粘贴的Action\n    Action {\n        id: pasteAction\n\n        onTriggered: {\n            editor.paste() // 调用editor的paste方法\n            editor.forceActiveFocus() // 恢复焦点\n        }\n    }\n\n    // 状态栏\n    menuBar : MenuBar {\n        Menu {\n            title: qsTr(\"文件(&F)\")\n            MenuItem { \n                action: openFileAction\n                text: qsTr(\"打开(&O)\")\n            }\n            MenuItem { \n                action: saveFileAction\n                text: qsTr(\"保存(&S)\")\n            }\n        }\n\n        Menu {\n            title: qsTr(\"编辑(&E)\")\n            MenuItem { \n                action: copyAction\n                text: qsTr(\"复制\")\n            }\n            MenuItem {\n                action: pasteAction\n                text: qsTr(\"粘贴\")\n            }\n        }\n    }\n\n    // Header工具栏\n    header : ToolBar {\n        Row {\n            ToolButton {\n                action: openFileAction\n                icon.source: \"./res/open.png\"\n                icon.color: \"transparent\"\n            }\n\n            ToolButton {\n                action: saveFileAction\n                icon.source: \"./res/save.png\"\n                icon.color: \"transparent\"\n            }\n\n            ToolButton {\n                action: copyAction \n                icon.source: \"./res/copy.png\"\n                icon.color: \"transparent\"\n            }\n\n            ToolButton {\n                action: pasteAction \n                icon.source: \"./res/paste.png\"\n                icon.color: \"transparent\"\n            }\n        }\n    }\n\n    // Footer放置一个文本当作状态栏\n    footer : Text {\n        text: qsTr(\"状态栏\")\n\n    }\n\n    // 其余对象属于Content\n    ScrollView { \n        id: scrollView\n        anchors.fill: parent\n        focus: true\n\n        property int select : 0\n\n        TextArea {\n            id: editor\n            font.pixelSize: 22\n            focus: true  // 获取焦点(即键盘输入状态)\n            persistentSelection: true  // 丢失焦点时保留选取\n            selectByMouse: true  // 允许通过鼠标选取\n\n            // text发生改变时根据长宽判断是否需要显示滚动条\n            onTextChanged : {\n                if(editor.height > scrollView.height)\n                {\n                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOn\n                }\n                else\n                {\n                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOff\n                }\n\n                if(editor.width > scrollView.width)\n                {\n                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOn\n                }\n                else\n                {\n                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOff\n                }\n            }\n        }\n    }\n}\n```\n\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/06.python_object/editor.png)\n\n## 参考 :  \n* QML\n  * [QUrl](https://doc.qt.io/qtforpython/PySide2/QtCore/QUrl.html)\n  * [QQmlEngine](https://doc.qt.io/qtforpython/PySide2/QtQml/QQmlEngine.htm)\n  * [QQmlContext](https://doc.qt.io/qtforpython/PySide2/QtQml/QQmlContext.html)\n\n* PySide2\n  * [FileDialog](https://doc.qt.io/qt-5/qml-qtquick-dialogs-filedialog.html)","slug":"QML-中使用-Python-对象","published":1,"updated":"2025-02-10T10:46:11.112Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t850001mkinbmin7vfw","content":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/06.python_object.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"在QML中使用Python对象\"><a href=\"#在QML中使用Python对象\" class=\"headerlink\" title=\"在QML中使用Python对象\"></a>在QML中使用Python对象</h1><p>QML只负责UI界面的绘制工作，软件的业务逻辑应该由C++或Python等其他语言实现。  </p>\n<p>要把Python对象注册到QML的上下文中，则该对象的类必须是QObject的子类，下面实现了一个简单的文件IO类 :  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyQmlFile</span>(<span class=\"title class_ inherited__\">QObject</span>) :</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, parent=<span class=\"literal\">None</span></span>) :</span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__(parent)</span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"meta\">    @QtCore.Slot(<span class=\"params\"><span class=\"built_in\">str</span>,<span class=\"built_in\">str</span></span>)</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">write</span>(<span class=\"params\">self, url, text</span>) :</span><br><span class=\"line\">        <span class=\"comment\"># 打开文件时需要将url转换为本地路径，编码采用UTF-8</span></span><br><span class=\"line\">        fp = <span class=\"built_in\">open</span>(QUrl(url).toLocalFile(), <span class=\"string\">&quot;w&quot;</span>, encoding=<span class=\"string\">&#x27;UTF-8&#x27;</span>)</span><br><span class=\"line\">        fp.write(text)</span><br><span class=\"line\">        fp.close()</span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"meta\">    @QtCore.Slot(<span class=\"params\"><span class=\"built_in\">str</span>, result=<span class=\"built_in\">str</span></span>)</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">read</span>(<span class=\"params\">self, url</span>) :</span><br><span class=\"line\">        fp = <span class=\"built_in\">open</span>(QUrl(url).toLocalFile(), <span class=\"string\">&quot;r&quot;</span>, encoding=<span class=\"string\">&#x27;UTF-8&#x27;</span>)</span><br><span class=\"line\">        ret = fp.read()</span><br><span class=\"line\">        fp.close()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ret</span><br></pre></td></tr></table></figure>\n<ul>\n<li>如果要在QML中使用对象的方法，则方法必须定义为槽，否则不能访问。</li>\n</ul>\n<p>将这个类实例化为一个对象，并将对象注册到QML中，即可在QML中进行文件IO :  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app = QGuiApplication(sys.argv)</span><br><span class=\"line\">    engine = QQmlApplicationEngine()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 实例化为对象</span></span><br><span class=\"line\">    myQmlFile = MyQmlFile()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 先将对象注册到QML上下文中，第一个参数为其在QML中的名字</span></span><br><span class=\"line\">    engine.rootContext().setContextProperty(<span class=\"string\">&quot;file&quot;</span>, myQmlFile)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 然后再加载QML文件</span></span><br><span class=\"line\">    engine.load(<span class=\"string\">&quot;mainwindow.qml&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>这里不能在注册的时候创建临时对象，因为QML引擎不会将该对象的引用计数加一，Python的GC会将该对象回收。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">   app = QGuiApplication(sys.argv)</span><br><span class=\"line\">   engine = QQmlApplicationEngine()</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\"># 这样做会出错</span></span><br><span class=\"line\">   engine.rootContext().setContextProperty(<span class=\"string\">&quot;file&quot;</span>, MyQmlFile())</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\"># 然后再加载QML文件</span></span><br><span class=\"line\">   engine.load(<span class=\"string\">&quot;mainwindow.qml&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">   sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p>打开和保存文件的时候，需要一个选择文件的窗口，可以使用<code>QtQuick.Dialogs 1.3</code>中的<code>FileDialog</code> :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">FileDialog</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> </span></span><br><span class=\"line\"><span class=\"string\">    title</span>:        <span class=\"comment\">// 窗口标题</span></span><br><span class=\"line\">    <span class=\"attribute\">folder</span>:       <span class=\"comment\">// 初始路径</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attribute\">onAccepted</span>:   <span class=\"comment\">// 确认选择文件的信号处理器</span></span><br><span class=\"line\">    <span class=\"attribute\">onRejected</span>:   <span class=\"comment\">// 点击取消的信号处理器</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attribute\">fileUrl</span>:      <span class=\"comment\">// 选中的文件的URL</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>通过<code>open</code>和<code>close</code>方法来打开和关闭该窗口</li>\n</ul>\n<p>下面代码实现了一个简单的文本文件编辑器 :  </p>\n<ul>\n<li><code>main.py</code></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> sys,os</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2 <span class=\"keyword\">import</span> QtCore</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtCore <span class=\"keyword\">import</span> QObject, QUrl</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtGui <span class=\"keyword\">import</span> QGuiApplication</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtQml <span class=\"keyword\">import</span> QQmlApplicationEngine</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyQmlFile</span>(<span class=\"title class_ inherited__\">QObject</span>) :</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, parent=<span class=\"literal\">None</span></span>) :</span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__(parent)</span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"meta\">    @QtCore.Slot(<span class=\"params\"><span class=\"built_in\">str</span>,<span class=\"built_in\">str</span></span>)</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">write</span>(<span class=\"params\">self, url, text</span>) :</span><br><span class=\"line\">        <span class=\"comment\"># 打开文件时需要将url转换为本地路径，编码采用UTF-8</span></span><br><span class=\"line\">        fp = <span class=\"built_in\">open</span>(QUrl(url).toLocalFile(), <span class=\"string\">&quot;w&quot;</span>, encoding=<span class=\"string\">&#x27;UTF-8&#x27;</span>)</span><br><span class=\"line\">        fp.write(text)</span><br><span class=\"line\">        fp.close()</span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"meta\">    @QtCore.Slot(<span class=\"params\"><span class=\"built_in\">str</span>, result=<span class=\"built_in\">str</span></span>)</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">read</span>(<span class=\"params\">self, url</span>) :</span><br><span class=\"line\">        fp = <span class=\"built_in\">open</span>(QUrl(url).toLocalFile(), <span class=\"string\">&quot;r&quot;</span>, encoding=<span class=\"string\">&#x27;UTF-8&#x27;</span>)</span><br><span class=\"line\">        ret = fp.read()</span><br><span class=\"line\">        fp.close()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ret</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app = QGuiApplication(sys.argv)</span><br><span class=\"line\">    engine = QQmlApplicationEngine()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 实例化为对象</span></span><br><span class=\"line\">    myQmlFile = MyQmlFile()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 先将对象注册到QML上下文中，第一个参数为其在QML中的名字</span></span><br><span class=\"line\">    engine.rootContext().setContextProperty(<span class=\"string\">&quot;file&quot;</span>, myQmlFile)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 然后再加载QML文件</span></span><br><span class=\"line\">    qmlFile = <span class=\"string\">&quot;mainwindow.qml&quot;</span></span><br><span class=\"line\">    qmlPath = os.path.abspath(os.path.join(os.path.dirname(__file__), qmlFile))</span><br><span class=\"line\">    engine.load(qmlPath)</span><br><span class=\"line\"></span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>mainwindow.qml</code></li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Dialogs <span class=\"number\">1.3</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">ApplicationWindow</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// FileDialog是用于选择文件的窗口</span></span><br><span class=\"line\">    <span class=\"title\">FileDialog</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> openFileDialog</span></span><br><span class=\"line\">        <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;打开文件&quot;</span>)</span><br><span class=\"line\">        <span class=\"attribute\">folder</span>: <span class=\"string\">&quot;.&quot;</span></span><br><span class=\"line\">        <span class=\"attribute\">onAccepted</span>: &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 使用从Python注册的file对象读取文件内容</span></span><br><span class=\"line\">            editor.text = file.read(fileUrls)</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 关闭这个窗口</span></span><br><span class=\"line\">            close() </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">FileDialog</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> saveFileDialog</span></span><br><span class=\"line\">        <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;保存文件&quot;</span>)</span><br><span class=\"line\">        <span class=\"attribute\">folder</span>: <span class=\"string\">&quot;.&quot;</span></span><br><span class=\"line\">        <span class=\"attribute\">onAccepted</span>: &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 使用从Python注册的file对象保存文件内容</span></span><br><span class=\"line\">            file.write(fileUrls, editor.text)</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 关闭这个窗口</span></span><br><span class=\"line\">            close()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 打开文件的Action</span></span><br><span class=\"line\">    <span class=\"title\">Action</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> openFileAction</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 触发action时显示文件窗口</span></span><br><span class=\"line\">        <span class=\"attribute\">onTriggered</span>: &#123;</span><br><span class=\"line\">            openFileDialog.open()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 保存文件的Action</span></span><br><span class=\"line\">    <span class=\"title\">Action</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> saveFileAction</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">onTriggered</span>: &#123;</span><br><span class=\"line\">            saveFileDialog.open()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 复制的Action</span></span><br><span class=\"line\">    <span class=\"title\">Action</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> copyAction</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">onTriggered</span>: &#123;</span><br><span class=\"line\">            editor.copy() <span class=\"comment\">// 调用editor的copy方法</span></span><br><span class=\"line\">            editor.forceActiveFocus() <span class=\"comment\">// 恢复焦点</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 粘贴的Action</span></span><br><span class=\"line\">    <span class=\"title\">Action</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> pasteAction</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">onTriggered</span>: &#123;</span><br><span class=\"line\">            editor.paste() <span class=\"comment\">// 调用editor的paste方法</span></span><br><span class=\"line\">            editor.forceActiveFocus() <span class=\"comment\">// 恢复焦点</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 状态栏</span></span><br><span class=\"line\">    <span class=\"attribute\">menuBar</span> : <span class=\"title\">MenuBar</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Menu</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;文件(&amp;F)&quot;</span>)</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; </span><br><span class=\"line\">                <span class=\"attribute\">action</span>: openFileAction</span><br><span class=\"line\">                <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;打开(&amp;O)&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; </span><br><span class=\"line\">                <span class=\"attribute\">action</span>: saveFileAction</span><br><span class=\"line\">                <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;保存(&amp;S)&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Menu</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;编辑(&amp;E)&quot;</span>)</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; </span><br><span class=\"line\">                <span class=\"attribute\">action</span>: copyAction</span><br><span class=\"line\">                <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;复制&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: pasteAction</span><br><span class=\"line\">                <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;粘贴&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Header工具栏</span></span><br><span class=\"line\">    <span class=\"attribute\">header</span> : <span class=\"title\">ToolBar</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Row</span> &#123;</span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: openFileAction</span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/open.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: saveFileAction</span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/save.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: copyAction </span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/copy.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: pasteAction </span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/paste.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Footer放置一个文本当作状态栏</span></span><br><span class=\"line\">    <span class=\"attribute\">footer</span> : <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;状态栏&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 其余对象属于Content</span></span><br><span class=\"line\">    <span class=\"title\">ScrollView</span> &#123; </span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> scrollView</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">focus</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">property</span><span class=\"string\"> int select </span>: <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">TextArea</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> editor</span></span><br><span class=\"line\">            <span class=\"attribute\">font.pixelSize</span>: <span class=\"number\">22</span></span><br><span class=\"line\">            <span class=\"attribute\">focus</span>: <span class=\"literal\">true</span>  <span class=\"comment\">// 获取焦点(即键盘输入状态)</span></span><br><span class=\"line\">            <span class=\"attribute\">persistentSelection</span>: <span class=\"literal\">true</span>  <span class=\"comment\">// 丢失焦点时保留选取</span></span><br><span class=\"line\">            <span class=\"attribute\">selectByMouse</span>: <span class=\"literal\">true</span>  <span class=\"comment\">// 允许通过鼠标选取</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// text发生改变时根据长宽判断是否需要显示滚动条</span></span><br><span class=\"line\">            <span class=\"attribute\">onTextChanged</span> : &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(editor.height &gt; scrollView.height)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOn</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"title\">else</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOff</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(editor.width &gt; scrollView.width)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOn</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"title\">else</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOff</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/06.python_object/editor.png\" alt=\"Image\"></p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li><p>QML</p>\n<ul>\n<li><a href=\"https://doc.qt.io/qtforpython/PySide2/QtCore/QUrl.html\">QUrl</a></li>\n<li><a href=\"https://doc.qt.io/qtforpython/PySide2/QtQml/QQmlEngine.htm\">QQmlEngine</a></li>\n<li><a href=\"https://doc.qt.io/qtforpython/PySide2/QtQml/QQmlContext.html\">QQmlContext</a></li>\n</ul>\n</li>\n<li><p>PySide2</p>\n<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-dialogs-filedialog.html\">FileDialog</a></li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/06.python_object.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"在QML中使用Python对象\"><a href=\"#在QML中使用Python对象\" class=\"headerlink\" title=\"在QML中使用Python对象\"></a>在QML中使用Python对象</h1><p>QML只负责UI界面的绘制工作，软件的业务逻辑应该由C++或Python等其他语言实现。  </p>\n<p>要把Python对象注册到QML的上下文中，则该对象的类必须是QObject的子类，下面实现了一个简单的文件IO类 :  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyQmlFile</span>(<span class=\"title class_ inherited__\">QObject</span>) :</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, parent=<span class=\"literal\">None</span></span>) :</span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__(parent)</span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"meta\">    @QtCore.Slot(<span class=\"params\"><span class=\"built_in\">str</span>,<span class=\"built_in\">str</span></span>)</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">write</span>(<span class=\"params\">self, url, text</span>) :</span><br><span class=\"line\">        <span class=\"comment\"># 打开文件时需要将url转换为本地路径，编码采用UTF-8</span></span><br><span class=\"line\">        fp = <span class=\"built_in\">open</span>(QUrl(url).toLocalFile(), <span class=\"string\">&quot;w&quot;</span>, encoding=<span class=\"string\">&#x27;UTF-8&#x27;</span>)</span><br><span class=\"line\">        fp.write(text)</span><br><span class=\"line\">        fp.close()</span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"meta\">    @QtCore.Slot(<span class=\"params\"><span class=\"built_in\">str</span>, result=<span class=\"built_in\">str</span></span>)</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">read</span>(<span class=\"params\">self, url</span>) :</span><br><span class=\"line\">        fp = <span class=\"built_in\">open</span>(QUrl(url).toLocalFile(), <span class=\"string\">&quot;r&quot;</span>, encoding=<span class=\"string\">&#x27;UTF-8&#x27;</span>)</span><br><span class=\"line\">        ret = fp.read()</span><br><span class=\"line\">        fp.close()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ret</span><br></pre></td></tr></table></figure>\n<ul>\n<li>如果要在QML中使用对象的方法，则方法必须定义为槽，否则不能访问。</li>\n</ul>\n<p>将这个类实例化为一个对象，并将对象注册到QML中，即可在QML中进行文件IO :  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app = QGuiApplication(sys.argv)</span><br><span class=\"line\">    engine = QQmlApplicationEngine()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 实例化为对象</span></span><br><span class=\"line\">    myQmlFile = MyQmlFile()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 先将对象注册到QML上下文中，第一个参数为其在QML中的名字</span></span><br><span class=\"line\">    engine.rootContext().setContextProperty(<span class=\"string\">&quot;file&quot;</span>, myQmlFile)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 然后再加载QML文件</span></span><br><span class=\"line\">    engine.load(<span class=\"string\">&quot;mainwindow.qml&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>这里不能在注册的时候创建临时对象，因为QML引擎不会将该对象的引用计数加一，Python的GC会将该对象回收。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">   app = QGuiApplication(sys.argv)</span><br><span class=\"line\">   engine = QQmlApplicationEngine()</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\"># 这样做会出错</span></span><br><span class=\"line\">   engine.rootContext().setContextProperty(<span class=\"string\">&quot;file&quot;</span>, MyQmlFile())</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\"># 然后再加载QML文件</span></span><br><span class=\"line\">   engine.load(<span class=\"string\">&quot;mainwindow.qml&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">   sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n</blockquote>\n<p>打开和保存文件的时候，需要一个选择文件的窗口，可以使用<code>QtQuick.Dialogs 1.3</code>中的<code>FileDialog</code> :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">FileDialog</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> </span></span><br><span class=\"line\"><span class=\"string\">    title</span>:        <span class=\"comment\">// 窗口标题</span></span><br><span class=\"line\">    <span class=\"attribute\">folder</span>:       <span class=\"comment\">// 初始路径</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attribute\">onAccepted</span>:   <span class=\"comment\">// 确认选择文件的信号处理器</span></span><br><span class=\"line\">    <span class=\"attribute\">onRejected</span>:   <span class=\"comment\">// 点击取消的信号处理器</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attribute\">fileUrl</span>:      <span class=\"comment\">// 选中的文件的URL</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>通过<code>open</code>和<code>close</code>方法来打开和关闭该窗口</li>\n</ul>\n<p>下面代码实现了一个简单的文本文件编辑器 :  </p>\n<ul>\n<li><code>main.py</code></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> sys,os</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2 <span class=\"keyword\">import</span> QtCore</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtCore <span class=\"keyword\">import</span> QObject, QUrl</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtGui <span class=\"keyword\">import</span> QGuiApplication</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtQml <span class=\"keyword\">import</span> QQmlApplicationEngine</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyQmlFile</span>(<span class=\"title class_ inherited__\">QObject</span>) :</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, parent=<span class=\"literal\">None</span></span>) :</span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__(parent)</span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"meta\">    @QtCore.Slot(<span class=\"params\"><span class=\"built_in\">str</span>,<span class=\"built_in\">str</span></span>)</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">write</span>(<span class=\"params\">self, url, text</span>) :</span><br><span class=\"line\">        <span class=\"comment\"># 打开文件时需要将url转换为本地路径，编码采用UTF-8</span></span><br><span class=\"line\">        fp = <span class=\"built_in\">open</span>(QUrl(url).toLocalFile(), <span class=\"string\">&quot;w&quot;</span>, encoding=<span class=\"string\">&#x27;UTF-8&#x27;</span>)</span><br><span class=\"line\">        fp.write(text)</span><br><span class=\"line\">        fp.close()</span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"meta\">    @QtCore.Slot(<span class=\"params\"><span class=\"built_in\">str</span>, result=<span class=\"built_in\">str</span></span>)</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">read</span>(<span class=\"params\">self, url</span>) :</span><br><span class=\"line\">        fp = <span class=\"built_in\">open</span>(QUrl(url).toLocalFile(), <span class=\"string\">&quot;r&quot;</span>, encoding=<span class=\"string\">&#x27;UTF-8&#x27;</span>)</span><br><span class=\"line\">        ret = fp.read()</span><br><span class=\"line\">        fp.close()</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ret</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app = QGuiApplication(sys.argv)</span><br><span class=\"line\">    engine = QQmlApplicationEngine()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 实例化为对象</span></span><br><span class=\"line\">    myQmlFile = MyQmlFile()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 先将对象注册到QML上下文中，第一个参数为其在QML中的名字</span></span><br><span class=\"line\">    engine.rootContext().setContextProperty(<span class=\"string\">&quot;file&quot;</span>, myQmlFile)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 然后再加载QML文件</span></span><br><span class=\"line\">    qmlFile = <span class=\"string\">&quot;mainwindow.qml&quot;</span></span><br><span class=\"line\">    qmlPath = os.path.abspath(os.path.join(os.path.dirname(__file__), qmlFile))</span><br><span class=\"line\">    engine.load(qmlPath)</span><br><span class=\"line\"></span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>mainwindow.qml</code></li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Dialogs <span class=\"number\">1.3</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">ApplicationWindow</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// FileDialog是用于选择文件的窗口</span></span><br><span class=\"line\">    <span class=\"title\">FileDialog</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> openFileDialog</span></span><br><span class=\"line\">        <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;打开文件&quot;</span>)</span><br><span class=\"line\">        <span class=\"attribute\">folder</span>: <span class=\"string\">&quot;.&quot;</span></span><br><span class=\"line\">        <span class=\"attribute\">onAccepted</span>: &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 使用从Python注册的file对象读取文件内容</span></span><br><span class=\"line\">            editor.text = file.read(fileUrls)</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 关闭这个窗口</span></span><br><span class=\"line\">            close() </span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">FileDialog</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> saveFileDialog</span></span><br><span class=\"line\">        <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;保存文件&quot;</span>)</span><br><span class=\"line\">        <span class=\"attribute\">folder</span>: <span class=\"string\">&quot;.&quot;</span></span><br><span class=\"line\">        <span class=\"attribute\">onAccepted</span>: &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 使用从Python注册的file对象保存文件内容</span></span><br><span class=\"line\">            file.write(fileUrls, editor.text)</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 关闭这个窗口</span></span><br><span class=\"line\">            close()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 打开文件的Action</span></span><br><span class=\"line\">    <span class=\"title\">Action</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> openFileAction</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 触发action时显示文件窗口</span></span><br><span class=\"line\">        <span class=\"attribute\">onTriggered</span>: &#123;</span><br><span class=\"line\">            openFileDialog.open()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 保存文件的Action</span></span><br><span class=\"line\">    <span class=\"title\">Action</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> saveFileAction</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">onTriggered</span>: &#123;</span><br><span class=\"line\">            saveFileDialog.open()</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 复制的Action</span></span><br><span class=\"line\">    <span class=\"title\">Action</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> copyAction</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">onTriggered</span>: &#123;</span><br><span class=\"line\">            editor.copy() <span class=\"comment\">// 调用editor的copy方法</span></span><br><span class=\"line\">            editor.forceActiveFocus() <span class=\"comment\">// 恢复焦点</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 粘贴的Action</span></span><br><span class=\"line\">    <span class=\"title\">Action</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> pasteAction</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">onTriggered</span>: &#123;</span><br><span class=\"line\">            editor.paste() <span class=\"comment\">// 调用editor的paste方法</span></span><br><span class=\"line\">            editor.forceActiveFocus() <span class=\"comment\">// 恢复焦点</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 状态栏</span></span><br><span class=\"line\">    <span class=\"attribute\">menuBar</span> : <span class=\"title\">MenuBar</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Menu</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;文件(&amp;F)&quot;</span>)</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; </span><br><span class=\"line\">                <span class=\"attribute\">action</span>: openFileAction</span><br><span class=\"line\">                <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;打开(&amp;O)&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; </span><br><span class=\"line\">                <span class=\"attribute\">action</span>: saveFileAction</span><br><span class=\"line\">                <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;保存(&amp;S)&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Menu</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;编辑(&amp;E)&quot;</span>)</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; </span><br><span class=\"line\">                <span class=\"attribute\">action</span>: copyAction</span><br><span class=\"line\">                <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;复制&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: pasteAction</span><br><span class=\"line\">                <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;粘贴&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Header工具栏</span></span><br><span class=\"line\">    <span class=\"attribute\">header</span> : <span class=\"title\">ToolBar</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Row</span> &#123;</span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: openFileAction</span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/open.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: saveFileAction</span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/save.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: copyAction </span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/copy.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: pasteAction </span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/paste.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Footer放置一个文本当作状态栏</span></span><br><span class=\"line\">    <span class=\"attribute\">footer</span> : <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;状态栏&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 其余对象属于Content</span></span><br><span class=\"line\">    <span class=\"title\">ScrollView</span> &#123; </span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> scrollView</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">focus</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">property</span><span class=\"string\"> int select </span>: <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">TextArea</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> editor</span></span><br><span class=\"line\">            <span class=\"attribute\">font.pixelSize</span>: <span class=\"number\">22</span></span><br><span class=\"line\">            <span class=\"attribute\">focus</span>: <span class=\"literal\">true</span>  <span class=\"comment\">// 获取焦点(即键盘输入状态)</span></span><br><span class=\"line\">            <span class=\"attribute\">persistentSelection</span>: <span class=\"literal\">true</span>  <span class=\"comment\">// 丢失焦点时保留选取</span></span><br><span class=\"line\">            <span class=\"attribute\">selectByMouse</span>: <span class=\"literal\">true</span>  <span class=\"comment\">// 允许通过鼠标选取</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// text发生改变时根据长宽判断是否需要显示滚动条</span></span><br><span class=\"line\">            <span class=\"attribute\">onTextChanged</span> : &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(editor.height &gt; scrollView.height)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOn</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"title\">else</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOff</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(editor.width &gt; scrollView.width)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOn</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"title\">else</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOff</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/06.python_object/editor.png\" alt=\"Image\"></p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li><p>QML</p>\n<ul>\n<li><a href=\"https://doc.qt.io/qtforpython/PySide2/QtCore/QUrl.html\">QUrl</a></li>\n<li><a href=\"https://doc.qt.io/qtforpython/PySide2/QtQml/QQmlEngine.htm\">QQmlEngine</a></li>\n<li><a href=\"https://doc.qt.io/qtforpython/PySide2/QtQml/QQmlContext.html\">QQmlContext</a></li>\n</ul>\n</li>\n<li><p>PySide2</p>\n<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-dialogs-filedialog.html\">FileDialog</a></li>\n</ul>\n</li>\n</ul>\n"},{"title":"QML 主窗口的基本 UI 结构","date":"2025-02-10T10:43:10.000Z","_content":"\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/04.application_window.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 基本UI结构\n程序的UI可以按照设计者的喜好任意进行设计，Qt提供了一种最简单实用的UI结构。  \n\n![UI](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/04.application_window/structure.png)\n\n通过`QtQuick.Controls`模块中的`ApplicationWindow`元素即可创建一个这样的窗口 :  \n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Controls 2.5\n\nApplicationWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 状态栏\n    menuBar : MenuBar {\n        Menu {\n            title: qsTr(\"文件(&F)\")\n            MenuItem { text: qsTr(\"打开(&O)\") }\n            MenuItem { text: qsTr(\"保存(&S)\") }\n        }\n\n        Menu {\n            title: qsTr(\"编辑(&E)\")\n            MenuItem { text: qsTr(\"复制\") }\n            MenuItem { text: qsTr(\"粘贴\") }\n        }\n    }\n\n    // Header放置一个工具栏\n    header : ToolBar {\n        Row {\n            ToolButton {\n                icon.source: \"./res/open.png\"\n                icon.color: \"transparent\" // transparent表示使用图片原本的颜色\n            }\n\n            ToolButton {\n                icon.source: \"./res/save.png\"\n                icon.color: \"transparent\"\n            }\n\n            ToolButton {\n                icon.source: \"./res/copy.png\"\n                icon.color: \"transparent\"\n            }\n\n            ToolButton {\n                icon.source: \"./res/paste.png\"\n                icon.color: \"transparent\"\n            }\n        }\n    }\n\n    // Footer放置一个文本当作状态栏\n    footer : Text {\n        text: qsTr(\"状态栏\")\n\n    }\n\n    // 其余对象属于Content\n    ScrollView { // 带滚动条\n        anchors.fill: parent\n        focus: true\n\n        TextArea {\n            font.pixelSize: 22\n            focus: true  // 获取焦点(即键盘输入状态)\n        }\n    }\n}\n```\n* `ApplicationWindow`的`menuBar`、`header`、`footer`属性的元素分别对应图中位置。\n* 其他所有子元素则属于图中的`Content`位置。\n* `Menu`和`MenuItem`元素可以在文本中使用`&`来设置快捷键，例如`&F`表示快捷键为`Alt + F`。\n\n![运行结果](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/04.application_window/application.png)\n\n## 参考 :   \n* QML\n  * [ApplicationWindow](https://doc.qt.io/qt-5/qml-qtquick-controls2-applicationwindow.html)\n  * [MenuBar](https://doc.qt.io/qt-5/qml-qtquick-controls2-menubar.html)\n  * [Menu](https://doc.qt.io/qt-5/qml-qtquick-controls2-menu.html)\n  * [MenuItem](https://doc.qt.io/qt-5/qml-qtquick-controls2-menuitem.html)\n  * [ToolBar](https://doc.qt.io/qt-5/qml-qtquick-controls2-toolbar.html)\n  * [ToolButton](https://doc.qt.io/qt-5/qml-qtquick-controls2-toolbutton.html)\n  * [ScrollView](https://doc.qt.io/qt-5/qml-qtquick-controls2-scrollview.html)\n  * [TextArea](https://doc.qt.io/qt-5/qml-qtquick-controls2-textarea.html)","source":"_posts/QML-主窗口的基本-UI-结构.md","raw":"---\ntitle: QML 主窗口的基本 UI 结构\ndate: 2025-02-10 18:43:10\ntags:\n    - Qt\n    - QML\n    - Python\n    - PySide\n---\n\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/04.application_window.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 基本UI结构\n程序的UI可以按照设计者的喜好任意进行设计，Qt提供了一种最简单实用的UI结构。  \n\n![UI](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/04.application_window/structure.png)\n\n通过`QtQuick.Controls`模块中的`ApplicationWindow`元素即可创建一个这样的窗口 :  \n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Controls 2.5\n\nApplicationWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 状态栏\n    menuBar : MenuBar {\n        Menu {\n            title: qsTr(\"文件(&F)\")\n            MenuItem { text: qsTr(\"打开(&O)\") }\n            MenuItem { text: qsTr(\"保存(&S)\") }\n        }\n\n        Menu {\n            title: qsTr(\"编辑(&E)\")\n            MenuItem { text: qsTr(\"复制\") }\n            MenuItem { text: qsTr(\"粘贴\") }\n        }\n    }\n\n    // Header放置一个工具栏\n    header : ToolBar {\n        Row {\n            ToolButton {\n                icon.source: \"./res/open.png\"\n                icon.color: \"transparent\" // transparent表示使用图片原本的颜色\n            }\n\n            ToolButton {\n                icon.source: \"./res/save.png\"\n                icon.color: \"transparent\"\n            }\n\n            ToolButton {\n                icon.source: \"./res/copy.png\"\n                icon.color: \"transparent\"\n            }\n\n            ToolButton {\n                icon.source: \"./res/paste.png\"\n                icon.color: \"transparent\"\n            }\n        }\n    }\n\n    // Footer放置一个文本当作状态栏\n    footer : Text {\n        text: qsTr(\"状态栏\")\n\n    }\n\n    // 其余对象属于Content\n    ScrollView { // 带滚动条\n        anchors.fill: parent\n        focus: true\n\n        TextArea {\n            font.pixelSize: 22\n            focus: true  // 获取焦点(即键盘输入状态)\n        }\n    }\n}\n```\n* `ApplicationWindow`的`menuBar`、`header`、`footer`属性的元素分别对应图中位置。\n* 其他所有子元素则属于图中的`Content`位置。\n* `Menu`和`MenuItem`元素可以在文本中使用`&`来设置快捷键，例如`&F`表示快捷键为`Alt + F`。\n\n![运行结果](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/04.application_window/application.png)\n\n## 参考 :   \n* QML\n  * [ApplicationWindow](https://doc.qt.io/qt-5/qml-qtquick-controls2-applicationwindow.html)\n  * [MenuBar](https://doc.qt.io/qt-5/qml-qtquick-controls2-menubar.html)\n  * [Menu](https://doc.qt.io/qt-5/qml-qtquick-controls2-menu.html)\n  * [MenuItem](https://doc.qt.io/qt-5/qml-qtquick-controls2-menuitem.html)\n  * [ToolBar](https://doc.qt.io/qt-5/qml-qtquick-controls2-toolbar.html)\n  * [ToolButton](https://doc.qt.io/qt-5/qml-qtquick-controls2-toolbutton.html)\n  * [ScrollView](https://doc.qt.io/qt-5/qml-qtquick-controls2-scrollview.html)\n  * [TextArea](https://doc.qt.io/qt-5/qml-qtquick-controls2-textarea.html)","slug":"QML-主窗口的基本-UI-结构","published":1,"updated":"2025-02-10T10:43:42.081Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t890003mkin4joded8o","content":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/04.application_window.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"基本UI结构\"><a href=\"#基本UI结构\" class=\"headerlink\" title=\"基本UI结构\"></a>基本UI结构</h1><p>程序的UI可以按照设计者的喜好任意进行设计，Qt提供了一种最简单实用的UI结构。  </p>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/04.application_window/structure.png\" alt=\"UI\"></p>\n<p>通过<code>QtQuick.Controls</code>模块中的<code>ApplicationWindow</code>元素即可创建一个这样的窗口 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">ApplicationWindow</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 状态栏</span></span><br><span class=\"line\">    <span class=\"attribute\">menuBar</span> : <span class=\"title\">MenuBar</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Menu</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;文件(&amp;F)&quot;</span>)</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;打开(&amp;O)&quot;</span>) &#125;</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;保存(&amp;S)&quot;</span>) &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Menu</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;编辑(&amp;E)&quot;</span>)</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;复制&quot;</span>) &#125;</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;粘贴&quot;</span>) &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Header放置一个工具栏</span></span><br><span class=\"line\">    <span class=\"attribute\">header</span> : <span class=\"title\">ToolBar</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Row</span> &#123;</span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/open.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span> <span class=\"comment\">// transparent表示使用图片原本的颜色</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/save.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/copy.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/paste.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Footer放置一个文本当作状态栏</span></span><br><span class=\"line\">    <span class=\"attribute\">footer</span> : <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;状态栏&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 其余对象属于Content</span></span><br><span class=\"line\">    <span class=\"title\">ScrollView</span> &#123; <span class=\"comment\">// 带滚动条</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">focus</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">TextArea</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">font.pixelSize</span>: <span class=\"number\">22</span></span><br><span class=\"line\">            <span class=\"attribute\">focus</span>: <span class=\"literal\">true</span>  <span class=\"comment\">// 获取焦点(即键盘输入状态)</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>ApplicationWindow</code>的<code>menuBar</code>、<code>header</code>、<code>footer</code>属性的元素分别对应图中位置。</li>\n<li>其他所有子元素则属于图中的<code>Content</code>位置。</li>\n<li><code>Menu</code>和<code>MenuItem</code>元素可以在文本中使用<code>&amp;</code>来设置快捷键，例如<code>&amp;F</code>表示快捷键为<code>Alt + F</code>。</li>\n</ul>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/04.application_window/application.png\" alt=\"运行结果\"></p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li>QML<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-applicationwindow.html\">ApplicationWindow</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-menubar.html\">MenuBar</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-menu.html\">Menu</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-menuitem.html\">MenuItem</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-toolbar.html\">ToolBar</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-toolbutton.html\">ToolButton</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-scrollview.html\">ScrollView</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-textarea.html\">TextArea</a></li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/04.application_window.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"基本UI结构\"><a href=\"#基本UI结构\" class=\"headerlink\" title=\"基本UI结构\"></a>基本UI结构</h1><p>程序的UI可以按照设计者的喜好任意进行设计，Qt提供了一种最简单实用的UI结构。  </p>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/04.application_window/structure.png\" alt=\"UI\"></p>\n<p>通过<code>QtQuick.Controls</code>模块中的<code>ApplicationWindow</code>元素即可创建一个这样的窗口 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">ApplicationWindow</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 状态栏</span></span><br><span class=\"line\">    <span class=\"attribute\">menuBar</span> : <span class=\"title\">MenuBar</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Menu</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;文件(&amp;F)&quot;</span>)</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;打开(&amp;O)&quot;</span>) &#125;</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;保存(&amp;S)&quot;</span>) &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Menu</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;编辑(&amp;E)&quot;</span>)</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;复制&quot;</span>) &#125;</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;粘贴&quot;</span>) &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Header放置一个工具栏</span></span><br><span class=\"line\">    <span class=\"attribute\">header</span> : <span class=\"title\">ToolBar</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Row</span> &#123;</span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/open.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span> <span class=\"comment\">// transparent表示使用图片原本的颜色</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/save.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/copy.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/paste.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Footer放置一个文本当作状态栏</span></span><br><span class=\"line\">    <span class=\"attribute\">footer</span> : <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;状态栏&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 其余对象属于Content</span></span><br><span class=\"line\">    <span class=\"title\">ScrollView</span> &#123; <span class=\"comment\">// 带滚动条</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">focus</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">TextArea</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">font.pixelSize</span>: <span class=\"number\">22</span></span><br><span class=\"line\">            <span class=\"attribute\">focus</span>: <span class=\"literal\">true</span>  <span class=\"comment\">// 获取焦点(即键盘输入状态)</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>ApplicationWindow</code>的<code>menuBar</code>、<code>header</code>、<code>footer</code>属性的元素分别对应图中位置。</li>\n<li>其他所有子元素则属于图中的<code>Content</code>位置。</li>\n<li><code>Menu</code>和<code>MenuItem</code>元素可以在文本中使用<code>&amp;</code>来设置快捷键，例如<code>&amp;F</code>表示快捷键为<code>Alt + F</code>。</li>\n</ul>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/04.application_window/application.png\" alt=\"运行结果\"></p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li>QML<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-applicationwindow.html\">ApplicationWindow</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-menubar.html\">MenuBar</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-menu.html\">Menu</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-menuitem.html\">MenuItem</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-toolbar.html\">ToolBar</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-toolbutton.html\">ToolButton</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-scrollview.html\">ScrollView</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-textarea.html\">TextArea</a></li>\n</ul>\n</li>\n</ul>\n"},{"title":"QML 使用 Action","date":"2025-02-10T10:44:37.000Z","_content":"\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/05.action.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 使用Action\n有时候会遇到多个操作执行相同的流程（例如菜单栏和工具栏都有复制和粘贴），这时可以创建一个`Action`，然后将其绑定到多个位置。\n```QML\n// 创建Action\nAction {\n    id: act1\n    text:        // 显示的文字\n    icon:        // 图标\n    shortcut:    // 快捷键\n\n    onTriggered: // 信号处理器\n}\n\n// 绑定Action\nButton {\n    action: act1\n}\n```\n\n下面代码通过`Action`实现了文本编辑器的复制粘贴功能，因为**希望在Toolbar里只显示图标不显示文字**，所以没有在`Action`里设置`text`和`icon` :  \n```QML\nimport QtQuick 2.13\nimport QtQuick.Controls 2.5\n\nApplicationWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 复制的Action\n    Action {\n        id: copyAction\n\n        onTriggered: {\n            editor.copy() // 调用editor的copy方法\n            editor.forceActiveFocus() // 恢复焦点\n        }\n\n    }\n\n    // 粘贴的Action\n    Action {\n        id: pasteAction\n\n        onTriggered: {\n            editor.paste() // 调用editor的paste方法\n            editor.forceActiveFocus() // 恢复焦点\n        }\n    }\n\n    // 状态栏\n    menuBar : MenuBar {\n        Menu {\n            title: qsTr(\"编辑(&E)\")\n            MenuItem { \n                action: copyAction // 绑定Action\n\n                text: qsTr(\"复制\")\n            }\n            MenuItem {\n                action: pasteAction // 绑定Action\n\n                text: qsTr(\"粘贴\")\n            }\n        }\n    }\n\n    // Header放置一个工具栏\n    header : ToolBar {\n        Row {\n            ToolButton {\n                action: copyAction // 绑定Action\n\n                icon.source: \"./res/copy.png\"\n                icon.color: \"transparent\"\n            }\n\n            ToolButton {\n                action: pasteAction // 绑定Action\n\n                icon.source: \"./res/paste.png\"\n                icon.color: \"transparent\"\n            }\n        }\n    }\n\n    // Footer放置一个文本当作状态栏\n    footer : Text {\n        text: qsTr(\"状态栏\")\n\n    }\n\n    // 其余对象属于Content\n    ScrollView { \n        id: scrollView\n        anchors.fill: parent\n        focus: true\n\n        property int select : 0\n\n        TextArea {\n            id: editor\n            font.pixelSize: 22\n            focus: true  // 获取焦点(即键盘输入状态)\n            persistentSelection: true  // 丢失焦点时保留选取\n            selectByMouse: true  // 允许通过鼠标选取\n\n            // text发生改变时根据长宽判断是否需要显示滚动条\n            onTextChanged : {\n                if(editor.height > scrollView.height)\n                {\n                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOn\n                }\n                else\n                {\n                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOff\n                }\n\n                if(editor.width > scrollView.width)\n                {\n                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOn\n                }\n                else\n                {\n                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOff\n                }\n            }\n        }\n    }\n}\n```\n\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/05.action/copy_and_paste.png)","source":"_posts/QML-使用-Action.md","raw":"---\ntitle: QML 使用 Action\ndate: 2025-02-10 18:44:37\ntags:\n    - Qt\n    - QML\n    - Python\n    - PySide\n---\n\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/05.action.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 使用Action\n有时候会遇到多个操作执行相同的流程（例如菜单栏和工具栏都有复制和粘贴），这时可以创建一个`Action`，然后将其绑定到多个位置。\n```QML\n// 创建Action\nAction {\n    id: act1\n    text:        // 显示的文字\n    icon:        // 图标\n    shortcut:    // 快捷键\n\n    onTriggered: // 信号处理器\n}\n\n// 绑定Action\nButton {\n    action: act1\n}\n```\n\n下面代码通过`Action`实现了文本编辑器的复制粘贴功能，因为**希望在Toolbar里只显示图标不显示文字**，所以没有在`Action`里设置`text`和`icon` :  \n```QML\nimport QtQuick 2.13\nimport QtQuick.Controls 2.5\n\nApplicationWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 复制的Action\n    Action {\n        id: copyAction\n\n        onTriggered: {\n            editor.copy() // 调用editor的copy方法\n            editor.forceActiveFocus() // 恢复焦点\n        }\n\n    }\n\n    // 粘贴的Action\n    Action {\n        id: pasteAction\n\n        onTriggered: {\n            editor.paste() // 调用editor的paste方法\n            editor.forceActiveFocus() // 恢复焦点\n        }\n    }\n\n    // 状态栏\n    menuBar : MenuBar {\n        Menu {\n            title: qsTr(\"编辑(&E)\")\n            MenuItem { \n                action: copyAction // 绑定Action\n\n                text: qsTr(\"复制\")\n            }\n            MenuItem {\n                action: pasteAction // 绑定Action\n\n                text: qsTr(\"粘贴\")\n            }\n        }\n    }\n\n    // Header放置一个工具栏\n    header : ToolBar {\n        Row {\n            ToolButton {\n                action: copyAction // 绑定Action\n\n                icon.source: \"./res/copy.png\"\n                icon.color: \"transparent\"\n            }\n\n            ToolButton {\n                action: pasteAction // 绑定Action\n\n                icon.source: \"./res/paste.png\"\n                icon.color: \"transparent\"\n            }\n        }\n    }\n\n    // Footer放置一个文本当作状态栏\n    footer : Text {\n        text: qsTr(\"状态栏\")\n\n    }\n\n    // 其余对象属于Content\n    ScrollView { \n        id: scrollView\n        anchors.fill: parent\n        focus: true\n\n        property int select : 0\n\n        TextArea {\n            id: editor\n            font.pixelSize: 22\n            focus: true  // 获取焦点(即键盘输入状态)\n            persistentSelection: true  // 丢失焦点时保留选取\n            selectByMouse: true  // 允许通过鼠标选取\n\n            // text发生改变时根据长宽判断是否需要显示滚动条\n            onTextChanged : {\n                if(editor.height > scrollView.height)\n                {\n                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOn\n                }\n                else\n                {\n                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOff\n                }\n\n                if(editor.width > scrollView.width)\n                {\n                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOn\n                }\n                else\n                {\n                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOff\n                }\n            }\n        }\n    }\n}\n```\n\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/05.action/copy_and_paste.png)","slug":"QML-使用-Action","published":1,"updated":"2025-02-10T10:45:04.756Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t8b0004mkingxcf91bf","content":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/05.action.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"使用Action\"><a href=\"#使用Action\" class=\"headerlink\" title=\"使用Action\"></a>使用Action</h1><p>有时候会遇到多个操作执行相同的流程（例如菜单栏和工具栏都有复制和粘贴），这时可以创建一个<code>Action</code>，然后将其绑定到多个位置。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建Action</span></span><br><span class=\"line\"><span class=\"title\">Action</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> act1</span></span><br><span class=\"line\">    <span class=\"attribute\">text</span>:        <span class=\"comment\">// 显示的文字</span></span><br><span class=\"line\">    <span class=\"attribute\">icon</span>:        <span class=\"comment\">// 图标</span></span><br><span class=\"line\">    <span class=\"attribute\">shortcut</span>:    <span class=\"comment\">// 快捷键</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attribute\">onTriggered</span>: <span class=\"comment\">// 信号处理器</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 绑定Action</span></span><br><span class=\"line\"><span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">action</span>: act1</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>下面代码通过<code>Action</code>实现了文本编辑器的复制粘贴功能，因为<strong>希望在Toolbar里只显示图标不显示文字</strong>，所以没有在<code>Action</code>里设置<code>text</code>和<code>icon</code> :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">ApplicationWindow</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 复制的Action</span></span><br><span class=\"line\">    <span class=\"title\">Action</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> copyAction</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">onTriggered</span>: &#123;</span><br><span class=\"line\">            editor.copy() <span class=\"comment\">// 调用editor的copy方法</span></span><br><span class=\"line\">            editor.forceActiveFocus() <span class=\"comment\">// 恢复焦点</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 粘贴的Action</span></span><br><span class=\"line\">    <span class=\"title\">Action</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> pasteAction</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">onTriggered</span>: &#123;</span><br><span class=\"line\">            editor.paste() <span class=\"comment\">// 调用editor的paste方法</span></span><br><span class=\"line\">            editor.forceActiveFocus() <span class=\"comment\">// 恢复焦点</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 状态栏</span></span><br><span class=\"line\">    <span class=\"attribute\">menuBar</span> : <span class=\"title\">MenuBar</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Menu</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;编辑(&amp;E)&quot;</span>)</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; </span><br><span class=\"line\">                <span class=\"attribute\">action</span>: copyAction <span class=\"comment\">// 绑定Action</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;复制&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: pasteAction <span class=\"comment\">// 绑定Action</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;粘贴&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Header放置一个工具栏</span></span><br><span class=\"line\">    <span class=\"attribute\">header</span> : <span class=\"title\">ToolBar</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Row</span> &#123;</span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: copyAction <span class=\"comment\">// 绑定Action</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/copy.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: pasteAction <span class=\"comment\">// 绑定Action</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/paste.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Footer放置一个文本当作状态栏</span></span><br><span class=\"line\">    <span class=\"attribute\">footer</span> : <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;状态栏&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 其余对象属于Content</span></span><br><span class=\"line\">    <span class=\"title\">ScrollView</span> &#123; </span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> scrollView</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">focus</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">property</span><span class=\"string\"> int select </span>: <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">TextArea</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> editor</span></span><br><span class=\"line\">            <span class=\"attribute\">font.pixelSize</span>: <span class=\"number\">22</span></span><br><span class=\"line\">            <span class=\"attribute\">focus</span>: <span class=\"literal\">true</span>  <span class=\"comment\">// 获取焦点(即键盘输入状态)</span></span><br><span class=\"line\">            <span class=\"attribute\">persistentSelection</span>: <span class=\"literal\">true</span>  <span class=\"comment\">// 丢失焦点时保留选取</span></span><br><span class=\"line\">            <span class=\"attribute\">selectByMouse</span>: <span class=\"literal\">true</span>  <span class=\"comment\">// 允许通过鼠标选取</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// text发生改变时根据长宽判断是否需要显示滚动条</span></span><br><span class=\"line\">            <span class=\"attribute\">onTextChanged</span> : &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(editor.height &gt; scrollView.height)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOn</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"title\">else</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOff</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(editor.width &gt; scrollView.width)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOn</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"title\">else</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOff</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/05.action/copy_and_paste.png\" alt=\"Image\"></p>\n","excerpt":"","more":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/05.action.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"使用Action\"><a href=\"#使用Action\" class=\"headerlink\" title=\"使用Action\"></a>使用Action</h1><p>有时候会遇到多个操作执行相同的流程（例如菜单栏和工具栏都有复制和粘贴），这时可以创建一个<code>Action</code>，然后将其绑定到多个位置。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 创建Action</span></span><br><span class=\"line\"><span class=\"title\">Action</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> act1</span></span><br><span class=\"line\">    <span class=\"attribute\">text</span>:        <span class=\"comment\">// 显示的文字</span></span><br><span class=\"line\">    <span class=\"attribute\">icon</span>:        <span class=\"comment\">// 图标</span></span><br><span class=\"line\">    <span class=\"attribute\">shortcut</span>:    <span class=\"comment\">// 快捷键</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"attribute\">onTriggered</span>: <span class=\"comment\">// 信号处理器</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 绑定Action</span></span><br><span class=\"line\"><span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">action</span>: act1</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>下面代码通过<code>Action</code>实现了文本编辑器的复制粘贴功能，因为<strong>希望在Toolbar里只显示图标不显示文字</strong>，所以没有在<code>Action</code>里设置<code>text</code>和<code>icon</code> :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">ApplicationWindow</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 复制的Action</span></span><br><span class=\"line\">    <span class=\"title\">Action</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> copyAction</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">onTriggered</span>: &#123;</span><br><span class=\"line\">            editor.copy() <span class=\"comment\">// 调用editor的copy方法</span></span><br><span class=\"line\">            editor.forceActiveFocus() <span class=\"comment\">// 恢复焦点</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 粘贴的Action</span></span><br><span class=\"line\">    <span class=\"title\">Action</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> pasteAction</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">onTriggered</span>: &#123;</span><br><span class=\"line\">            editor.paste() <span class=\"comment\">// 调用editor的paste方法</span></span><br><span class=\"line\">            editor.forceActiveFocus() <span class=\"comment\">// 恢复焦点</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 状态栏</span></span><br><span class=\"line\">    <span class=\"attribute\">menuBar</span> : <span class=\"title\">MenuBar</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Menu</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;编辑(&amp;E)&quot;</span>)</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123; </span><br><span class=\"line\">                <span class=\"attribute\">action</span>: copyAction <span class=\"comment\">// 绑定Action</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;复制&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"title\">MenuItem</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: pasteAction <span class=\"comment\">// 绑定Action</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;粘贴&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Header放置一个工具栏</span></span><br><span class=\"line\">    <span class=\"attribute\">header</span> : <span class=\"title\">ToolBar</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Row</span> &#123;</span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: copyAction <span class=\"comment\">// 绑定Action</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/copy.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ToolButton</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">action</span>: pasteAction <span class=\"comment\">// 绑定Action</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">icon.source</span>: <span class=\"string\">&quot;./res/paste.png&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">icon.color</span>: <span class=\"string\">&quot;transparent&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Footer放置一个文本当作状态栏</span></span><br><span class=\"line\">    <span class=\"attribute\">footer</span> : <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;状态栏&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 其余对象属于Content</span></span><br><span class=\"line\">    <span class=\"title\">ScrollView</span> &#123; </span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> scrollView</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">focus</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">property</span><span class=\"string\"> int select </span>: <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">TextArea</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> editor</span></span><br><span class=\"line\">            <span class=\"attribute\">font.pixelSize</span>: <span class=\"number\">22</span></span><br><span class=\"line\">            <span class=\"attribute\">focus</span>: <span class=\"literal\">true</span>  <span class=\"comment\">// 获取焦点(即键盘输入状态)</span></span><br><span class=\"line\">            <span class=\"attribute\">persistentSelection</span>: <span class=\"literal\">true</span>  <span class=\"comment\">// 丢失焦点时保留选取</span></span><br><span class=\"line\">            <span class=\"attribute\">selectByMouse</span>: <span class=\"literal\">true</span>  <span class=\"comment\">// 允许通过鼠标选取</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// text发生改变时根据长宽判断是否需要显示滚动条</span></span><br><span class=\"line\">            <span class=\"attribute\">onTextChanged</span> : &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(editor.height &gt; scrollView.height)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOn</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"title\">else</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.vertical.policy = ScrollBar.AlwaysOff</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(editor.width &gt; scrollView.width)</span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOn</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"title\">else</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    scrollView.ScrollBar.horizontal.policy = ScrollBar.AlwaysOff</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/05.action/copy_and_paste.png\" alt=\"Image\"></p>\n"},{"title":"QML 使用 Canvas 绘图","date":"2025-02-10T10:47:34.000Z","_content":"\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/07.canvas.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 使用Canvas绘图\nCanvas定义一个绘图区域，可以使用JavaScript代码来进行绘制，可以制作自定义控件、游戏等。\n\n```QML\nCanvas {\n    // 绘图信号处理器，在这里面写绘图操作\n    onPaint: {\n        /* 获取Canvas的Context2D，参数只支持\"2d\" */\n        var ctx = getContext(\"2d\") \n\n        /* 然后通过ctx进行绘图 */\n    }\n}\n```\n\n按照下图，用Canvas绘制一个数码管风格的数字显示器。  \n\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/07.canvas/design.png)\n\n代码如下 :  \n\n```QML\nCanvas {\n        width: 120\n        height: 220\n        property color background : \"white\"  // 背景色\n        property color color : \"green\"       // 前景色\n        property int number : 9              // 显示的数字\n\n        onPaint: {\n            /* 获取Canvas的Context2D，参数只支持\"2d\" */\n            var ctx = getContext(\"2d\") \n\n            /* 填满背景色 */\n            ctx.fillStyle = background\n            ctx.fillRect(0, 0, width, height);\n\n            switch(number)\n            {\n                case 0 :\n                    paintA(ctx)\n                    paintB(ctx)\n                    paintC(ctx)\n                    paintD(ctx)\n                    paintE(ctx)\n                    paintF(ctx)\n                    break\n\n                case 1 :\n                    paintB(ctx)\n                    paintC(ctx)\n                    break\n\n                case 2 :\n                    paintA(ctx)\n                    paintB(ctx)\n                    paintG(ctx)\n                    paintE(ctx)\n                    paintD(ctx)\n                    break\n\n                case 3 :\n                    paintA(ctx)\n                    paintB(ctx)\n                    paintG(ctx)\n                    paintC(ctx)\n                    paintD(ctx)\n                    break\n\n                case 4 :\n                    paintF(ctx)\n                    paintG(ctx)\n                    paintB(ctx)\n                    paintC(ctx)\n                    break\n\n                case 5 :\n                    paintF(ctx)\n                    paintG(ctx)\n                    paintC(ctx)\n                    paintD(ctx)\n                    paintA(ctx)\n                    break\n\n                case 6 :\n                    paintA(ctx)\n                    paintF(ctx)\n                    paintE(ctx)\n                    paintD(ctx)\n                    paintC(ctx)\n                    paintG(ctx)\n                    break\n\n                case 7 :\n                    paintA(ctx)\n                    paintB(ctx)\n                    paintC(ctx)\n                    break\n\n                case 8 :\n                    paintA(ctx)\n                    paintB(ctx)\n                    paintC(ctx)\n                    paintD(ctx)\n                    paintE(ctx)\n                    paintF(ctx)\n                    paintG(ctx)\n                    break\n\n                case 9 :\n                    paintA(ctx)\n                    paintF(ctx)\n                    paintG(ctx)\n                    paintB(ctx)\n                    paintC(ctx)\n                    paintD(ctx)\n                    break\n            }\n        }\n\n        function paintA(ctx)\n        {\n            var w = width / 6\n            var h = height / 11\n            ctx.fillStyle = color\n            ctx.fillRect(w, 0, 4*w, h) // x, y, width, height\n        }\n\n        function paintB(ctx)\n        {\n            var w = width / 6\n            var h = height / 11\n            ctx.fillStyle = color\n            ctx.fillRect(5*w, h, w, 4*h)\n        }\n\n        function paintC(ctx)\n        {\n            var w = width / 6\n            var h = height / 11\n            ctx.fillStyle = color\n            ctx.fillRect(5*w, 6*h, w, 4*h)\n        }\n\n        function paintD(ctx)\n        {\n            var w = width / 6\n            var h = height / 11\n            ctx.fillStyle = color\n            ctx.fillRect(w, 10*h, 4*w, h)\n        }\n\n        function paintE(ctx)\n        {\n            var w = width / 6\n            var h = height / 11\n            ctx.fillStyle = color\n            ctx.fillRect(0, 6*h, w, 4*h)\n        }\n\n        function paintF(ctx)\n        {\n            var w = width / 6\n            var h = height / 11\n            ctx.fillStyle = color\n            ctx.fillRect(0, h, w, 4*h)\n        }\n\n        function paintG(ctx)\n        {\n            var w = width / 6\n            var h = height / 11\n            ctx.fillStyle = color\n            ctx.fillRect(w, 5*h, 4*w, h)\n        }\n    }\n```\n\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/07.canvas/canvas.png)\n\n## 参考 :  \n* QML\n  * [Canvas](https://doc.qt.io/qt-5/qml-qtquick-canvas.html)\n  * [Context2D](https://doc.qt.io/qt-5/qml-qtquick-context2d.html)","source":"_posts/QML-使用-Canvas-绘图.md","raw":"---\ntitle: QML 使用 Canvas 绘图\ndate: 2025-02-10 18:47:34\ntags:\n    - Qt\n    - QML\n    - Python\n    - PySide\n---\n\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/07.canvas.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 使用Canvas绘图\nCanvas定义一个绘图区域，可以使用JavaScript代码来进行绘制，可以制作自定义控件、游戏等。\n\n```QML\nCanvas {\n    // 绘图信号处理器，在这里面写绘图操作\n    onPaint: {\n        /* 获取Canvas的Context2D，参数只支持\"2d\" */\n        var ctx = getContext(\"2d\") \n\n        /* 然后通过ctx进行绘图 */\n    }\n}\n```\n\n按照下图，用Canvas绘制一个数码管风格的数字显示器。  \n\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/07.canvas/design.png)\n\n代码如下 :  \n\n```QML\nCanvas {\n        width: 120\n        height: 220\n        property color background : \"white\"  // 背景色\n        property color color : \"green\"       // 前景色\n        property int number : 9              // 显示的数字\n\n        onPaint: {\n            /* 获取Canvas的Context2D，参数只支持\"2d\" */\n            var ctx = getContext(\"2d\") \n\n            /* 填满背景色 */\n            ctx.fillStyle = background\n            ctx.fillRect(0, 0, width, height);\n\n            switch(number)\n            {\n                case 0 :\n                    paintA(ctx)\n                    paintB(ctx)\n                    paintC(ctx)\n                    paintD(ctx)\n                    paintE(ctx)\n                    paintF(ctx)\n                    break\n\n                case 1 :\n                    paintB(ctx)\n                    paintC(ctx)\n                    break\n\n                case 2 :\n                    paintA(ctx)\n                    paintB(ctx)\n                    paintG(ctx)\n                    paintE(ctx)\n                    paintD(ctx)\n                    break\n\n                case 3 :\n                    paintA(ctx)\n                    paintB(ctx)\n                    paintG(ctx)\n                    paintC(ctx)\n                    paintD(ctx)\n                    break\n\n                case 4 :\n                    paintF(ctx)\n                    paintG(ctx)\n                    paintB(ctx)\n                    paintC(ctx)\n                    break\n\n                case 5 :\n                    paintF(ctx)\n                    paintG(ctx)\n                    paintC(ctx)\n                    paintD(ctx)\n                    paintA(ctx)\n                    break\n\n                case 6 :\n                    paintA(ctx)\n                    paintF(ctx)\n                    paintE(ctx)\n                    paintD(ctx)\n                    paintC(ctx)\n                    paintG(ctx)\n                    break\n\n                case 7 :\n                    paintA(ctx)\n                    paintB(ctx)\n                    paintC(ctx)\n                    break\n\n                case 8 :\n                    paintA(ctx)\n                    paintB(ctx)\n                    paintC(ctx)\n                    paintD(ctx)\n                    paintE(ctx)\n                    paintF(ctx)\n                    paintG(ctx)\n                    break\n\n                case 9 :\n                    paintA(ctx)\n                    paintF(ctx)\n                    paintG(ctx)\n                    paintB(ctx)\n                    paintC(ctx)\n                    paintD(ctx)\n                    break\n            }\n        }\n\n        function paintA(ctx)\n        {\n            var w = width / 6\n            var h = height / 11\n            ctx.fillStyle = color\n            ctx.fillRect(w, 0, 4*w, h) // x, y, width, height\n        }\n\n        function paintB(ctx)\n        {\n            var w = width / 6\n            var h = height / 11\n            ctx.fillStyle = color\n            ctx.fillRect(5*w, h, w, 4*h)\n        }\n\n        function paintC(ctx)\n        {\n            var w = width / 6\n            var h = height / 11\n            ctx.fillStyle = color\n            ctx.fillRect(5*w, 6*h, w, 4*h)\n        }\n\n        function paintD(ctx)\n        {\n            var w = width / 6\n            var h = height / 11\n            ctx.fillStyle = color\n            ctx.fillRect(w, 10*h, 4*w, h)\n        }\n\n        function paintE(ctx)\n        {\n            var w = width / 6\n            var h = height / 11\n            ctx.fillStyle = color\n            ctx.fillRect(0, 6*h, w, 4*h)\n        }\n\n        function paintF(ctx)\n        {\n            var w = width / 6\n            var h = height / 11\n            ctx.fillStyle = color\n            ctx.fillRect(0, h, w, 4*h)\n        }\n\n        function paintG(ctx)\n        {\n            var w = width / 6\n            var h = height / 11\n            ctx.fillStyle = color\n            ctx.fillRect(w, 5*h, 4*w, h)\n        }\n    }\n```\n\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/07.canvas/canvas.png)\n\n## 参考 :  \n* QML\n  * [Canvas](https://doc.qt.io/qt-5/qml-qtquick-canvas.html)\n  * [Context2D](https://doc.qt.io/qt-5/qml-qtquick-context2d.html)","slug":"QML-使用-Canvas-绘图","published":1,"updated":"2025-02-10T10:48:12.980Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t8c0005mkinaz2k4o4w","content":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/07.canvas.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"使用Canvas绘图\"><a href=\"#使用Canvas绘图\" class=\"headerlink\" title=\"使用Canvas绘图\"></a>使用Canvas绘图</h1><p>Canvas定义一个绘图区域，可以使用JavaScript代码来进行绘制，可以制作自定义控件、游戏等。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">Canvas</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 绘图信号处理器，在这里面写绘图操作</span></span><br><span class=\"line\">    <span class=\"attribute\">onPaint</span>: &#123;</span><br><span class=\"line\">        <span class=\"comment\">/* 获取Canvas的Context2D，参数只支持&quot;2d&quot; */</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> ctx = getContext(<span class=\"string\">&quot;2d&quot;</span>) </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* 然后通过ctx进行绘图 */</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>按照下图，用Canvas绘制一个数码管风格的数字显示器。  </p>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/07.canvas/design.png\" alt=\"Image\"></p>\n<p>代码如下 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">Canvas</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">120</span></span><br><span class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">220</span></span><br><span class=\"line\">        <span class=\"keyword\">property</span><span class=\"string\"> color background </span>: <span class=\"string\">&quot;white&quot;</span>  <span class=\"comment\">// 背景色</span></span><br><span class=\"line\">        <span class=\"keyword\">property</span><span class=\"string\"> color color </span>: <span class=\"string\">&quot;green&quot;</span>       <span class=\"comment\">// 前景色</span></span><br><span class=\"line\">        <span class=\"keyword\">property</span><span class=\"string\"> int number </span>: <span class=\"number\">9</span>              <span class=\"comment\">// 显示的数字</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">onPaint</span>: &#123;</span><br><span class=\"line\">            <span class=\"comment\">/* 获取Canvas的Context2D，参数只支持&quot;2d&quot; */</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> ctx = getContext(<span class=\"string\">&quot;2d&quot;</span>) </span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">/* 填满背景色 */</span></span><br><span class=\"line\">            ctx.fillStyle = background</span><br><span class=\"line\">            ctx.fillRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, width, height);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">switch</span>(number)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">0</span> :</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    paintD(ctx)</span><br><span class=\"line\">                    paintE(ctx)</span><br><span class=\"line\">                    paintF(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">1</span> :</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">2</span> :</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintG(ctx)</span><br><span class=\"line\">                    paintE(ctx)</span><br><span class=\"line\">                    paintD(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">3</span> :</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintG(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    paintD(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">4</span> :</span><br><span class=\"line\">                    paintF(ctx)</span><br><span class=\"line\">                    paintG(ctx)</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">5</span> :</span><br><span class=\"line\">                    paintF(ctx)</span><br><span class=\"line\">                    paintG(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    paintD(ctx)</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">6</span> :</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    paintF(ctx)</span><br><span class=\"line\">                    paintE(ctx)</span><br><span class=\"line\">                    paintD(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    paintG(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">7</span> :</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">8</span> :</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    paintD(ctx)</span><br><span class=\"line\">                    paintE(ctx)</span><br><span class=\"line\">                    paintF(ctx)</span><br><span class=\"line\">                    paintG(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">9</span> :</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    paintF(ctx)</span><br><span class=\"line\">                    paintG(ctx)</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    paintD(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">paintA</span>(<span class=\"params\">ctx</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> w = width / <span class=\"number\">6</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> h = height / <span class=\"number\">11</span></span><br><span class=\"line\">            ctx.fillStyle = <span class=\"built_in\">color</span></span><br><span class=\"line\">            ctx.fillRect(w, <span class=\"number\">0</span>, <span class=\"number\">4</span>*w, h) <span class=\"comment\">// x, y, width, height</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">paintB</span>(<span class=\"params\">ctx</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> w = width / <span class=\"number\">6</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> h = height / <span class=\"number\">11</span></span><br><span class=\"line\">            ctx.fillStyle = <span class=\"built_in\">color</span></span><br><span class=\"line\">            ctx.fillRect(<span class=\"number\">5</span>*w, h, w, <span class=\"number\">4</span>*h)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">paintC</span>(<span class=\"params\">ctx</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> w = width / <span class=\"number\">6</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> h = height / <span class=\"number\">11</span></span><br><span class=\"line\">            ctx.fillStyle = <span class=\"built_in\">color</span></span><br><span class=\"line\">            ctx.fillRect(<span class=\"number\">5</span>*w, <span class=\"number\">6</span>*h, w, <span class=\"number\">4</span>*h)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">paintD</span>(<span class=\"params\">ctx</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> w = width / <span class=\"number\">6</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> h = height / <span class=\"number\">11</span></span><br><span class=\"line\">            ctx.fillStyle = <span class=\"built_in\">color</span></span><br><span class=\"line\">            ctx.fillRect(w, <span class=\"number\">10</span>*h, <span class=\"number\">4</span>*w, h)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">paintE</span>(<span class=\"params\">ctx</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> w = width / <span class=\"number\">6</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> h = height / <span class=\"number\">11</span></span><br><span class=\"line\">            ctx.fillStyle = <span class=\"built_in\">color</span></span><br><span class=\"line\">            ctx.fillRect(<span class=\"number\">0</span>, <span class=\"number\">6</span>*h, w, <span class=\"number\">4</span>*h)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">paintF</span>(<span class=\"params\">ctx</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> w = width / <span class=\"number\">6</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> h = height / <span class=\"number\">11</span></span><br><span class=\"line\">            ctx.fillStyle = <span class=\"built_in\">color</span></span><br><span class=\"line\">            ctx.fillRect(<span class=\"number\">0</span>, h, w, <span class=\"number\">4</span>*h)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">paintG</span>(<span class=\"params\">ctx</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> w = width / <span class=\"number\">6</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> h = height / <span class=\"number\">11</span></span><br><span class=\"line\">            ctx.fillStyle = <span class=\"built_in\">color</span></span><br><span class=\"line\">            ctx.fillRect(w, <span class=\"number\">5</span>*h, <span class=\"number\">4</span>*w, h)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/07.canvas/canvas.png\" alt=\"Image\"></p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li>QML<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-canvas.html\">Canvas</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-context2d.html\">Context2D</a></li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/07.canvas.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"使用Canvas绘图\"><a href=\"#使用Canvas绘图\" class=\"headerlink\" title=\"使用Canvas绘图\"></a>使用Canvas绘图</h1><p>Canvas定义一个绘图区域，可以使用JavaScript代码来进行绘制，可以制作自定义控件、游戏等。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">Canvas</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 绘图信号处理器，在这里面写绘图操作</span></span><br><span class=\"line\">    <span class=\"attribute\">onPaint</span>: &#123;</span><br><span class=\"line\">        <span class=\"comment\">/* 获取Canvas的Context2D，参数只支持&quot;2d&quot; */</span></span><br><span class=\"line\">        <span class=\"keyword\">var</span> ctx = getContext(<span class=\"string\">&quot;2d&quot;</span>) </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/* 然后通过ctx进行绘图 */</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>按照下图，用Canvas绘制一个数码管风格的数字显示器。  </p>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/07.canvas/design.png\" alt=\"Image\"></p>\n<p>代码如下 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">Canvas</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">120</span></span><br><span class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">220</span></span><br><span class=\"line\">        <span class=\"keyword\">property</span><span class=\"string\"> color background </span>: <span class=\"string\">&quot;white&quot;</span>  <span class=\"comment\">// 背景色</span></span><br><span class=\"line\">        <span class=\"keyword\">property</span><span class=\"string\"> color color </span>: <span class=\"string\">&quot;green&quot;</span>       <span class=\"comment\">// 前景色</span></span><br><span class=\"line\">        <span class=\"keyword\">property</span><span class=\"string\"> int number </span>: <span class=\"number\">9</span>              <span class=\"comment\">// 显示的数字</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">onPaint</span>: &#123;</span><br><span class=\"line\">            <span class=\"comment\">/* 获取Canvas的Context2D，参数只支持&quot;2d&quot; */</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> ctx = getContext(<span class=\"string\">&quot;2d&quot;</span>) </span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">/* 填满背景色 */</span></span><br><span class=\"line\">            ctx.fillStyle = background</span><br><span class=\"line\">            ctx.fillRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, width, height);</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">switch</span>(number)</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">0</span> :</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    paintD(ctx)</span><br><span class=\"line\">                    paintE(ctx)</span><br><span class=\"line\">                    paintF(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">1</span> :</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">2</span> :</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintG(ctx)</span><br><span class=\"line\">                    paintE(ctx)</span><br><span class=\"line\">                    paintD(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">3</span> :</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintG(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    paintD(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">4</span> :</span><br><span class=\"line\">                    paintF(ctx)</span><br><span class=\"line\">                    paintG(ctx)</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">5</span> :</span><br><span class=\"line\">                    paintF(ctx)</span><br><span class=\"line\">                    paintG(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    paintD(ctx)</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">6</span> :</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    paintF(ctx)</span><br><span class=\"line\">                    paintE(ctx)</span><br><span class=\"line\">                    paintD(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    paintG(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">7</span> :</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">8</span> :</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    paintD(ctx)</span><br><span class=\"line\">                    paintE(ctx)</span><br><span class=\"line\">                    paintF(ctx)</span><br><span class=\"line\">                    paintG(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">case</span> <span class=\"number\">9</span> :</span><br><span class=\"line\">                    paintA(ctx)</span><br><span class=\"line\">                    paintF(ctx)</span><br><span class=\"line\">                    paintG(ctx)</span><br><span class=\"line\">                    paintB(ctx)</span><br><span class=\"line\">                    paintC(ctx)</span><br><span class=\"line\">                    paintD(ctx)</span><br><span class=\"line\">                    <span class=\"keyword\">break</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">paintA</span>(<span class=\"params\">ctx</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> w = width / <span class=\"number\">6</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> h = height / <span class=\"number\">11</span></span><br><span class=\"line\">            ctx.fillStyle = <span class=\"built_in\">color</span></span><br><span class=\"line\">            ctx.fillRect(w, <span class=\"number\">0</span>, <span class=\"number\">4</span>*w, h) <span class=\"comment\">// x, y, width, height</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">paintB</span>(<span class=\"params\">ctx</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> w = width / <span class=\"number\">6</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> h = height / <span class=\"number\">11</span></span><br><span class=\"line\">            ctx.fillStyle = <span class=\"built_in\">color</span></span><br><span class=\"line\">            ctx.fillRect(<span class=\"number\">5</span>*w, h, w, <span class=\"number\">4</span>*h)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">paintC</span>(<span class=\"params\">ctx</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> w = width / <span class=\"number\">6</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> h = height / <span class=\"number\">11</span></span><br><span class=\"line\">            ctx.fillStyle = <span class=\"built_in\">color</span></span><br><span class=\"line\">            ctx.fillRect(<span class=\"number\">5</span>*w, <span class=\"number\">6</span>*h, w, <span class=\"number\">4</span>*h)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">paintD</span>(<span class=\"params\">ctx</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> w = width / <span class=\"number\">6</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> h = height / <span class=\"number\">11</span></span><br><span class=\"line\">            ctx.fillStyle = <span class=\"built_in\">color</span></span><br><span class=\"line\">            ctx.fillRect(w, <span class=\"number\">10</span>*h, <span class=\"number\">4</span>*w, h)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">paintE</span>(<span class=\"params\">ctx</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> w = width / <span class=\"number\">6</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> h = height / <span class=\"number\">11</span></span><br><span class=\"line\">            ctx.fillStyle = <span class=\"built_in\">color</span></span><br><span class=\"line\">            ctx.fillRect(<span class=\"number\">0</span>, <span class=\"number\">6</span>*h, w, <span class=\"number\">4</span>*h)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">paintF</span>(<span class=\"params\">ctx</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> w = width / <span class=\"number\">6</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> h = height / <span class=\"number\">11</span></span><br><span class=\"line\">            ctx.fillStyle = <span class=\"built_in\">color</span></span><br><span class=\"line\">            ctx.fillRect(<span class=\"number\">0</span>, h, w, <span class=\"number\">4</span>*h)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">paintG</span>(<span class=\"params\">ctx</span>)</span></span><br><span class=\"line\"><span class=\"function\">        </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> w = width / <span class=\"number\">6</span></span><br><span class=\"line\">            <span class=\"keyword\">var</span> h = height / <span class=\"number\">11</span></span><br><span class=\"line\">            ctx.fillStyle = <span class=\"built_in\">color</span></span><br><span class=\"line\">            ctx.fillRect(w, <span class=\"number\">5</span>*h, <span class=\"number\">4</span>*w, h)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/07.canvas/canvas.png\" alt=\"Image\"></p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li>QML<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-canvas.html\">Canvas</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-context2d.html\">Context2D</a></li>\n</ul>\n</li>\n</ul>\n"},{"title":"QML 使用Loader变更页面","date":"2025-02-10T10:51:24.000Z","_content":"\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/10.loader_and_page.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 使用Loader变更页面\n利用`Loader`加载qml文件的功能，可以方便的实现UI页面的一种变更方式\n\n```QML\nLoader {\n    function setSource(source, properties)\n}\n```\n* `source` 参数是要加载的文件名\n* `properties` 是一个键值对列表，用于修改加载的顶级元素的属性值\n\n例如 `setSource(\"demo.qml\", {\"title\" : \"sugar\", \"color\" : \"blue\"})` 表示加载 `demo.qml` ，并将 `title` 属性的值改为 `\"sugar\"` ， `color` 属性的值改为 `\"blue\"` 。\n\n下面是一个示例，实现了登录和退出的界面切换功能 :  \n\n* `mainwindow.qml`  \n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    Loader {\n        id: mainLoader\n        anchors.fill: parent\n        source: \"page1.qml\"\n    }\n\n    Connections {\n        // 信号发送者，item是Loader的属性，表示所加载对象的顶级元素\n        target: mainLoader.item \n\n        // 信号处理器\n        onLogin: function(username, password){\n            // 加载page2.qml，并设置username和password的值\n            mainLoader.setSource(\"page2.qml\",\n                        { \"username\" : username,\n                        \"password\" : password\n                        })\n        }\n    }\n\n    Connections {\n        // 信号发送者，item是Loader的属性，表示所加载对象的顶级元素\n        target: mainLoader.item \n\n        // 信号处理器\n        onLogout: function(){\n            mainLoader.setSource(\"page1.qml\")\n        }\n    }\n}\n```\n\n* `page1.qml`\n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nItem {\n    id: rootItem\n    signal login(string username, string password)\n    signal logout()\n\n    GridLayout {\n        anchors.centerIn: parent\n        columns: 2\n\n        Text {\n            Layout.fillWidth: true\n            text: qsTr(\"用户名\")\n            horizontalAlignment: Text.AlignHCenter\n            verticalAlignment: Text.AlignVCenter\n        }\n\n        TextField {\n            id: userInput\n        }\n\n        Text {\n            Layout.fillWidth: true\n            text: qsTr(\"密  码\")\n            horizontalAlignment: Text.AlignHCenter\n            verticalAlignment: Text.AlignVCenter\n        }\n\n        TextField {\n            id: passInput\n            echoMode: TextInput.Password\n        }\n\n        Button {\n            text: qsTr(\"登录\")\n            Layout.columnSpan: 2 // 占两列\n            Layout.fillWidth: true\n\n            onClicked: {\n                rootItem.login(userInput.text, passInput.text)\n            }\n        }\n    }\n}\n```\n\n* `page2.qml`  \n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nItem {\n    id: rootItem\n    signal login(string username, string password)\n    signal logout()\n\n    /* 定义两个属性用来接收参数 */\n    property string username\n    property string password\n\n    ColumnLayout {\n        anchors.centerIn: parent\n    \n        Text {\n            text: \"<h1>Welcome \" + username + \"</h1>\"\n        }\n\n        Button {\n            text: qsTr(\"退出\")\n            Layout.alignment: Qt.AlignHCenter // 布局块内水平居中\n\n            onClicked: {\n                rootItem.logout()\n            }\n        }\n\n    }\n}\n```\n\n下面是运行结果 :  \n![login](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/10.loader_and_page/login.png)  \n![welcome](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/10.loader_and_page/welcome.png)  ","source":"_posts/QML-使用Loader变更页面.md","raw":"---\ntitle: QML 使用Loader变更页面\ndate: 2025-02-10 18:51:24\ntags:\n    - Qt\n    - QML\n    - Python\n    - PySide\n---\n\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/10.loader_and_page.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 使用Loader变更页面\n利用`Loader`加载qml文件的功能，可以方便的实现UI页面的一种变更方式\n\n```QML\nLoader {\n    function setSource(source, properties)\n}\n```\n* `source` 参数是要加载的文件名\n* `properties` 是一个键值对列表，用于修改加载的顶级元素的属性值\n\n例如 `setSource(\"demo.qml\", {\"title\" : \"sugar\", \"color\" : \"blue\"})` 表示加载 `demo.qml` ，并将 `title` 属性的值改为 `\"sugar\"` ， `color` 属性的值改为 `\"blue\"` 。\n\n下面是一个示例，实现了登录和退出的界面切换功能 :  \n\n* `mainwindow.qml`  \n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    Loader {\n        id: mainLoader\n        anchors.fill: parent\n        source: \"page1.qml\"\n    }\n\n    Connections {\n        // 信号发送者，item是Loader的属性，表示所加载对象的顶级元素\n        target: mainLoader.item \n\n        // 信号处理器\n        onLogin: function(username, password){\n            // 加载page2.qml，并设置username和password的值\n            mainLoader.setSource(\"page2.qml\",\n                        { \"username\" : username,\n                        \"password\" : password\n                        })\n        }\n    }\n\n    Connections {\n        // 信号发送者，item是Loader的属性，表示所加载对象的顶级元素\n        target: mainLoader.item \n\n        // 信号处理器\n        onLogout: function(){\n            mainLoader.setSource(\"page1.qml\")\n        }\n    }\n}\n```\n\n* `page1.qml`\n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nItem {\n    id: rootItem\n    signal login(string username, string password)\n    signal logout()\n\n    GridLayout {\n        anchors.centerIn: parent\n        columns: 2\n\n        Text {\n            Layout.fillWidth: true\n            text: qsTr(\"用户名\")\n            horizontalAlignment: Text.AlignHCenter\n            verticalAlignment: Text.AlignVCenter\n        }\n\n        TextField {\n            id: userInput\n        }\n\n        Text {\n            Layout.fillWidth: true\n            text: qsTr(\"密  码\")\n            horizontalAlignment: Text.AlignHCenter\n            verticalAlignment: Text.AlignVCenter\n        }\n\n        TextField {\n            id: passInput\n            echoMode: TextInput.Password\n        }\n\n        Button {\n            text: qsTr(\"登录\")\n            Layout.columnSpan: 2 // 占两列\n            Layout.fillWidth: true\n\n            onClicked: {\n                rootItem.login(userInput.text, passInput.text)\n            }\n        }\n    }\n}\n```\n\n* `page2.qml`  \n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nItem {\n    id: rootItem\n    signal login(string username, string password)\n    signal logout()\n\n    /* 定义两个属性用来接收参数 */\n    property string username\n    property string password\n\n    ColumnLayout {\n        anchors.centerIn: parent\n    \n        Text {\n            text: \"<h1>Welcome \" + username + \"</h1>\"\n        }\n\n        Button {\n            text: qsTr(\"退出\")\n            Layout.alignment: Qt.AlignHCenter // 布局块内水平居中\n\n            onClicked: {\n                rootItem.logout()\n            }\n        }\n\n    }\n}\n```\n\n下面是运行结果 :  \n![login](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/10.loader_and_page/login.png)  \n![welcome](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/10.loader_and_page/welcome.png)  ","slug":"QML-使用Loader变更页面","published":1,"updated":"2025-02-10T10:52:06.592Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t8e0007mkin31tn4bah","content":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/10.loader_and_page.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"使用Loader变更页面\"><a href=\"#使用Loader变更页面\" class=\"headerlink\" title=\"使用Loader变更页面\"></a>使用Loader变更页面</h1><p>利用<code>Loader</code>加载qml文件的功能，可以方便的实现UI页面的一种变更方式</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">Loader</span> &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setSource</span>(<span class=\"params\">source, properties</span>)</span></span><br><span class=\"line\"><span class=\"function\">&#125;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>source</code> 参数是要加载的文件名</li>\n<li><code>properties</code> 是一个键值对列表，用于修改加载的顶级元素的属性值</li>\n</ul>\n<p>例如 <code>setSource(&quot;demo.qml&quot;, &#123;&quot;title&quot; : &quot;sugar&quot;, &quot;color&quot; : &quot;blue&quot;&#125;)</code> 表示加载 <code>demo.qml</code> ，并将 <code>title</code> 属性的值改为 <code>&quot;sugar&quot;</code> ， <code>color</code> 属性的值改为 <code>&quot;blue&quot;</code> 。</p>\n<p>下面是一个示例，实现了登录和退出的界面切换功能 :  </p>\n<ul>\n<li><code>mainwindow.qml</code></li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Loader</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> mainLoader</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">source</span>: <span class=\"string\">&quot;page1.qml&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Connections</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 信号发送者，item是Loader的属性，表示所加载对象的顶级元素</span></span><br><span class=\"line\">        <span class=\"attribute\">target</span>: mainLoader.item </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 信号处理器</span></span><br><span class=\"line\">        <span class=\"attribute\">onLogin</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">username, password</span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// 加载page2.qml，并设置username和password的值</span></span><br><span class=\"line\">            mainLoader.setSource(<span class=\"string\">&quot;page2.qml&quot;</span>,</span><br><span class=\"line\">                        &#123; <span class=\"string\">&quot;username&quot;</span> : username,</span><br><span class=\"line\">                        <span class=\"string\">&quot;password&quot;</span> : password</span><br><span class=\"line\">                        &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Connections</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 信号发送者，item是Loader的属性，表示所加载对象的顶级元素</span></span><br><span class=\"line\">        <span class=\"attribute\">target</span>: mainLoader.item </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 信号处理器</span></span><br><span class=\"line\">        <span class=\"attribute\">onLogout</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            mainLoader.setSource(<span class=\"string\">&quot;page1.qml&quot;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>page1.qml</code></li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Item</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> rootItem</span></span><br><span class=\"line\">    <span class=\"keyword\">signal</span><span class=\"string\"> login</span>(<span class=\"built_in\">string</span> username, <span class=\"built_in\">string</span> password)</span><br><span class=\"line\">    <span class=\"keyword\">signal</span><span class=\"string\"> logout</span>()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">GridLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.centerIn</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">columns</span>: <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;用户名&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">horizontalAlignment</span>: Text.AlignHCenter</span><br><span class=\"line\">            <span class=\"attribute\">verticalAlignment</span>: Text.AlignVCenter</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">TextField</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> userInput</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;密  码&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">horizontalAlignment</span>: Text.AlignHCenter</span><br><span class=\"line\">            <span class=\"attribute\">verticalAlignment</span>: Text.AlignVCenter</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">TextField</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> passInput</span></span><br><span class=\"line\">            <span class=\"attribute\">echoMode</span>: TextInput.Password</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;登录&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">Layout.columnSpan</span>: <span class=\"number\">2</span> <span class=\"comment\">// 占两列</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"attribute\">onClicked</span>: &#123;</span><br><span class=\"line\">                rootItem.login(userInput.text, passInput.text)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>page2.qml</code></li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Item</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> rootItem</span></span><br><span class=\"line\">    <span class=\"keyword\">signal</span><span class=\"string\"> login</span>(<span class=\"built_in\">string</span> username, <span class=\"built_in\">string</span> password)</span><br><span class=\"line\">    <span class=\"keyword\">signal</span><span class=\"string\"> logout</span>()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* 定义两个属性用来接收参数 */</span></span><br><span class=\"line\">    <span class=\"keyword\">property</span><span class=\"string\"> string username</span></span><br><span class=\"line\">    <span class=\"keyword\">property</span><span class=\"string\"> string password</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">ColumnLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.centerIn</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">    </span><br><span class=\"line\">        <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">text</span>: <span class=\"string\">&quot;&lt;h1&gt;Welcome &quot;</span> + username + <span class=\"string\">&quot;&lt;/h1&gt;&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;退出&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">Layout.alignment</span>: Qt.AlignHCenter <span class=\"comment\">// 布局块内水平居中</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"attribute\">onClicked</span>: &#123;</span><br><span class=\"line\">                rootItem.logout()</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>下面是运行结果 :<br><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/10.loader_and_page/login.png\" alt=\"login\"><br><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/10.loader_and_page/welcome.png\" alt=\"welcome\">  </p>\n","excerpt":"","more":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/10.loader_and_page.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"使用Loader变更页面\"><a href=\"#使用Loader变更页面\" class=\"headerlink\" title=\"使用Loader变更页面\"></a>使用Loader变更页面</h1><p>利用<code>Loader</code>加载qml文件的功能，可以方便的实现UI页面的一种变更方式</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">Loader</span> &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setSource</span>(<span class=\"params\">source, properties</span>)</span></span><br><span class=\"line\"><span class=\"function\">&#125;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>source</code> 参数是要加载的文件名</li>\n<li><code>properties</code> 是一个键值对列表，用于修改加载的顶级元素的属性值</li>\n</ul>\n<p>例如 <code>setSource(&quot;demo.qml&quot;, &#123;&quot;title&quot; : &quot;sugar&quot;, &quot;color&quot; : &quot;blue&quot;&#125;)</code> 表示加载 <code>demo.qml</code> ，并将 <code>title</code> 属性的值改为 <code>&quot;sugar&quot;</code> ， <code>color</code> 属性的值改为 <code>&quot;blue&quot;</code> 。</p>\n<p>下面是一个示例，实现了登录和退出的界面切换功能 :  </p>\n<ul>\n<li><code>mainwindow.qml</code></li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Loader</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> mainLoader</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">source</span>: <span class=\"string\">&quot;page1.qml&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Connections</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 信号发送者，item是Loader的属性，表示所加载对象的顶级元素</span></span><br><span class=\"line\">        <span class=\"attribute\">target</span>: mainLoader.item </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 信号处理器</span></span><br><span class=\"line\">        <span class=\"attribute\">onLogin</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">username, password</span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// 加载page2.qml，并设置username和password的值</span></span><br><span class=\"line\">            mainLoader.setSource(<span class=\"string\">&quot;page2.qml&quot;</span>,</span><br><span class=\"line\">                        &#123; <span class=\"string\">&quot;username&quot;</span> : username,</span><br><span class=\"line\">                        <span class=\"string\">&quot;password&quot;</span> : password</span><br><span class=\"line\">                        &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Connections</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 信号发送者，item是Loader的属性，表示所加载对象的顶级元素</span></span><br><span class=\"line\">        <span class=\"attribute\">target</span>: mainLoader.item </span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 信号处理器</span></span><br><span class=\"line\">        <span class=\"attribute\">onLogout</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            mainLoader.setSource(<span class=\"string\">&quot;page1.qml&quot;</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>page1.qml</code></li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Item</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> rootItem</span></span><br><span class=\"line\">    <span class=\"keyword\">signal</span><span class=\"string\"> login</span>(<span class=\"built_in\">string</span> username, <span class=\"built_in\">string</span> password)</span><br><span class=\"line\">    <span class=\"keyword\">signal</span><span class=\"string\"> logout</span>()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">GridLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.centerIn</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">columns</span>: <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;用户名&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">horizontalAlignment</span>: Text.AlignHCenter</span><br><span class=\"line\">            <span class=\"attribute\">verticalAlignment</span>: Text.AlignVCenter</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">TextField</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> userInput</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;密  码&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">horizontalAlignment</span>: Text.AlignHCenter</span><br><span class=\"line\">            <span class=\"attribute\">verticalAlignment</span>: Text.AlignVCenter</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">TextField</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> passInput</span></span><br><span class=\"line\">            <span class=\"attribute\">echoMode</span>: TextInput.Password</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;登录&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">Layout.columnSpan</span>: <span class=\"number\">2</span> <span class=\"comment\">// 占两列</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"attribute\">onClicked</span>: &#123;</span><br><span class=\"line\">                rootItem.login(userInput.text, passInput.text)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>page2.qml</code></li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Item</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> rootItem</span></span><br><span class=\"line\">    <span class=\"keyword\">signal</span><span class=\"string\"> login</span>(<span class=\"built_in\">string</span> username, <span class=\"built_in\">string</span> password)</span><br><span class=\"line\">    <span class=\"keyword\">signal</span><span class=\"string\"> logout</span>()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/* 定义两个属性用来接收参数 */</span></span><br><span class=\"line\">    <span class=\"keyword\">property</span><span class=\"string\"> string username</span></span><br><span class=\"line\">    <span class=\"keyword\">property</span><span class=\"string\"> string password</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">ColumnLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.centerIn</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">    </span><br><span class=\"line\">        <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">text</span>: <span class=\"string\">&quot;&lt;h1&gt;Welcome &quot;</span> + username + <span class=\"string\">&quot;&lt;/h1&gt;&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;退出&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">Layout.alignment</span>: Qt.AlignHCenter <span class=\"comment\">// 布局块内水平居中</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"attribute\">onClicked</span>: &#123;</span><br><span class=\"line\">                rootItem.logout()</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>下面是运行结果 :<br><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/10.loader_and_page/login.png\" alt=\"login\"><br><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/10.loader_and_page/welcome.png\" alt=\"welcome\">  </p>\n"},{"title":"QML 创建和加载自定义组件","date":"2025-02-10T10:50:26.000Z","_content":"\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/09.component_and_loader.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 创建和加载自定义组件\n使用`Component`可以创建自定义的组件，它的顶层元素只能有一个，并且不能有`id`以外的属性 :  \n\n```QML\nComponent {\n    id: componentId      // 组件的id\n\n    // 只能由一个顶层元素，在顶层元素内可以包含任意元素\n    Item {\n\n    }\n}\n```\n\n使用`Loader`可以加载qml文件或者组件 :  \n```QML\nLoader {\n    source: \"xxx.qml\"                 // qml文件\n    /* 或 */\n    sourceComponent: componentId      // 组件的id\n}\n```\n\n下面是一个示例，通过`Component`将一组相关的元素作为一个组件，再通过`Loader`多次加载 :  \n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 创建组件\n    Component {\n        id: parameter // 组件ID\n\n        // 顶层元素\n        RowLayout {\n\n            TextField {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n\n                placeholderText: qsTr(\"属性名\")\n            }\n\n            ComboBox {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n\n                textRole: \"key\"\n                model: ListModel {\n                    ListElement { key: \"int\"; value: 1 }\n                    ListElement { key: \"string\"; value: 2 }\n                    ListElement { key: \"bool\"; value: 3 }\n                }\n            }\n\n            TextField {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n\n                placeholderText: qsTr(\"值域下界\")\n            }\n\n            TextField {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n\n                placeholderText: qsTr(\"值域上界\")\n            }\n        }\n    }\n\n    Column {\n        anchors.fill: parent\n        spacing: 5\n\n        // 加载组件\n        Loader {\n            id: param1\n            sourceComponent: parameter      // 组件的id\n            width: parent.width\n        }\n\n        Loader {\n            id: param2\n            sourceComponent: parameter      // 组件的id\n            width: parent.width\n        }\n\n        Loader {\n            id: param3\n            sourceComponent: parameter      // 组件的id\n            width: parent.width\n        }\n    }\n}\n```\n\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/09.component_and_loader/parameters.png)\n\n## 参考 :  \n* QML\n  * [Component](https://doc.qt.io/qt-5/qml-qtqml-component.html)\n  * [Loader](https://doc.qt.io/qt-5/qml-qtquick-loader.html)\n","source":"_posts/QML-创建和加载自定义组件.md","raw":"---\ntitle: QML 创建和加载自定义组件\ndate: 2025-02-10 18:50:26\ntags:\n    - Qt\n    - QML\n    - Python\n    - PySide\n---\n\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/09.component_and_loader.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 创建和加载自定义组件\n使用`Component`可以创建自定义的组件，它的顶层元素只能有一个，并且不能有`id`以外的属性 :  \n\n```QML\nComponent {\n    id: componentId      // 组件的id\n\n    // 只能由一个顶层元素，在顶层元素内可以包含任意元素\n    Item {\n\n    }\n}\n```\n\n使用`Loader`可以加载qml文件或者组件 :  \n```QML\nLoader {\n    source: \"xxx.qml\"                 // qml文件\n    /* 或 */\n    sourceComponent: componentId      // 组件的id\n}\n```\n\n下面是一个示例，通过`Component`将一组相关的元素作为一个组件，再通过`Loader`多次加载 :  \n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 创建组件\n    Component {\n        id: parameter // 组件ID\n\n        // 顶层元素\n        RowLayout {\n\n            TextField {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n\n                placeholderText: qsTr(\"属性名\")\n            }\n\n            ComboBox {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n\n                textRole: \"key\"\n                model: ListModel {\n                    ListElement { key: \"int\"; value: 1 }\n                    ListElement { key: \"string\"; value: 2 }\n                    ListElement { key: \"bool\"; value: 3 }\n                }\n            }\n\n            TextField {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n\n                placeholderText: qsTr(\"值域下界\")\n            }\n\n            TextField {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n\n                placeholderText: qsTr(\"值域上界\")\n            }\n        }\n    }\n\n    Column {\n        anchors.fill: parent\n        spacing: 5\n\n        // 加载组件\n        Loader {\n            id: param1\n            sourceComponent: parameter      // 组件的id\n            width: parent.width\n        }\n\n        Loader {\n            id: param2\n            sourceComponent: parameter      // 组件的id\n            width: parent.width\n        }\n\n        Loader {\n            id: param3\n            sourceComponent: parameter      // 组件的id\n            width: parent.width\n        }\n    }\n}\n```\n\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/09.component_and_loader/parameters.png)\n\n## 参考 :  \n* QML\n  * [Component](https://doc.qt.io/qt-5/qml-qtqml-component.html)\n  * [Loader](https://doc.qt.io/qt-5/qml-qtquick-loader.html)\n","slug":"QML-创建和加载自定义组件","published":1,"updated":"2025-02-10T10:50:55.000Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t8f0008mkin93sjd545","content":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/09.component_and_loader.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"创建和加载自定义组件\"><a href=\"#创建和加载自定义组件\" class=\"headerlink\" title=\"创建和加载自定义组件\"></a>创建和加载自定义组件</h1><p>使用<code>Component</code>可以创建自定义的组件，它的顶层元素只能有一个，并且不能有<code>id</code>以外的属性 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">Component</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> componentId</span>      <span class=\"comment\">// 组件的id</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 只能由一个顶层元素，在顶层元素内可以包含任意元素</span></span><br><span class=\"line\">    <span class=\"title\">Item</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>使用<code>Loader</code>可以加载qml文件或者组件 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">Loader</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">source</span>: <span class=\"string\">&quot;xxx.qml&quot;</span>                 <span class=\"comment\">// qml文件</span></span><br><span class=\"line\">    <span class=\"comment\">/* 或 */</span></span><br><span class=\"line\">    <span class=\"attribute\">sourceComponent</span>: componentId      <span class=\"comment\">// 组件的id</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>下面是一个示例，通过<code>Component</code>将一组相关的元素作为一个组件，再通过<code>Loader</code>多次加载 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 创建组件</span></span><br><span class=\"line\">    <span class=\"title\">Component</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> parameter</span> <span class=\"comment\">// 组件ID</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 顶层元素</span></span><br><span class=\"line\">        <span class=\"title\">RowLayout</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">TextField</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">placeholderText</span>: qsTr(<span class=\"string\">&quot;属性名&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ComboBox</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">textRole</span>: <span class=\"string\">&quot;key&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">model</span>: <span class=\"title\">ListModel</span> &#123;</span><br><span class=\"line\">                    <span class=\"title\">ListElement</span> &#123; <span class=\"attribute\">key</span>: <span class=\"string\">&quot;int&quot;</span>; <span class=\"attribute\">value</span>: <span class=\"number\">1</span> &#125;</span><br><span class=\"line\">                    <span class=\"title\">ListElement</span> &#123; <span class=\"attribute\">key</span>: <span class=\"string\">&quot;string&quot;</span>; <span class=\"attribute\">value</span>: <span class=\"number\">2</span> &#125;</span><br><span class=\"line\">                    <span class=\"title\">ListElement</span> &#123; <span class=\"attribute\">key</span>: <span class=\"string\">&quot;bool&quot;</span>; <span class=\"attribute\">value</span>: <span class=\"number\">3</span> &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">TextField</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">placeholderText</span>: qsTr(<span class=\"string\">&quot;值域下界&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">TextField</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">placeholderText</span>: qsTr(<span class=\"string\">&quot;值域上界&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Column</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">spacing</span>: <span class=\"number\">5</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 加载组件</span></span><br><span class=\"line\">        <span class=\"title\">Loader</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> param1</span></span><br><span class=\"line\">            <span class=\"attribute\">sourceComponent</span>: parameter      <span class=\"comment\">// 组件的id</span></span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"built_in\">parent</span>.width</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Loader</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> param2</span></span><br><span class=\"line\">            <span class=\"attribute\">sourceComponent</span>: parameter      <span class=\"comment\">// 组件的id</span></span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"built_in\">parent</span>.width</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Loader</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> param3</span></span><br><span class=\"line\">            <span class=\"attribute\">sourceComponent</span>: parameter      <span class=\"comment\">// 组件的id</span></span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"built_in\">parent</span>.width</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/09.component_and_loader/parameters.png\" alt=\"Image\"></p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li>QML<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtqml-component.html\">Component</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-loader.html\">Loader</a></li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/09.component_and_loader.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"创建和加载自定义组件\"><a href=\"#创建和加载自定义组件\" class=\"headerlink\" title=\"创建和加载自定义组件\"></a>创建和加载自定义组件</h1><p>使用<code>Component</code>可以创建自定义的组件，它的顶层元素只能有一个，并且不能有<code>id</code>以外的属性 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">Component</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> componentId</span>      <span class=\"comment\">// 组件的id</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 只能由一个顶层元素，在顶层元素内可以包含任意元素</span></span><br><span class=\"line\">    <span class=\"title\">Item</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>使用<code>Loader</code>可以加载qml文件或者组件 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">Loader</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">source</span>: <span class=\"string\">&quot;xxx.qml&quot;</span>                 <span class=\"comment\">// qml文件</span></span><br><span class=\"line\">    <span class=\"comment\">/* 或 */</span></span><br><span class=\"line\">    <span class=\"attribute\">sourceComponent</span>: componentId      <span class=\"comment\">// 组件的id</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>下面是一个示例，通过<code>Component</code>将一组相关的元素作为一个组件，再通过<code>Loader</code>多次加载 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 创建组件</span></span><br><span class=\"line\">    <span class=\"title\">Component</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> parameter</span> <span class=\"comment\">// 组件ID</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 顶层元素</span></span><br><span class=\"line\">        <span class=\"title\">RowLayout</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">TextField</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">placeholderText</span>: qsTr(<span class=\"string\">&quot;属性名&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">ComboBox</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">textRole</span>: <span class=\"string\">&quot;key&quot;</span></span><br><span class=\"line\">                <span class=\"attribute\">model</span>: <span class=\"title\">ListModel</span> &#123;</span><br><span class=\"line\">                    <span class=\"title\">ListElement</span> &#123; <span class=\"attribute\">key</span>: <span class=\"string\">&quot;int&quot;</span>; <span class=\"attribute\">value</span>: <span class=\"number\">1</span> &#125;</span><br><span class=\"line\">                    <span class=\"title\">ListElement</span> &#123; <span class=\"attribute\">key</span>: <span class=\"string\">&quot;string&quot;</span>; <span class=\"attribute\">value</span>: <span class=\"number\">2</span> &#125;</span><br><span class=\"line\">                    <span class=\"title\">ListElement</span> &#123; <span class=\"attribute\">key</span>: <span class=\"string\">&quot;bool&quot;</span>; <span class=\"attribute\">value</span>: <span class=\"number\">3</span> &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">TextField</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">placeholderText</span>: qsTr(<span class=\"string\">&quot;值域下界&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">TextField</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"attribute\">placeholderText</span>: qsTr(<span class=\"string\">&quot;值域上界&quot;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Column</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">spacing</span>: <span class=\"number\">5</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 加载组件</span></span><br><span class=\"line\">        <span class=\"title\">Loader</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> param1</span></span><br><span class=\"line\">            <span class=\"attribute\">sourceComponent</span>: parameter      <span class=\"comment\">// 组件的id</span></span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"built_in\">parent</span>.width</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Loader</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> param2</span></span><br><span class=\"line\">            <span class=\"attribute\">sourceComponent</span>: parameter      <span class=\"comment\">// 组件的id</span></span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"built_in\">parent</span>.width</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Loader</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> param3</span></span><br><span class=\"line\">            <span class=\"attribute\">sourceComponent</span>: parameter      <span class=\"comment\">// 组件的id</span></span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"built_in\">parent</span>.width</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/09.component_and_loader/parameters.png\" alt=\"Image\"></p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li>QML<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtqml-component.html\">Component</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-loader.html\">Loader</a></li>\n</ul>\n</li>\n</ul>\n"},{"title":"QML 创建自定义的类","date":"2025-02-10T10:49:08.000Z","_content":"\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/08.custom_class.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 创建自定义的类\n在相同目录下创建单独的qml文件，即可将该文件的文件名作为类名来创建对象，不需要使用`import`导入。  \n\n例如，将[使用Canvas绘图](./note/qml/07.canvas.md)中设计的数码管风格数字显示器的代码放在单独的文件中。将文件命名为`Tube.qml`，即可用`Tube`作为类名创建对象。  \n\n下面代码使用`Tube`显示了多个数字 :  \n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    Row {\n        spacing: 20 // Row中元素之间的间隔\n\n        Tube {\n            color: \"red\"\n            number: 2\n        }\n\n        Tube {\n            color: \"orange\"\n            number: 0\n        }\n\n        Tube {\n            color: \"yellow\"\n            number: 1\n        }\n\n        Tube {\n            color: \"green\"\n            number: 9\n        }\n    }\n}\n```\n\n![2019](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/08.custom_class/2019.png)","source":"_posts/QML-创建自定义的类.md","raw":"---\ntitle: QML 创建自定义的类\ndate: 2025-02-10 18:49:08\ntags:\n    - Qt\n    - QML\n    - Python\n    - PySide\n---\n\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/08.custom_class.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 创建自定义的类\n在相同目录下创建单独的qml文件，即可将该文件的文件名作为类名来创建对象，不需要使用`import`导入。  \n\n例如，将[使用Canvas绘图](./note/qml/07.canvas.md)中设计的数码管风格数字显示器的代码放在单独的文件中。将文件命名为`Tube.qml`，即可用`Tube`作为类名创建对象。  \n\n下面代码使用`Tube`显示了多个数字 :  \n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    Row {\n        spacing: 20 // Row中元素之间的间隔\n\n        Tube {\n            color: \"red\"\n            number: 2\n        }\n\n        Tube {\n            color: \"orange\"\n            number: 0\n        }\n\n        Tube {\n            color: \"yellow\"\n            number: 1\n        }\n\n        Tube {\n            color: \"green\"\n            number: 9\n        }\n    }\n}\n```\n\n![2019](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/08.custom_class/2019.png)","slug":"QML-创建自定义的类","published":1,"updated":"2025-02-10T10:49:41.212Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t8h000amkinfvtfes05","content":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/08.custom_class.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"创建自定义的类\"><a href=\"#创建自定义的类\" class=\"headerlink\" title=\"创建自定义的类\"></a>创建自定义的类</h1><p>在相同目录下创建单独的qml文件，即可将该文件的文件名作为类名来创建对象，不需要使用<code>import</code>导入。  </p>\n<p>例如，将<a href=\"./note/qml/07.canvas.md\">使用Canvas绘图</a>中设计的数码管风格数字显示器的代码放在单独的文件中。将文件命名为<code>Tube.qml</code>，即可用<code>Tube</code>作为类名创建对象。  </p>\n<p>下面代码使用<code>Tube</code>显示了多个数字 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Row</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">spacing</span>: <span class=\"number\">20</span> <span class=\"comment\">// Row中元素之间的间隔</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Tube</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">color</span>: <span class=\"string\">&quot;red&quot;</span></span><br><span class=\"line\">            <span class=\"attribute\">number</span>: <span class=\"number\">2</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Tube</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">color</span>: <span class=\"string\">&quot;orange&quot;</span></span><br><span class=\"line\">            <span class=\"attribute\">number</span>: <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Tube</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">color</span>: <span class=\"string\">&quot;yellow&quot;</span></span><br><span class=\"line\">            <span class=\"attribute\">number</span>: <span class=\"number\">1</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Tube</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">color</span>: <span class=\"string\">&quot;green&quot;</span></span><br><span class=\"line\">            <span class=\"attribute\">number</span>: <span class=\"number\">9</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/08.custom_class/2019.png\" alt=\"2019\"></p>\n","excerpt":"","more":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/08.custom_class.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"创建自定义的类\"><a href=\"#创建自定义的类\" class=\"headerlink\" title=\"创建自定义的类\"></a>创建自定义的类</h1><p>在相同目录下创建单独的qml文件，即可将该文件的文件名作为类名来创建对象，不需要使用<code>import</code>导入。  </p>\n<p>例如，将<a href=\"./note/qml/07.canvas.md\">使用Canvas绘图</a>中设计的数码管风格数字显示器的代码放在单独的文件中。将文件命名为<code>Tube.qml</code>，即可用<code>Tube</code>作为类名创建对象。  </p>\n<p>下面代码使用<code>Tube</code>显示了多个数字 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Row</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">spacing</span>: <span class=\"number\">20</span> <span class=\"comment\">// Row中元素之间的间隔</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Tube</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">color</span>: <span class=\"string\">&quot;red&quot;</span></span><br><span class=\"line\">            <span class=\"attribute\">number</span>: <span class=\"number\">2</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Tube</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">color</span>: <span class=\"string\">&quot;orange&quot;</span></span><br><span class=\"line\">            <span class=\"attribute\">number</span>: <span class=\"number\">0</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Tube</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">color</span>: <span class=\"string\">&quot;yellow&quot;</span></span><br><span class=\"line\">            <span class=\"attribute\">number</span>: <span class=\"number\">1</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Tube</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">color</span>: <span class=\"string\">&quot;green&quot;</span></span><br><span class=\"line\">            <span class=\"attribute\">number</span>: <span class=\"number\">9</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/08.custom_class/2019.png\" alt=\"2019\"></p>\n"},{"title":"QML 定义属性和方法","date":"2025-02-10T10:41:15.000Z","_content":"\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/03.property_and_method.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 定义属性和方法\n在使用QML的类创建元素对象时，已经获得了类的属性和方法。使用`property`关键字和`function`关键字可以在对象中创建自定义的属性和方法。\n\n## 定义属性\n```QML\nproperty type name : value\n```\n它只支持以下类型，对于复杂的数据，应当交给C++或Python处理 :  \n\n| QML type | 对应的C++类型  | 兼容的Python类型 |  默认值    |\n| :-:      | :-:           | :-:             | :-:        |\n| bool     | bool          | bool            | false      |\n| int      | int           | int             | 0          |\n| double   | double        | float           | 0.0        |\n| real     | double        | float           | 0.0        |\n| string   | QString       | str             | \"\"         |\n| url      | QUrl          | str             | \"\"         |\n| color    | QColor        | QColor          | 0x000000   |\n| date     | QDateTime     | QDateTime       | -          |\n| variant  | QVariant      | QVariant        | -          |\n* QML中`url`类型的变量传给Python时可以用`str`接收，但是不能用`QUrl`接收。\n\n下面代码每次点击按钮，Text显示的值就会增加1。\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    ColumnLayout {\n        anchors.fill: parent\n\n        Text {\n            // 定义一个整数类型的属性，名为number，值为0\n            property int number : 0\n            // 将显示的内容设为number\n            text: \"clicked : \" + number\n\n            id: text\n            Layout.fillWidth: true\n            Layout.preferredHeight: 300\n            \n            font.pixelSize: 72  // 字体大小\n            horizontalAlignment: Text.AlignHCenter // 水平居中\n            verticalAlignment: Text.AlignVCenter   // 竖直居中\n        }\n\n        Button {\n            width: 640\n            text: qsTr(\"BUTTON\")\n            Layout.fillWidth: true\n            Layout.fillHeight: true\n            onClicked : {\n                // 点击按钮时令text的number属性加一\n                text.number += 1\n            }\n        }\n    }\n}\n```\n\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/03.property_and_method/property.png)\n\n## 定义方法\n方法的定义方式和JavaScript一样，参数为动态类型，不能像`signal`一样支持静态类型检测。\n```QML\nfunction name(paramaters list){\n\n}\n```\n\n下面的代码为`text`创建了一个`add`的方法，调用这个方法能使`text.number`的值增加。运行效果和上面一样，每次点击按钮，显示的值加一。\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    ColumnLayout {\n        anchors.fill: parent\n\n        Text {\n            // 定义一个整数类型的属性，名为number，值为0\n            property int number : 0\n            // 将显示的内容设为number\n            text: \"clicked : \" + number\n\n            id: text\n            Layout.fillWidth: true\n            Layout.preferredHeight: 300\n            \n            font.pixelSize: 72  // 字体大小\n            horizontalAlignment: Text.AlignHCenter // 水平居中\n            verticalAlignment: Text.AlignVCenter   // 竖直居中\n\n            // 定义一个方法，调用这个方法可以使number的值加n\n            function add(n)\n            {\n                number += n\n            }\n        }\n\n        Button {\n            width: 640\n            text: qsTr(\"BUTTON\")\n            Layout.fillWidth: true\n            Layout.fillHeight: true\n            onClicked : {\n                // 调用text的add方法使显示的值加一\n                text.add(1)\n            }\n        }\n    }\n}\n```\n\n## 属性更改通知\n元素中任意属性的值发生变化时，会自动发送属性更改通知的信号，若变化的属性名为`properyName`，则对应的信号处理器则名为`onPropertyNameChanged`。\n\n## 参考 :  \n* QML\n  * [Text](https://doc.qt.io/qt-5/qml-qtquick-text.html)\n  * [property](https://doc.qt.io/qt-5/qtqml-syntax-objectattributes.html#property-attributes)","source":"_posts/QML-定义属性和方法.md","raw":"---\ntitle: QML 定义属性和方法\ndate: 2025-02-10 18:41:15\ntags:\n    - Qt\n    - QML\n    - Python\n    - PySide\n---\n\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/03.property_and_method.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 定义属性和方法\n在使用QML的类创建元素对象时，已经获得了类的属性和方法。使用`property`关键字和`function`关键字可以在对象中创建自定义的属性和方法。\n\n## 定义属性\n```QML\nproperty type name : value\n```\n它只支持以下类型，对于复杂的数据，应当交给C++或Python处理 :  \n\n| QML type | 对应的C++类型  | 兼容的Python类型 |  默认值    |\n| :-:      | :-:           | :-:             | :-:        |\n| bool     | bool          | bool            | false      |\n| int      | int           | int             | 0          |\n| double   | double        | float           | 0.0        |\n| real     | double        | float           | 0.0        |\n| string   | QString       | str             | \"\"         |\n| url      | QUrl          | str             | \"\"         |\n| color    | QColor        | QColor          | 0x000000   |\n| date     | QDateTime     | QDateTime       | -          |\n| variant  | QVariant      | QVariant        | -          |\n* QML中`url`类型的变量传给Python时可以用`str`接收，但是不能用`QUrl`接收。\n\n下面代码每次点击按钮，Text显示的值就会增加1。\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    ColumnLayout {\n        anchors.fill: parent\n\n        Text {\n            // 定义一个整数类型的属性，名为number，值为0\n            property int number : 0\n            // 将显示的内容设为number\n            text: \"clicked : \" + number\n\n            id: text\n            Layout.fillWidth: true\n            Layout.preferredHeight: 300\n            \n            font.pixelSize: 72  // 字体大小\n            horizontalAlignment: Text.AlignHCenter // 水平居中\n            verticalAlignment: Text.AlignVCenter   // 竖直居中\n        }\n\n        Button {\n            width: 640\n            text: qsTr(\"BUTTON\")\n            Layout.fillWidth: true\n            Layout.fillHeight: true\n            onClicked : {\n                // 点击按钮时令text的number属性加一\n                text.number += 1\n            }\n        }\n    }\n}\n```\n\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/03.property_and_method/property.png)\n\n## 定义方法\n方法的定义方式和JavaScript一样，参数为动态类型，不能像`signal`一样支持静态类型检测。\n```QML\nfunction name(paramaters list){\n\n}\n```\n\n下面的代码为`text`创建了一个`add`的方法，调用这个方法能使`text.number`的值增加。运行效果和上面一样，每次点击按钮，显示的值加一。\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    ColumnLayout {\n        anchors.fill: parent\n\n        Text {\n            // 定义一个整数类型的属性，名为number，值为0\n            property int number : 0\n            // 将显示的内容设为number\n            text: \"clicked : \" + number\n\n            id: text\n            Layout.fillWidth: true\n            Layout.preferredHeight: 300\n            \n            font.pixelSize: 72  // 字体大小\n            horizontalAlignment: Text.AlignHCenter // 水平居中\n            verticalAlignment: Text.AlignVCenter   // 竖直居中\n\n            // 定义一个方法，调用这个方法可以使number的值加n\n            function add(n)\n            {\n                number += n\n            }\n        }\n\n        Button {\n            width: 640\n            text: qsTr(\"BUTTON\")\n            Layout.fillWidth: true\n            Layout.fillHeight: true\n            onClicked : {\n                // 调用text的add方法使显示的值加一\n                text.add(1)\n            }\n        }\n    }\n}\n```\n\n## 属性更改通知\n元素中任意属性的值发生变化时，会自动发送属性更改通知的信号，若变化的属性名为`properyName`，则对应的信号处理器则名为`onPropertyNameChanged`。\n\n## 参考 :  \n* QML\n  * [Text](https://doc.qt.io/qt-5/qml-qtquick-text.html)\n  * [property](https://doc.qt.io/qt-5/qtqml-syntax-objectattributes.html#property-attributes)","slug":"QML-定义属性和方法","published":1,"updated":"2025-02-10T10:42:13.393Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t8i000cmkina4cwbxde","content":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/03.property_and_method.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"定义属性和方法\"><a href=\"#定义属性和方法\" class=\"headerlink\" title=\"定义属性和方法\"></a>定义属性和方法</h1><p>在使用QML的类创建元素对象时，已经获得了类的属性和方法。使用<code>property</code>关键字和<code>function</code>关键字可以在对象中创建自定义的属性和方法。</p>\n<h2 id=\"定义属性\"><a href=\"#定义属性\" class=\"headerlink\" title=\"定义属性\"></a>定义属性</h2><figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">property</span><span class=\"string\"> type name </span>: value</span><br></pre></td></tr></table></figure>\n<p>它只支持以下类型，对于复杂的数据，应当交给C++或Python处理 :  </p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">QML type</th>\n<th align=\"center\">对应的C++类型</th>\n<th align=\"center\">兼容的Python类型</th>\n<th align=\"center\">默认值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">bool</td>\n<td align=\"center\">bool</td>\n<td align=\"center\">bool</td>\n<td align=\"center\">false</td>\n</tr>\n<tr>\n<td align=\"center\">int</td>\n<td align=\"center\">int</td>\n<td align=\"center\">int</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">double</td>\n<td align=\"center\">double</td>\n<td align=\"center\">float</td>\n<td align=\"center\">0.0</td>\n</tr>\n<tr>\n<td align=\"center\">real</td>\n<td align=\"center\">double</td>\n<td align=\"center\">float</td>\n<td align=\"center\">0.0</td>\n</tr>\n<tr>\n<td align=\"center\">string</td>\n<td align=\"center\">QString</td>\n<td align=\"center\">str</td>\n<td align=\"center\">“”</td>\n</tr>\n<tr>\n<td align=\"center\">url</td>\n<td align=\"center\">QUrl</td>\n<td align=\"center\">str</td>\n<td align=\"center\">“”</td>\n</tr>\n<tr>\n<td align=\"center\">color</td>\n<td align=\"center\">QColor</td>\n<td align=\"center\">QColor</td>\n<td align=\"center\">0x000000</td>\n</tr>\n<tr>\n<td align=\"center\">date</td>\n<td align=\"center\">QDateTime</td>\n<td align=\"center\">QDateTime</td>\n<td align=\"center\">-</td>\n</tr>\n<tr>\n<td align=\"center\">variant</td>\n<td align=\"center\">QVariant</td>\n<td align=\"center\">QVariant</td>\n<td align=\"center\">-</td>\n</tr>\n</tbody></table>\n<ul>\n<li>QML中<code>url</code>类型的变量传给Python时可以用<code>str</code>接收，但是不能用<code>QUrl</code>接收。</li>\n</ul>\n<p>下面代码每次点击按钮，Text显示的值就会增加1。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">ColumnLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 定义一个整数类型的属性，名为number，值为0</span></span><br><span class=\"line\">            <span class=\"keyword\">property</span><span class=\"string\"> int number </span>: <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"comment\">// 将显示的内容设为number</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: <span class=\"string\">&quot;clicked : &quot;</span> + number</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> text</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.preferredHeight</span>: <span class=\"number\">300</span></span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"attribute\">font.pixelSize</span>: <span class=\"number\">72</span>  <span class=\"comment\">// 字体大小</span></span><br><span class=\"line\">            <span class=\"attribute\">horizontalAlignment</span>: Text.AlignHCenter <span class=\"comment\">// 水平居中</span></span><br><span class=\"line\">            <span class=\"attribute\">verticalAlignment</span>: Text.AlignVCenter   <span class=\"comment\">// 竖直居中</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;BUTTON&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">onClicked</span> : &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 点击按钮时令text的number属性加一</span></span><br><span class=\"line\">                text.number += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/03.property_and_method/property.png\" alt=\"Image\"></p>\n<h2 id=\"定义方法\"><a href=\"#定义方法\" class=\"headerlink\" title=\"定义方法\"></a>定义方法</h2><p>方法的定义方式和JavaScript一样，参数为动态类型，不能像<code>signal</code>一样支持静态类型检测。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">name</span>(<span class=\"params\">paramaters list</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>下面的代码为<code>text</code>创建了一个<code>add</code>的方法，调用这个方法能使<code>text.number</code>的值增加。运行效果和上面一样，每次点击按钮，显示的值加一。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">ColumnLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 定义一个整数类型的属性，名为number，值为0</span></span><br><span class=\"line\">            <span class=\"keyword\">property</span><span class=\"string\"> int number </span>: <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"comment\">// 将显示的内容设为number</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: <span class=\"string\">&quot;clicked : &quot;</span> + number</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> text</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.preferredHeight</span>: <span class=\"number\">300</span></span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"attribute\">font.pixelSize</span>: <span class=\"number\">72</span>  <span class=\"comment\">// 字体大小</span></span><br><span class=\"line\">            <span class=\"attribute\">horizontalAlignment</span>: Text.AlignHCenter <span class=\"comment\">// 水平居中</span></span><br><span class=\"line\">            <span class=\"attribute\">verticalAlignment</span>: Text.AlignVCenter   <span class=\"comment\">// 竖直居中</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 定义一个方法，调用这个方法可以使number的值加n</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">n</span>)</span></span><br><span class=\"line\"><span class=\"function\">            </span>&#123;</span><br><span class=\"line\">                number += n</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;BUTTON&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">onClicked</span> : &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 调用text的add方法使显示的值加一</span></span><br><span class=\"line\">                text.add(<span class=\"number\">1</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"属性更改通知\"><a href=\"#属性更改通知\" class=\"headerlink\" title=\"属性更改通知\"></a>属性更改通知</h2><p>元素中任意属性的值发生变化时，会自动发送属性更改通知的信号，若变化的属性名为<code>properyName</code>，则对应的信号处理器则名为<code>onPropertyNameChanged</code>。</p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li>QML<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-text.html\">Text</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qtqml-syntax-objectattributes.html#property-attributes\">property</a></li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/03.property_and_method.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"定义属性和方法\"><a href=\"#定义属性和方法\" class=\"headerlink\" title=\"定义属性和方法\"></a>定义属性和方法</h1><p>在使用QML的类创建元素对象时，已经获得了类的属性和方法。使用<code>property</code>关键字和<code>function</code>关键字可以在对象中创建自定义的属性和方法。</p>\n<h2 id=\"定义属性\"><a href=\"#定义属性\" class=\"headerlink\" title=\"定义属性\"></a>定义属性</h2><figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">property</span><span class=\"string\"> type name </span>: value</span><br></pre></td></tr></table></figure>\n<p>它只支持以下类型，对于复杂的数据，应当交给C++或Python处理 :  </p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">QML type</th>\n<th align=\"center\">对应的C++类型</th>\n<th align=\"center\">兼容的Python类型</th>\n<th align=\"center\">默认值</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">bool</td>\n<td align=\"center\">bool</td>\n<td align=\"center\">bool</td>\n<td align=\"center\">false</td>\n</tr>\n<tr>\n<td align=\"center\">int</td>\n<td align=\"center\">int</td>\n<td align=\"center\">int</td>\n<td align=\"center\">0</td>\n</tr>\n<tr>\n<td align=\"center\">double</td>\n<td align=\"center\">double</td>\n<td align=\"center\">float</td>\n<td align=\"center\">0.0</td>\n</tr>\n<tr>\n<td align=\"center\">real</td>\n<td align=\"center\">double</td>\n<td align=\"center\">float</td>\n<td align=\"center\">0.0</td>\n</tr>\n<tr>\n<td align=\"center\">string</td>\n<td align=\"center\">QString</td>\n<td align=\"center\">str</td>\n<td align=\"center\">“”</td>\n</tr>\n<tr>\n<td align=\"center\">url</td>\n<td align=\"center\">QUrl</td>\n<td align=\"center\">str</td>\n<td align=\"center\">“”</td>\n</tr>\n<tr>\n<td align=\"center\">color</td>\n<td align=\"center\">QColor</td>\n<td align=\"center\">QColor</td>\n<td align=\"center\">0x000000</td>\n</tr>\n<tr>\n<td align=\"center\">date</td>\n<td align=\"center\">QDateTime</td>\n<td align=\"center\">QDateTime</td>\n<td align=\"center\">-</td>\n</tr>\n<tr>\n<td align=\"center\">variant</td>\n<td align=\"center\">QVariant</td>\n<td align=\"center\">QVariant</td>\n<td align=\"center\">-</td>\n</tr>\n</tbody></table>\n<ul>\n<li>QML中<code>url</code>类型的变量传给Python时可以用<code>str</code>接收，但是不能用<code>QUrl</code>接收。</li>\n</ul>\n<p>下面代码每次点击按钮，Text显示的值就会增加1。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">ColumnLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 定义一个整数类型的属性，名为number，值为0</span></span><br><span class=\"line\">            <span class=\"keyword\">property</span><span class=\"string\"> int number </span>: <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"comment\">// 将显示的内容设为number</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: <span class=\"string\">&quot;clicked : &quot;</span> + number</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> text</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.preferredHeight</span>: <span class=\"number\">300</span></span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"attribute\">font.pixelSize</span>: <span class=\"number\">72</span>  <span class=\"comment\">// 字体大小</span></span><br><span class=\"line\">            <span class=\"attribute\">horizontalAlignment</span>: Text.AlignHCenter <span class=\"comment\">// 水平居中</span></span><br><span class=\"line\">            <span class=\"attribute\">verticalAlignment</span>: Text.AlignVCenter   <span class=\"comment\">// 竖直居中</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;BUTTON&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">onClicked</span> : &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 点击按钮时令text的number属性加一</span></span><br><span class=\"line\">                text.number += <span class=\"number\">1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/03.property_and_method/property.png\" alt=\"Image\"></p>\n<h2 id=\"定义方法\"><a href=\"#定义方法\" class=\"headerlink\" title=\"定义方法\"></a>定义方法</h2><p>方法的定义方式和JavaScript一样，参数为动态类型，不能像<code>signal</code>一样支持静态类型检测。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">name</span>(<span class=\"params\">paramaters list</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>下面的代码为<code>text</code>创建了一个<code>add</code>的方法，调用这个方法能使<code>text.number</code>的值增加。运行效果和上面一样，每次点击按钮，显示的值加一。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">ColumnLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Text</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 定义一个整数类型的属性，名为number，值为0</span></span><br><span class=\"line\">            <span class=\"keyword\">property</span><span class=\"string\"> int number </span>: <span class=\"number\">0</span></span><br><span class=\"line\">            <span class=\"comment\">// 将显示的内容设为number</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: <span class=\"string\">&quot;clicked : &quot;</span> + number</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> text</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.preferredHeight</span>: <span class=\"number\">300</span></span><br><span class=\"line\">            </span><br><span class=\"line\">            <span class=\"attribute\">font.pixelSize</span>: <span class=\"number\">72</span>  <span class=\"comment\">// 字体大小</span></span><br><span class=\"line\">            <span class=\"attribute\">horizontalAlignment</span>: Text.AlignHCenter <span class=\"comment\">// 水平居中</span></span><br><span class=\"line\">            <span class=\"attribute\">verticalAlignment</span>: Text.AlignVCenter   <span class=\"comment\">// 竖直居中</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 定义一个方法，调用这个方法可以使number的值加n</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">n</span>)</span></span><br><span class=\"line\"><span class=\"function\">            </span>&#123;</span><br><span class=\"line\">                number += n</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;BUTTON&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">onClicked</span> : &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 调用text的add方法使显示的值加一</span></span><br><span class=\"line\">                text.add(<span class=\"number\">1</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"属性更改通知\"><a href=\"#属性更改通知\" class=\"headerlink\" title=\"属性更改通知\"></a>属性更改通知</h2><p>元素中任意属性的值发生变化时，会自动发送属性更改通知的信号，若变化的属性名为<code>properyName</code>，则对应的信号处理器则名为<code>onPropertyNameChanged</code>。</p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li>QML<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-text.html\">Text</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qtqml-syntax-objectattributes.html#property-attributes\">property</a></li>\n</ul>\n</li>\n</ul>\n"},{"title":"QML 布局","date":"2025-02-10T10:37:32.000Z","_content":"\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/01.qml_layout.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# QML布局\nQML可以使用`x`、`y`、`z`三个属性设置对象的位置，其中`z`更大的对象覆盖更小的对象。直接使用这些属性既不方便也不美观，通常使用布局功能来设置对象的位置。\n\n在QML中有三种常用的布局工具：锚、定位器、布局管理器。\n\n## 使用锚进行布局\n锚(`anchors`)是所有可视对象的父类Item的属性，用来标记不同对象直接的相关关系。\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\n\nWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    Rectangle {\n        color: \"black\"\n\n        anchors.fill: parent // 填满父对象\n    }\n\n    Rectangle {\n        id: red         // id为red，可以在任何地方通过red操作这个对象\n        width: 80       // 宽80\n        height: 80      // 高80\n        color:\"red\"     // 红色\n\n        anchors.centerIn: parent // 与父对象中心对齐\n    }\n\n    Rectangle {\n        width: 80\n        height: 80\n        color:\"yellow\"\n\n        \n        anchors.top : red.top // 上边沿和red的上边沿对齐，即y相同\n        anchors.left : red.right // 左边沿和red的右边沿对齐\n    }\n\n    Rectangle {\n        width: 80\n        height: 80\n        color:\"blue\"\n\n        anchors.top : red.bottom // 上边沿和red的下边沿对齐\n        anchors.left : red.left // 左边沿和red的左边沿对齐，即x相同\n    }\n}\n```\n![anchors](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/anchors.png)\n\n## 使用定位器进行布局\n定位器有四个：Row(行定位器)、Column(列定位器)、Grid(栅格定位器)、Flow(流式定位器)。\n\n### Row\n* Row定位器将子对象横着排成一行\n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\n\nWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 行定位器\n    Row {\n        Rectangle {\n            width: 80       // 宽80\n            height: 80      // 高80\n            color:\"red\"     // 红色\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"yellow\"\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"blue\"\n        }\n    }\n}\n```\n![row](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/row.png)\n\n### Column\n* Column定位器将子对象竖着排成一列\n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\n\nWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 列定位器\n    Column {\n        Rectangle {\n            width: 80       // 宽80\n            height: 80      // 高80\n            color:\"red\"     // 红色\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"yellow\"\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"blue\"\n        }\n    }\n}\n```\n![column](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/column.png)\n\n### Gird\n* Grid定位器根据设定的行数与列数，将子对象从左到右、从上到下依次排列\n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\n\nWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 栅格定位器\n    Grid {\n        rows: 2   // 2行\n        columns: 3 // 3列\n\n        Rectangle {\n            width: 80       // 宽80\n            height: 80      // 高80\n            color:\"red\"     // 红色\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"yellow\"\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"blue\"\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"orange\"\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"green\"\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"purple\"\n        }\n    }\n}\n```\n![grid](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/grid.png)\n\n### Flow\n* Flow定位器将子对象从左到右依次排列，当自身宽度不足以放下下一个子对象时换行\n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\n\nWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 流式定位器\n    Flow {\n        anchors.fill: parent //填满父对象(即窗口)\n\n        Rectangle {\n            width: 240      // 宽\n            height: 80      // 高\n            color:\"red\"\n        }\n\n        Rectangle {\n            width: 160\n            height: 80\n            color:\"yellow\"\n        }\n\n        Rectangle {\n            width: 160\n            height: 80\n            color:\"blue\"\n        }\n\n        Rectangle {\n            width: 320\n            height: 80\n            color:\"orange\"\n        }\n\n        Rectangle {\n            width: 160\n            height: 80\n            color:\"green\"\n        }\n\n        Rectangle {\n            width: 400\n            height: 80\n            color:\"purple\"\n        }\n    }\n}\n```\n![flow](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/flow.png)  \n\n## 使用布局管理器进行布局\n布局管理器有三个：RowLayout、ColumnLayout、GridLayout\n* 需要加载Layouts模块`import QtQuick.Layouts 1.13`\n* 布局管理器和定位器类似，区别在于布局管理器处理可定位元素的位置以外，还能调节元素的大小。\n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Layouts 1.13\n\nWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 列布局管理器\n    ColumnLayout {\n        anchors.fill: parent\n        \n        // 行布局管理器\n        RowLayout {\n            Layout.fillWidth: true    // 宽度填满布局\n            Layout.fillHeight: true   // 高度填满布局\n\n            Rectangle {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"red\"\n            }\n\n            Rectangle {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"yellow\"\n            }\n\n            Rectangle {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"blue\"\n            }\n        }\n\n        // 行布局管理器\n        RowLayout {\n            Layout.fillWidth: true    // 宽度填满布局\n            Layout.fillHeight: true   // 高度填满布局\n\n            Rectangle {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"orange\"\n            }\n\n            Rectangle {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"green\"\n            }\n\n            Rectangle {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"purple\"\n            }\n        }\n    }\n}\n```\n\n![layout](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/layout.png)  \n\n## 参考 :   \n* QML\n  * [anvhors](https://doc.qt.io/qt-5/qml-qtquick-item.html#anchors-prop)\n  * [Row](https://doc.qt.io/qt-5/qml-qtquick-row.html)\n  * [Column](https://doc.qt.io/qt-5/qml-qtquick-column.html)\n  * [Grid](https://doc.qt.io/qt-5/qml-qtquick-grid.html)\n  * [Flow](https://doc.qt.io/qt-5/qml-qtquick-flow.html)\n  * [RowLayout](https://doc.qt.io/qt-5/qml-qtquick-layouts-rowlayout.html)\n  * [ColumnLayout](https://doc.qt.io/qt-5/qml-qtquick-layouts-columnlayout.html)\n  * [GridLayout](https://doc.qt.io/qt-5/qml-qtquick-layouts-gridlayout.html)","source":"_posts/QML-布局.md","raw":"---\ntitle: QML 布局\ndate: 2025-02-10 18:37:32\ntags:\n    - Qt\n    - QML\n    - Python\n    - PySide\n---\n\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/01.qml_layout.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# QML布局\nQML可以使用`x`、`y`、`z`三个属性设置对象的位置，其中`z`更大的对象覆盖更小的对象。直接使用这些属性既不方便也不美观，通常使用布局功能来设置对象的位置。\n\n在QML中有三种常用的布局工具：锚、定位器、布局管理器。\n\n## 使用锚进行布局\n锚(`anchors`)是所有可视对象的父类Item的属性，用来标记不同对象直接的相关关系。\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\n\nWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    Rectangle {\n        color: \"black\"\n\n        anchors.fill: parent // 填满父对象\n    }\n\n    Rectangle {\n        id: red         // id为red，可以在任何地方通过red操作这个对象\n        width: 80       // 宽80\n        height: 80      // 高80\n        color:\"red\"     // 红色\n\n        anchors.centerIn: parent // 与父对象中心对齐\n    }\n\n    Rectangle {\n        width: 80\n        height: 80\n        color:\"yellow\"\n\n        \n        anchors.top : red.top // 上边沿和red的上边沿对齐，即y相同\n        anchors.left : red.right // 左边沿和red的右边沿对齐\n    }\n\n    Rectangle {\n        width: 80\n        height: 80\n        color:\"blue\"\n\n        anchors.top : red.bottom // 上边沿和red的下边沿对齐\n        anchors.left : red.left // 左边沿和red的左边沿对齐，即x相同\n    }\n}\n```\n![anchors](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/anchors.png)\n\n## 使用定位器进行布局\n定位器有四个：Row(行定位器)、Column(列定位器)、Grid(栅格定位器)、Flow(流式定位器)。\n\n### Row\n* Row定位器将子对象横着排成一行\n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\n\nWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 行定位器\n    Row {\n        Rectangle {\n            width: 80       // 宽80\n            height: 80      // 高80\n            color:\"red\"     // 红色\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"yellow\"\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"blue\"\n        }\n    }\n}\n```\n![row](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/row.png)\n\n### Column\n* Column定位器将子对象竖着排成一列\n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\n\nWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 列定位器\n    Column {\n        Rectangle {\n            width: 80       // 宽80\n            height: 80      // 高80\n            color:\"red\"     // 红色\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"yellow\"\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"blue\"\n        }\n    }\n}\n```\n![column](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/column.png)\n\n### Gird\n* Grid定位器根据设定的行数与列数，将子对象从左到右、从上到下依次排列\n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\n\nWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 栅格定位器\n    Grid {\n        rows: 2   // 2行\n        columns: 3 // 3列\n\n        Rectangle {\n            width: 80       // 宽80\n            height: 80      // 高80\n            color:\"red\"     // 红色\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"yellow\"\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"blue\"\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"orange\"\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"green\"\n        }\n\n        Rectangle {\n            width: 80\n            height: 80\n            color:\"purple\"\n        }\n    }\n}\n```\n![grid](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/grid.png)\n\n### Flow\n* Flow定位器将子对象从左到右依次排列，当自身宽度不足以放下下一个子对象时换行\n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\n\nWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 流式定位器\n    Flow {\n        anchors.fill: parent //填满父对象(即窗口)\n\n        Rectangle {\n            width: 240      // 宽\n            height: 80      // 高\n            color:\"red\"\n        }\n\n        Rectangle {\n            width: 160\n            height: 80\n            color:\"yellow\"\n        }\n\n        Rectangle {\n            width: 160\n            height: 80\n            color:\"blue\"\n        }\n\n        Rectangle {\n            width: 320\n            height: 80\n            color:\"orange\"\n        }\n\n        Rectangle {\n            width: 160\n            height: 80\n            color:\"green\"\n        }\n\n        Rectangle {\n            width: 400\n            height: 80\n            color:\"purple\"\n        }\n    }\n}\n```\n![flow](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/flow.png)  \n\n## 使用布局管理器进行布局\n布局管理器有三个：RowLayout、ColumnLayout、GridLayout\n* 需要加载Layouts模块`import QtQuick.Layouts 1.13`\n* 布局管理器和定位器类似，区别在于布局管理器处理可定位元素的位置以外，还能调节元素的大小。\n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Layouts 1.13\n\nWindow {\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    // 列布局管理器\n    ColumnLayout {\n        anchors.fill: parent\n        \n        // 行布局管理器\n        RowLayout {\n            Layout.fillWidth: true    // 宽度填满布局\n            Layout.fillHeight: true   // 高度填满布局\n\n            Rectangle {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"red\"\n            }\n\n            Rectangle {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"yellow\"\n            }\n\n            Rectangle {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"blue\"\n            }\n        }\n\n        // 行布局管理器\n        RowLayout {\n            Layout.fillWidth: true    // 宽度填满布局\n            Layout.fillHeight: true   // 高度填满布局\n\n            Rectangle {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"orange\"\n            }\n\n            Rectangle {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"green\"\n            }\n\n            Rectangle {\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"purple\"\n            }\n        }\n    }\n}\n```\n\n![layout](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/layout.png)  \n\n## 参考 :   \n* QML\n  * [anvhors](https://doc.qt.io/qt-5/qml-qtquick-item.html#anchors-prop)\n  * [Row](https://doc.qt.io/qt-5/qml-qtquick-row.html)\n  * [Column](https://doc.qt.io/qt-5/qml-qtquick-column.html)\n  * [Grid](https://doc.qt.io/qt-5/qml-qtquick-grid.html)\n  * [Flow](https://doc.qt.io/qt-5/qml-qtquick-flow.html)\n  * [RowLayout](https://doc.qt.io/qt-5/qml-qtquick-layouts-rowlayout.html)\n  * [ColumnLayout](https://doc.qt.io/qt-5/qml-qtquick-layouts-columnlayout.html)\n  * [GridLayout](https://doc.qt.io/qt-5/qml-qtquick-layouts-gridlayout.html)","slug":"QML-布局","published":1,"updated":"2025-02-10T10:41:52.245Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t8k000fmkin6detbkkm","content":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/01.qml_layout.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"QML布局\"><a href=\"#QML布局\" class=\"headerlink\" title=\"QML布局\"></a>QML布局</h1><p>QML可以使用<code>x</code>、<code>y</code>、<code>z</code>三个属性设置对象的位置，其中<code>z</code>更大的对象覆盖更小的对象。直接使用这些属性既不方便也不美观，通常使用布局功能来设置对象的位置。</p>\n<p>在QML中有三种常用的布局工具：锚、定位器、布局管理器。</p>\n<h2 id=\"使用锚进行布局\"><a href=\"#使用锚进行布局\" class=\"headerlink\" title=\"使用锚进行布局\"></a>使用锚进行布局</h2><p>锚(<code>anchors</code>)是所有可视对象的父类Item的属性，用来标记不同对象直接的相关关系。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">color</span>: <span class=\"string\">&quot;black&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span> <span class=\"comment\">// 填满父对象</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> red</span>         <span class=\"comment\">// id为red，可以在任何地方通过red操作这个对象</span></span><br><span class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">80</span>       <span class=\"comment\">// 宽80</span></span><br><span class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">80</span>      <span class=\"comment\">// 高80</span></span><br><span class=\"line\">        <span class=\"attribute\">color</span>:<span class=\"string\">&quot;red&quot;</span>     <span class=\"comment\">// 红色</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">anchors.centerIn</span>: <span class=\"built_in\">parent</span> <span class=\"comment\">// 与父对象中心对齐</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">        <span class=\"attribute\">color</span>:<span class=\"string\">&quot;yellow&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"attribute\">anchors.top</span> : red.top <span class=\"comment\">// 上边沿和red的上边沿对齐，即y相同</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.left</span> : red.right <span class=\"comment\">// 左边沿和red的右边沿对齐</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">        <span class=\"attribute\">color</span>:<span class=\"string\">&quot;blue&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">anchors.top</span> : red.bottom <span class=\"comment\">// 上边沿和red的下边沿对齐</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.left</span> : red.left <span class=\"comment\">// 左边沿和red的左边沿对齐，即x相同</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/anchors.png\" alt=\"anchors\"></p>\n<h2 id=\"使用定位器进行布局\"><a href=\"#使用定位器进行布局\" class=\"headerlink\" title=\"使用定位器进行布局\"></a>使用定位器进行布局</h2><p>定位器有四个：Row(行定位器)、Column(列定位器)、Grid(栅格定位器)、Flow(流式定位器)。</p>\n<h3 id=\"Row\"><a href=\"#Row\" class=\"headerlink\" title=\"Row\"></a>Row</h3><ul>\n<li>Row定位器将子对象横着排成一行</li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 行定位器</span></span><br><span class=\"line\">    <span class=\"title\">Row</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span>       <span class=\"comment\">// 宽80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span>      <span class=\"comment\">// 高80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;red&quot;</span>     <span class=\"comment\">// 红色</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;yellow&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;blue&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/row.png\" alt=\"row\"></p>\n<h3 id=\"Column\"><a href=\"#Column\" class=\"headerlink\" title=\"Column\"></a>Column</h3><ul>\n<li>Column定位器将子对象竖着排成一列</li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 列定位器</span></span><br><span class=\"line\">    <span class=\"title\">Column</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span>       <span class=\"comment\">// 宽80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span>      <span class=\"comment\">// 高80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;red&quot;</span>     <span class=\"comment\">// 红色</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;yellow&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;blue&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/column.png\" alt=\"column\"></p>\n<h3 id=\"Gird\"><a href=\"#Gird\" class=\"headerlink\" title=\"Gird\"></a>Gird</h3><ul>\n<li>Grid定位器根据设定的行数与列数，将子对象从左到右、从上到下依次排列</li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 栅格定位器</span></span><br><span class=\"line\">    <span class=\"title\">Grid</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">rows</span>: <span class=\"number\">2</span>   <span class=\"comment\">// 2行</span></span><br><span class=\"line\">        <span class=\"attribute\">columns</span>: <span class=\"number\">3</span> <span class=\"comment\">// 3列</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span>       <span class=\"comment\">// 宽80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span>      <span class=\"comment\">// 高80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;red&quot;</span>     <span class=\"comment\">// 红色</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;yellow&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;blue&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;orange&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;green&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;purple&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/grid.png\" alt=\"grid\"></p>\n<h3 id=\"Flow\"><a href=\"#Flow\" class=\"headerlink\" title=\"Flow\"></a>Flow</h3><ul>\n<li>Flow定位器将子对象从左到右依次排列，当自身宽度不足以放下下一个子对象时换行</li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 流式定位器</span></span><br><span class=\"line\">    <span class=\"title\">Flow</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span> <span class=\"comment\">//填满父对象(即窗口)</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">240</span>      <span class=\"comment\">// 宽</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span>      <span class=\"comment\">// 高</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;red&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">160</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;yellow&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">160</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;blue&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">320</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;orange&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">160</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;green&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">400</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;purple&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/flow.png\" alt=\"flow\">  </p>\n<h2 id=\"使用布局管理器进行布局\"><a href=\"#使用布局管理器进行布局\" class=\"headerlink\" title=\"使用布局管理器进行布局\"></a>使用布局管理器进行布局</h2><p>布局管理器有三个：RowLayout、ColumnLayout、GridLayout</p>\n<ul>\n<li>需要加载Layouts模块<code>import QtQuick.Layouts 1.13</code></li>\n<li>布局管理器和定位器类似，区别在于布局管理器处理可定位元素的位置以外，还能调节元素的大小。</li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 列布局管理器</span></span><br><span class=\"line\">    <span class=\"title\">ColumnLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 行布局管理器</span></span><br><span class=\"line\">        <span class=\"title\">RowLayout</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span>    <span class=\"comment\">// 宽度填满布局</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span>   <span class=\"comment\">// 高度填满布局</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;red&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;yellow&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;blue&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 行布局管理器</span></span><br><span class=\"line\">        <span class=\"title\">RowLayout</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span>    <span class=\"comment\">// 宽度填满布局</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span>   <span class=\"comment\">// 高度填满布局</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;orange&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;green&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;purple&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/layout.png\" alt=\"layout\">  </p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li>QML<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-item.html#anchors-prop\">anvhors</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-row.html\">Row</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-column.html\">Column</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-grid.html\">Grid</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-flow.html\">Flow</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-layouts-rowlayout.html\">RowLayout</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-layouts-columnlayout.html\">ColumnLayout</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-layouts-gridlayout.html\">GridLayout</a></li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/01.qml_layout.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"QML布局\"><a href=\"#QML布局\" class=\"headerlink\" title=\"QML布局\"></a>QML布局</h1><p>QML可以使用<code>x</code>、<code>y</code>、<code>z</code>三个属性设置对象的位置，其中<code>z</code>更大的对象覆盖更小的对象。直接使用这些属性既不方便也不美观，通常使用布局功能来设置对象的位置。</p>\n<p>在QML中有三种常用的布局工具：锚、定位器、布局管理器。</p>\n<h2 id=\"使用锚进行布局\"><a href=\"#使用锚进行布局\" class=\"headerlink\" title=\"使用锚进行布局\"></a>使用锚进行布局</h2><p>锚(<code>anchors</code>)是所有可视对象的父类Item的属性，用来标记不同对象直接的相关关系。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">color</span>: <span class=\"string\">&quot;black&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span> <span class=\"comment\">// 填满父对象</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">id:</span><span class=\"string\"> red</span>         <span class=\"comment\">// id为red，可以在任何地方通过red操作这个对象</span></span><br><span class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">80</span>       <span class=\"comment\">// 宽80</span></span><br><span class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">80</span>      <span class=\"comment\">// 高80</span></span><br><span class=\"line\">        <span class=\"attribute\">color</span>:<span class=\"string\">&quot;red&quot;</span>     <span class=\"comment\">// 红色</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">anchors.centerIn</span>: <span class=\"built_in\">parent</span> <span class=\"comment\">// 与父对象中心对齐</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">        <span class=\"attribute\">color</span>:<span class=\"string\">&quot;yellow&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"attribute\">anchors.top</span> : red.top <span class=\"comment\">// 上边沿和red的上边沿对齐，即y相同</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.left</span> : red.right <span class=\"comment\">// 左边沿和red的右边沿对齐</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">        <span class=\"attribute\">color</span>:<span class=\"string\">&quot;blue&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"attribute\">anchors.top</span> : red.bottom <span class=\"comment\">// 上边沿和red的下边沿对齐</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.left</span> : red.left <span class=\"comment\">// 左边沿和red的左边沿对齐，即x相同</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/anchors.png\" alt=\"anchors\"></p>\n<h2 id=\"使用定位器进行布局\"><a href=\"#使用定位器进行布局\" class=\"headerlink\" title=\"使用定位器进行布局\"></a>使用定位器进行布局</h2><p>定位器有四个：Row(行定位器)、Column(列定位器)、Grid(栅格定位器)、Flow(流式定位器)。</p>\n<h3 id=\"Row\"><a href=\"#Row\" class=\"headerlink\" title=\"Row\"></a>Row</h3><ul>\n<li>Row定位器将子对象横着排成一行</li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 行定位器</span></span><br><span class=\"line\">    <span class=\"title\">Row</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span>       <span class=\"comment\">// 宽80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span>      <span class=\"comment\">// 高80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;red&quot;</span>     <span class=\"comment\">// 红色</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;yellow&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;blue&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/row.png\" alt=\"row\"></p>\n<h3 id=\"Column\"><a href=\"#Column\" class=\"headerlink\" title=\"Column\"></a>Column</h3><ul>\n<li>Column定位器将子对象竖着排成一列</li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 列定位器</span></span><br><span class=\"line\">    <span class=\"title\">Column</span> &#123;</span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span>       <span class=\"comment\">// 宽80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span>      <span class=\"comment\">// 高80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;red&quot;</span>     <span class=\"comment\">// 红色</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;yellow&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;blue&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/column.png\" alt=\"column\"></p>\n<h3 id=\"Gird\"><a href=\"#Gird\" class=\"headerlink\" title=\"Gird\"></a>Gird</h3><ul>\n<li>Grid定位器根据设定的行数与列数，将子对象从左到右、从上到下依次排列</li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 栅格定位器</span></span><br><span class=\"line\">    <span class=\"title\">Grid</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">rows</span>: <span class=\"number\">2</span>   <span class=\"comment\">// 2行</span></span><br><span class=\"line\">        <span class=\"attribute\">columns</span>: <span class=\"number\">3</span> <span class=\"comment\">// 3列</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span>       <span class=\"comment\">// 宽80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span>      <span class=\"comment\">// 高80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;red&quot;</span>     <span class=\"comment\">// 红色</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;yellow&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;blue&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;orange&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;green&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;purple&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/grid.png\" alt=\"grid\"></p>\n<h3 id=\"Flow\"><a href=\"#Flow\" class=\"headerlink\" title=\"Flow\"></a>Flow</h3><ul>\n<li>Flow定位器将子对象从左到右依次排列，当自身宽度不足以放下下一个子对象时换行</li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 流式定位器</span></span><br><span class=\"line\">    <span class=\"title\">Flow</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span> <span class=\"comment\">//填满父对象(即窗口)</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">240</span>      <span class=\"comment\">// 宽</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span>      <span class=\"comment\">// 高</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;red&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">160</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;yellow&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">160</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;blue&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">320</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;orange&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">160</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;green&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">400</span></span><br><span class=\"line\">            <span class=\"attribute\">height</span>: <span class=\"number\">80</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>:<span class=\"string\">&quot;purple&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/flow.png\" alt=\"flow\">  </p>\n<h2 id=\"使用布局管理器进行布局\"><a href=\"#使用布局管理器进行布局\" class=\"headerlink\" title=\"使用布局管理器进行布局\"></a>使用布局管理器进行布局</h2><p>布局管理器有三个：RowLayout、ColumnLayout、GridLayout</p>\n<ul>\n<li>需要加载Layouts模块<code>import QtQuick.Layouts 1.13</code></li>\n<li>布局管理器和定位器类似，区别在于布局管理器处理可定位元素的位置以外，还能调节元素的大小。</li>\n</ul>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 列布局管理器</span></span><br><span class=\"line\">    <span class=\"title\">ColumnLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">// 行布局管理器</span></span><br><span class=\"line\">        <span class=\"title\">RowLayout</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span>    <span class=\"comment\">// 宽度填满布局</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span>   <span class=\"comment\">// 高度填满布局</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;red&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;yellow&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;blue&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 行布局管理器</span></span><br><span class=\"line\">        <span class=\"title\">RowLayout</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span>    <span class=\"comment\">// 宽度填满布局</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span>   <span class=\"comment\">// 高度填满布局</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;orange&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;green&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;purple&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/01.qml_layout/layout.png\" alt=\"layout\">  </p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li>QML<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-item.html#anchors-prop\">anvhors</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-row.html\">Row</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-column.html\">Column</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-grid.html\">Grid</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-flow.html\">Flow</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-layouts-rowlayout.html\">RowLayout</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-layouts-columnlayout.html\">ColumnLayout</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-layouts-gridlayout.html\">GridLayout</a></li>\n</ul>\n</li>\n</ul>\n"},{"title":"QObject 和对象树","date":"2025-02-10T10:31:04.000Z","_content":"\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/basic/01.object_tree.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# QObject和对象树\n`QObject`是Qt中绝大多数的类的父类，是Qt对象模型的核心。其构造函数如下 :  \n```Python\ndef __init__(self, parent=None) :\n    pass\n```\nQt原本是C++的框架，为了方便管理内存等资源，实现了一套半自动的对象管理机制。`QObject`及其子类的构造函数通过`parent`参数设置一个`QObject`对象作为这个对象的`父对象`，自己则成为`parent`的`子对象`。这些对象通过父子关系组织成一个树形结构，当一个对象析构的时候，`QObject`的析构函数会自动析构它的所有`子对象`。  \n\n如果希望把我们的类也交给Qt对象树自动管理的话，则需要让我们的类继承`QObject`(或它的子类)并在构造函数中调用父类的构造函数。  \n```Python\nimport sys\nfrom PySide2.QtCore import QObject,QCoreApplication\n\n# 继承QObject构建我们自己的类\nclass MyClass(QObject) :\n    # 构造函数\n    def __init__(self, parent=None) :\n        super().__init__(parent) # 调用父类的构造函数，组织对象树\n        if(parent == None) :\n            print(self, \"is a root object.\")\n        else :\n            print(self, \"is a son object of\", parent)\n\n    # 析构函数\n    def __del__(self) :\n        print(self, \"had been deleted.\")\n\nif __name__ == \"__main__\":\n    app = QCoreApplication(sys.argv)\n    obj1 = MyClass()\n    obj2 = MyClass()\n    obj3 = MyClass(obj1)\n    obj4 = MyClass(obj1)\n    obj5 = MyClass(obj2)\n    obj6 = MyClass(obj2)\n    del obj2 # 删除变量obj2、使其所引用的对象的引用计数为0被析构\n    app.exec_()\n```\n运行这个程序，可以看到`obj2`析构时，它的的子对象`obj5`和`obj6`并没有被析构。这是因为Python自己有GC可以管理对象，如果析构了`obj5`和`obj6`引用的对象，在使用这两个变量时会出错。所以Qt的对象树管理机制在Python上并不工作。  \n\n但是`QObject`及`对象树`除了自动析构以外还有很多功能(例如将一个对象设为可见时自动将其子对象也设为可见)，因此仍然需要正确的继承与构造`QObject`，通采取去以下规则即可 :  \n* 如果对象`x`是对象`y`的成员，则令`y`作为`x`的`parent`。\n* 如果类`X`继承于类`Y`，则使用`X`的`parent`作为`Y`的`parent`。\n\n## 参考 :  \n* [QObject](https://doc.qt.io/qtforpython/PySide2/QtCore/QObject.html)","source":"_posts/QObject-和对象树.md","raw":"---\ntitle: QObject 和对象树\ndate: 2025-02-10 18:31:04\ntags:\n    - Qt\n    - Python\n    - PySide\n---\n\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/basic/01.object_tree.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# QObject和对象树\n`QObject`是Qt中绝大多数的类的父类，是Qt对象模型的核心。其构造函数如下 :  \n```Python\ndef __init__(self, parent=None) :\n    pass\n```\nQt原本是C++的框架，为了方便管理内存等资源，实现了一套半自动的对象管理机制。`QObject`及其子类的构造函数通过`parent`参数设置一个`QObject`对象作为这个对象的`父对象`，自己则成为`parent`的`子对象`。这些对象通过父子关系组织成一个树形结构，当一个对象析构的时候，`QObject`的析构函数会自动析构它的所有`子对象`。  \n\n如果希望把我们的类也交给Qt对象树自动管理的话，则需要让我们的类继承`QObject`(或它的子类)并在构造函数中调用父类的构造函数。  \n```Python\nimport sys\nfrom PySide2.QtCore import QObject,QCoreApplication\n\n# 继承QObject构建我们自己的类\nclass MyClass(QObject) :\n    # 构造函数\n    def __init__(self, parent=None) :\n        super().__init__(parent) # 调用父类的构造函数，组织对象树\n        if(parent == None) :\n            print(self, \"is a root object.\")\n        else :\n            print(self, \"is a son object of\", parent)\n\n    # 析构函数\n    def __del__(self) :\n        print(self, \"had been deleted.\")\n\nif __name__ == \"__main__\":\n    app = QCoreApplication(sys.argv)\n    obj1 = MyClass()\n    obj2 = MyClass()\n    obj3 = MyClass(obj1)\n    obj4 = MyClass(obj1)\n    obj5 = MyClass(obj2)\n    obj6 = MyClass(obj2)\n    del obj2 # 删除变量obj2、使其所引用的对象的引用计数为0被析构\n    app.exec_()\n```\n运行这个程序，可以看到`obj2`析构时，它的的子对象`obj5`和`obj6`并没有被析构。这是因为Python自己有GC可以管理对象，如果析构了`obj5`和`obj6`引用的对象，在使用这两个变量时会出错。所以Qt的对象树管理机制在Python上并不工作。  \n\n但是`QObject`及`对象树`除了自动析构以外还有很多功能(例如将一个对象设为可见时自动将其子对象也设为可见)，因此仍然需要正确的继承与构造`QObject`，通采取去以下规则即可 :  \n* 如果对象`x`是对象`y`的成员，则令`y`作为`x`的`parent`。\n* 如果类`X`继承于类`Y`，则使用`X`的`parent`作为`Y`的`parent`。\n\n## 参考 :  \n* [QObject](https://doc.qt.io/qtforpython/PySide2/QtCore/QObject.html)","slug":"QObject-和对象树","published":1,"updated":"2025-02-10T10:33:23.914Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t8m000gmkin427g6vxi","content":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/basic/01.object_tree.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"QObject和对象树\"><a href=\"#QObject和对象树\" class=\"headerlink\" title=\"QObject和对象树\"></a>QObject和对象树</h1><p><code>QObject</code>是Qt中绝大多数的类的父类，是Qt对象模型的核心。其构造函数如下 :  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, parent=<span class=\"literal\">None</span></span>) :</span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n<p>Qt原本是C++的框架，为了方便管理内存等资源，实现了一套半自动的对象管理机制。<code>QObject</code>及其子类的构造函数通过<code>parent</code>参数设置一个<code>QObject</code>对象作为这个对象的<code>父对象</code>，自己则成为<code>parent</code>的<code>子对象</code>。这些对象通过父子关系组织成一个树形结构，当一个对象析构的时候，<code>QObject</code>的析构函数会自动析构它的所有<code>子对象</code>。  </p>\n<p>如果希望把我们的类也交给Qt对象树自动管理的话，则需要让我们的类继承<code>QObject</code>(或它的子类)并在构造函数中调用父类的构造函数。  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtCore <span class=\"keyword\">import</span> QObject,QCoreApplication</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 继承QObject构建我们自己的类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyClass</span>(<span class=\"title class_ inherited__\">QObject</span>) :</span><br><span class=\"line\">    <span class=\"comment\"># 构造函数</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, parent=<span class=\"literal\">None</span></span>) :</span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__(parent) <span class=\"comment\"># 调用父类的构造函数，组织对象树</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(parent == <span class=\"literal\">None</span>) :</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"variable language_\">self</span>, <span class=\"string\">&quot;is a root object.&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">else</span> :</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"variable language_\">self</span>, <span class=\"string\">&quot;is a son object of&quot;</span>, parent)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 析构函数</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__del__</span>(<span class=\"params\">self</span>) :</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"variable language_\">self</span>, <span class=\"string\">&quot;had been deleted.&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app = QCoreApplication(sys.argv)</span><br><span class=\"line\">    obj1 = MyClass()</span><br><span class=\"line\">    obj2 = MyClass()</span><br><span class=\"line\">    obj3 = MyClass(obj1)</span><br><span class=\"line\">    obj4 = MyClass(obj1)</span><br><span class=\"line\">    obj5 = MyClass(obj2)</span><br><span class=\"line\">    obj6 = MyClass(obj2)</span><br><span class=\"line\">    <span class=\"keyword\">del</span> obj2 <span class=\"comment\"># 删除变量obj2、使其所引用的对象的引用计数为0被析构</span></span><br><span class=\"line\">    app.exec_()</span><br></pre></td></tr></table></figure>\n<p>运行这个程序，可以看到<code>obj2</code>析构时，它的的子对象<code>obj5</code>和<code>obj6</code>并没有被析构。这是因为Python自己有GC可以管理对象，如果析构了<code>obj5</code>和<code>obj6</code>引用的对象，在使用这两个变量时会出错。所以Qt的对象树管理机制在Python上并不工作。  </p>\n<p>但是<code>QObject</code>及<code>对象树</code>除了自动析构以外还有很多功能(例如将一个对象设为可见时自动将其子对象也设为可见)，因此仍然需要正确的继承与构造<code>QObject</code>，通采取去以下规则即可 :  </p>\n<ul>\n<li>如果对象<code>x</code>是对象<code>y</code>的成员，则令<code>y</code>作为<code>x</code>的<code>parent</code>。</li>\n<li>如果类<code>X</code>继承于类<code>Y</code>，则使用<code>X</code>的<code>parent</code>作为<code>Y</code>的<code>parent</code>。</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li><a href=\"https://doc.qt.io/qtforpython/PySide2/QtCore/QObject.html\">QObject</a></li>\n</ul>\n","excerpt":"","more":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/basic/01.object_tree.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"QObject和对象树\"><a href=\"#QObject和对象树\" class=\"headerlink\" title=\"QObject和对象树\"></a>QObject和对象树</h1><p><code>QObject</code>是Qt中绝大多数的类的父类，是Qt对象模型的核心。其构造函数如下 :  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, parent=<span class=\"literal\">None</span></span>) :</span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n<p>Qt原本是C++的框架，为了方便管理内存等资源，实现了一套半自动的对象管理机制。<code>QObject</code>及其子类的构造函数通过<code>parent</code>参数设置一个<code>QObject</code>对象作为这个对象的<code>父对象</code>，自己则成为<code>parent</code>的<code>子对象</code>。这些对象通过父子关系组织成一个树形结构，当一个对象析构的时候，<code>QObject</code>的析构函数会自动析构它的所有<code>子对象</code>。  </p>\n<p>如果希望把我们的类也交给Qt对象树自动管理的话，则需要让我们的类继承<code>QObject</code>(或它的子类)并在构造函数中调用父类的构造函数。  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtCore <span class=\"keyword\">import</span> QObject,QCoreApplication</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 继承QObject构建我们自己的类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MyClass</span>(<span class=\"title class_ inherited__\">QObject</span>) :</span><br><span class=\"line\">    <span class=\"comment\"># 构造函数</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, parent=<span class=\"literal\">None</span></span>) :</span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__(parent) <span class=\"comment\"># 调用父类的构造函数，组织对象树</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(parent == <span class=\"literal\">None</span>) :</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"variable language_\">self</span>, <span class=\"string\">&quot;is a root object.&quot;</span>)</span><br><span class=\"line\">        <span class=\"keyword\">else</span> :</span><br><span class=\"line\">            <span class=\"built_in\">print</span>(<span class=\"variable language_\">self</span>, <span class=\"string\">&quot;is a son object of&quot;</span>, parent)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 析构函数</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__del__</span>(<span class=\"params\">self</span>) :</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"variable language_\">self</span>, <span class=\"string\">&quot;had been deleted.&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app = QCoreApplication(sys.argv)</span><br><span class=\"line\">    obj1 = MyClass()</span><br><span class=\"line\">    obj2 = MyClass()</span><br><span class=\"line\">    obj3 = MyClass(obj1)</span><br><span class=\"line\">    obj4 = MyClass(obj1)</span><br><span class=\"line\">    obj5 = MyClass(obj2)</span><br><span class=\"line\">    obj6 = MyClass(obj2)</span><br><span class=\"line\">    <span class=\"keyword\">del</span> obj2 <span class=\"comment\"># 删除变量obj2、使其所引用的对象的引用计数为0被析构</span></span><br><span class=\"line\">    app.exec_()</span><br></pre></td></tr></table></figure>\n<p>运行这个程序，可以看到<code>obj2</code>析构时，它的的子对象<code>obj5</code>和<code>obj6</code>并没有被析构。这是因为Python自己有GC可以管理对象，如果析构了<code>obj5</code>和<code>obj6</code>引用的对象，在使用这两个变量时会出错。所以Qt的对象树管理机制在Python上并不工作。  </p>\n<p>但是<code>QObject</code>及<code>对象树</code>除了自动析构以外还有很多功能(例如将一个对象设为可见时自动将其子对象也设为可见)，因此仍然需要正确的继承与构造<code>QObject</code>，通采取去以下规则即可 :  </p>\n<ul>\n<li>如果对象<code>x</code>是对象<code>y</code>的成员，则令<code>y</code>作为<code>x</code>的<code>parent</code>。</li>\n<li>如果类<code>X</code>继承于类<code>Y</code>，则使用<code>X</code>的<code>parent</code>作为<code>Y</code>的<code>parent</code>。</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li><a href=\"https://doc.qt.io/qtforpython/PySide2/QtCore/QObject.html\">QObject</a></li>\n</ul>\n"},{"title":"Qt 的信号槽机制","date":"2025-02-10T10:33:47.000Z","_content":"\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/basic/02.signal_and_slot.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# Qt的信号槽机制\n信号和槽是Qt对象间信息交流的工具，要使用信号槽机制，则对象的类必须是`QObject`的子类。\n* 当一个信号被绑定到一个槽上之后，每次发送该信号的时候，都会信号的参数调用对应的槽函数\n* 信号和槽是多对多的关系，一个信号可以绑定多个槽，一个槽也可以绑定多个信号\n\n## 信号\n* 通过`QtCore.Signal`类来创建`信号`，其构造参数为每个信号参数的类型\n* 如果要重载信号，则将每一组参数类型写成一个`tuple`或`list`\n\n## 槽\n* 通过`QtCore.Slot`修饰器来创建`槽`，其参数为槽函数的参数类型\n* 如果槽函数有返回值，则需要使用修饰器的`result`参数来指明返回值类型\n* 如果要重载槽，只需要多次使用修饰器修饰器即可\n\n## 连接信号和槽\n* 通过`Signal`的`connect`方法来连接信号和槽\n* 对于重载过的信号，需要使用`[]`来指明使用哪一个重载，否则默认采用第一组参数类型\n\n## 发送信号\n* 通过`Signal`的`emit`方法来发送信号\n* 对于重载过的信号，需要使用`[]`来指明使用哪一个重载，否则默认采用第一组参数类型\n\n```Python\nimport sys\nfrom PySide2 import QtCore\nfrom PySide2.QtCore import QObject,QCoreApplication\n\n# 继承QObject构建我们自己的类\nclass People(QObject) :\n    # 定义信号，参数为 str,str 或 str,int\n    speak = QtCore.Signal((str,str),(str,int))\n    \n    # 构造函数\n    def __init__(self, name, parent=None) :\n        # 调用父类的构造函数，组织对象树\n        super().__init__(parent) \n        self.name = name\n\n    # 定义槽，需要用result指定返回值类型(没有返回值可以省略)\n    @QtCore.Slot(str, str, result=None) # 参数类型为str,str\n    @QtCore.Slot(str, int, result=None) # 或 str,int\n    def hear(self, speaker, text) :\n        print(self.name, \"hear\", speaker, \"speak :\", text)\n\n\nif __name__ == \"__main__\":\n    # 创建应用\n    app = QCoreApplication(sys.argv)\n\n    tom = People(\"Tom\")\n    jerry = People(\"Jerry\")\n    \n    # 绑定信号和槽\n    tom.speak.connect(jerry.hear) # 默认第一组参数类型\n    jerry.speak[str,int].connect(tom.hear) # 指定参数类型\n    \n    # 发送信号\n    tom.speak.emit(tom.name, \"How old are you?\") # 默认第一组参数类型\n    jerry.speak[str,int].emit(jerry.name, 18) # 指定参数类型\n\n    # 启动应用\n    app.exec_()\n```\n\n## 参考 :  \n* [Qt for Python Signals and Slots](https://wiki.qt.io/Qt_for_Python_Signals_and_Slots)","source":"_posts/Qt-的信号槽机制.md","raw":"---\ntitle: Qt 的信号槽机制\ndate: 2025-02-10 18:33:47\ntags:\n    - Qt\n    - Python\n    - PySide\n---\n\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/basic/02.signal_and_slot.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# Qt的信号槽机制\n信号和槽是Qt对象间信息交流的工具，要使用信号槽机制，则对象的类必须是`QObject`的子类。\n* 当一个信号被绑定到一个槽上之后，每次发送该信号的时候，都会信号的参数调用对应的槽函数\n* 信号和槽是多对多的关系，一个信号可以绑定多个槽，一个槽也可以绑定多个信号\n\n## 信号\n* 通过`QtCore.Signal`类来创建`信号`，其构造参数为每个信号参数的类型\n* 如果要重载信号，则将每一组参数类型写成一个`tuple`或`list`\n\n## 槽\n* 通过`QtCore.Slot`修饰器来创建`槽`，其参数为槽函数的参数类型\n* 如果槽函数有返回值，则需要使用修饰器的`result`参数来指明返回值类型\n* 如果要重载槽，只需要多次使用修饰器修饰器即可\n\n## 连接信号和槽\n* 通过`Signal`的`connect`方法来连接信号和槽\n* 对于重载过的信号，需要使用`[]`来指明使用哪一个重载，否则默认采用第一组参数类型\n\n## 发送信号\n* 通过`Signal`的`emit`方法来发送信号\n* 对于重载过的信号，需要使用`[]`来指明使用哪一个重载，否则默认采用第一组参数类型\n\n```Python\nimport sys\nfrom PySide2 import QtCore\nfrom PySide2.QtCore import QObject,QCoreApplication\n\n# 继承QObject构建我们自己的类\nclass People(QObject) :\n    # 定义信号，参数为 str,str 或 str,int\n    speak = QtCore.Signal((str,str),(str,int))\n    \n    # 构造函数\n    def __init__(self, name, parent=None) :\n        # 调用父类的构造函数，组织对象树\n        super().__init__(parent) \n        self.name = name\n\n    # 定义槽，需要用result指定返回值类型(没有返回值可以省略)\n    @QtCore.Slot(str, str, result=None) # 参数类型为str,str\n    @QtCore.Slot(str, int, result=None) # 或 str,int\n    def hear(self, speaker, text) :\n        print(self.name, \"hear\", speaker, \"speak :\", text)\n\n\nif __name__ == \"__main__\":\n    # 创建应用\n    app = QCoreApplication(sys.argv)\n\n    tom = People(\"Tom\")\n    jerry = People(\"Jerry\")\n    \n    # 绑定信号和槽\n    tom.speak.connect(jerry.hear) # 默认第一组参数类型\n    jerry.speak[str,int].connect(tom.hear) # 指定参数类型\n    \n    # 发送信号\n    tom.speak.emit(tom.name, \"How old are you?\") # 默认第一组参数类型\n    jerry.speak[str,int].emit(jerry.name, 18) # 指定参数类型\n\n    # 启动应用\n    app.exec_()\n```\n\n## 参考 :  \n* [Qt for Python Signals and Slots](https://wiki.qt.io/Qt_for_Python_Signals_and_Slots)","slug":"Qt-的信号槽机制","published":1,"updated":"2025-02-10T10:37:03.185Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t8o000imkin3lss5o2k","content":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/basic/02.signal_and_slot.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"Qt的信号槽机制\"><a href=\"#Qt的信号槽机制\" class=\"headerlink\" title=\"Qt的信号槽机制\"></a>Qt的信号槽机制</h1><p>信号和槽是Qt对象间信息交流的工具，要使用信号槽机制，则对象的类必须是<code>QObject</code>的子类。</p>\n<ul>\n<li>当一个信号被绑定到一个槽上之后，每次发送该信号的时候，都会信号的参数调用对应的槽函数</li>\n<li>信号和槽是多对多的关系，一个信号可以绑定多个槽，一个槽也可以绑定多个信号</li>\n</ul>\n<h2 id=\"信号\"><a href=\"#信号\" class=\"headerlink\" title=\"信号\"></a>信号</h2><ul>\n<li>通过<code>QtCore.Signal</code>类来创建<code>信号</code>，其构造参数为每个信号参数的类型</li>\n<li>如果要重载信号，则将每一组参数类型写成一个<code>tuple</code>或<code>list</code></li>\n</ul>\n<h2 id=\"槽\"><a href=\"#槽\" class=\"headerlink\" title=\"槽\"></a>槽</h2><ul>\n<li>通过<code>QtCore.Slot</code>修饰器来创建<code>槽</code>，其参数为槽函数的参数类型</li>\n<li>如果槽函数有返回值，则需要使用修饰器的<code>result</code>参数来指明返回值类型</li>\n<li>如果要重载槽，只需要多次使用修饰器修饰器即可</li>\n</ul>\n<h2 id=\"连接信号和槽\"><a href=\"#连接信号和槽\" class=\"headerlink\" title=\"连接信号和槽\"></a>连接信号和槽</h2><ul>\n<li>通过<code>Signal</code>的<code>connect</code>方法来连接信号和槽</li>\n<li>对于重载过的信号，需要使用<code>[]</code>来指明使用哪一个重载，否则默认采用第一组参数类型</li>\n</ul>\n<h2 id=\"发送信号\"><a href=\"#发送信号\" class=\"headerlink\" title=\"发送信号\"></a>发送信号</h2><ul>\n<li>通过<code>Signal</code>的<code>emit</code>方法来发送信号</li>\n<li>对于重载过的信号，需要使用<code>[]</code>来指明使用哪一个重载，否则默认采用第一组参数类型</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2 <span class=\"keyword\">import</span> QtCore</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtCore <span class=\"keyword\">import</span> QObject,QCoreApplication</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 继承QObject构建我们自己的类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">People</span>(<span class=\"title class_ inherited__\">QObject</span>) :</span><br><span class=\"line\">    <span class=\"comment\"># 定义信号，参数为 str,str 或 str,int</span></span><br><span class=\"line\">    speak = QtCore.Signal((<span class=\"built_in\">str</span>,<span class=\"built_in\">str</span>),(<span class=\"built_in\">str</span>,<span class=\"built_in\">int</span>))</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\"># 构造函数</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, name, parent=<span class=\"literal\">None</span></span>) :</span><br><span class=\"line\">        <span class=\"comment\"># 调用父类的构造函数，组织对象树</span></span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__(parent) </span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.name = name</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 定义槽，需要用result指定返回值类型(没有返回值可以省略)</span></span><br><span class=\"line\"><span class=\"meta\">    @QtCore.Slot(<span class=\"params\"><span class=\"built_in\">str</span>, <span class=\"built_in\">str</span>, result=<span class=\"literal\">None</span></span>) </span><span class=\"comment\"># 参数类型为str,str</span></span><br><span class=\"line\"><span class=\"meta\">    @QtCore.Slot(<span class=\"params\"><span class=\"built_in\">str</span>, <span class=\"built_in\">int</span>, result=<span class=\"literal\">None</span></span>) </span><span class=\"comment\"># 或 str,int</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">hear</span>(<span class=\"params\">self, speaker, text</span>) :</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"variable language_\">self</span>.name, <span class=\"string\">&quot;hear&quot;</span>, speaker, <span class=\"string\">&quot;speak :&quot;</span>, text)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    <span class=\"comment\"># 创建应用</span></span><br><span class=\"line\">    app = QCoreApplication(sys.argv)</span><br><span class=\"line\"></span><br><span class=\"line\">    tom = People(<span class=\"string\">&quot;Tom&quot;</span>)</span><br><span class=\"line\">    jerry = People(<span class=\"string\">&quot;Jerry&quot;</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\"># 绑定信号和槽</span></span><br><span class=\"line\">    tom.speak.connect(jerry.hear) <span class=\"comment\"># 默认第一组参数类型</span></span><br><span class=\"line\">    jerry.speak[<span class=\"built_in\">str</span>,<span class=\"built_in\">int</span>].connect(tom.hear) <span class=\"comment\"># 指定参数类型</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\"># 发送信号</span></span><br><span class=\"line\">    tom.speak.emit(tom.name, <span class=\"string\">&quot;How old are you?&quot;</span>) <span class=\"comment\"># 默认第一组参数类型</span></span><br><span class=\"line\">    jerry.speak[<span class=\"built_in\">str</span>,<span class=\"built_in\">int</span>].emit(jerry.name, <span class=\"number\">18</span>) <span class=\"comment\"># 指定参数类型</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 启动应用</span></span><br><span class=\"line\">    app.exec_()</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li><a href=\"https://wiki.qt.io/Qt_for_Python_Signals_and_Slots\">Qt for Python Signals and Slots</a></li>\n</ul>\n","excerpt":"","more":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/basic/02.signal_and_slot.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"Qt的信号槽机制\"><a href=\"#Qt的信号槽机制\" class=\"headerlink\" title=\"Qt的信号槽机制\"></a>Qt的信号槽机制</h1><p>信号和槽是Qt对象间信息交流的工具，要使用信号槽机制，则对象的类必须是<code>QObject</code>的子类。</p>\n<ul>\n<li>当一个信号被绑定到一个槽上之后，每次发送该信号的时候，都会信号的参数调用对应的槽函数</li>\n<li>信号和槽是多对多的关系，一个信号可以绑定多个槽，一个槽也可以绑定多个信号</li>\n</ul>\n<h2 id=\"信号\"><a href=\"#信号\" class=\"headerlink\" title=\"信号\"></a>信号</h2><ul>\n<li>通过<code>QtCore.Signal</code>类来创建<code>信号</code>，其构造参数为每个信号参数的类型</li>\n<li>如果要重载信号，则将每一组参数类型写成一个<code>tuple</code>或<code>list</code></li>\n</ul>\n<h2 id=\"槽\"><a href=\"#槽\" class=\"headerlink\" title=\"槽\"></a>槽</h2><ul>\n<li>通过<code>QtCore.Slot</code>修饰器来创建<code>槽</code>，其参数为槽函数的参数类型</li>\n<li>如果槽函数有返回值，则需要使用修饰器的<code>result</code>参数来指明返回值类型</li>\n<li>如果要重载槽，只需要多次使用修饰器修饰器即可</li>\n</ul>\n<h2 id=\"连接信号和槽\"><a href=\"#连接信号和槽\" class=\"headerlink\" title=\"连接信号和槽\"></a>连接信号和槽</h2><ul>\n<li>通过<code>Signal</code>的<code>connect</code>方法来连接信号和槽</li>\n<li>对于重载过的信号，需要使用<code>[]</code>来指明使用哪一个重载，否则默认采用第一组参数类型</li>\n</ul>\n<h2 id=\"发送信号\"><a href=\"#发送信号\" class=\"headerlink\" title=\"发送信号\"></a>发送信号</h2><ul>\n<li>通过<code>Signal</code>的<code>emit</code>方法来发送信号</li>\n<li>对于重载过的信号，需要使用<code>[]</code>来指明使用哪一个重载，否则默认采用第一组参数类型</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2 <span class=\"keyword\">import</span> QtCore</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtCore <span class=\"keyword\">import</span> QObject,QCoreApplication</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 继承QObject构建我们自己的类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">People</span>(<span class=\"title class_ inherited__\">QObject</span>) :</span><br><span class=\"line\">    <span class=\"comment\"># 定义信号，参数为 str,str 或 str,int</span></span><br><span class=\"line\">    speak = QtCore.Signal((<span class=\"built_in\">str</span>,<span class=\"built_in\">str</span>),(<span class=\"built_in\">str</span>,<span class=\"built_in\">int</span>))</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\"># 构造函数</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self, name, parent=<span class=\"literal\">None</span></span>) :</span><br><span class=\"line\">        <span class=\"comment\"># 调用父类的构造函数，组织对象树</span></span><br><span class=\"line\">        <span class=\"built_in\">super</span>().__init__(parent) </span><br><span class=\"line\">        <span class=\"variable language_\">self</span>.name = name</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 定义槽，需要用result指定返回值类型(没有返回值可以省略)</span></span><br><span class=\"line\"><span class=\"meta\">    @QtCore.Slot(<span class=\"params\"><span class=\"built_in\">str</span>, <span class=\"built_in\">str</span>, result=<span class=\"literal\">None</span></span>) </span><span class=\"comment\"># 参数类型为str,str</span></span><br><span class=\"line\"><span class=\"meta\">    @QtCore.Slot(<span class=\"params\"><span class=\"built_in\">str</span>, <span class=\"built_in\">int</span>, result=<span class=\"literal\">None</span></span>) </span><span class=\"comment\"># 或 str,int</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">hear</span>(<span class=\"params\">self, speaker, text</span>) :</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"variable language_\">self</span>.name, <span class=\"string\">&quot;hear&quot;</span>, speaker, <span class=\"string\">&quot;speak :&quot;</span>, text)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    <span class=\"comment\"># 创建应用</span></span><br><span class=\"line\">    app = QCoreApplication(sys.argv)</span><br><span class=\"line\"></span><br><span class=\"line\">    tom = People(<span class=\"string\">&quot;Tom&quot;</span>)</span><br><span class=\"line\">    jerry = People(<span class=\"string\">&quot;Jerry&quot;</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\"># 绑定信号和槽</span></span><br><span class=\"line\">    tom.speak.connect(jerry.hear) <span class=\"comment\"># 默认第一组参数类型</span></span><br><span class=\"line\">    jerry.speak[<span class=\"built_in\">str</span>,<span class=\"built_in\">int</span>].connect(tom.hear) <span class=\"comment\"># 指定参数类型</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\"># 发送信号</span></span><br><span class=\"line\">    tom.speak.emit(tom.name, <span class=\"string\">&quot;How old are you?&quot;</span>) <span class=\"comment\"># 默认第一组参数类型</span></span><br><span class=\"line\">    jerry.speak[<span class=\"built_in\">str</span>,<span class=\"built_in\">int</span>].emit(jerry.name, <span class=\"number\">18</span>) <span class=\"comment\"># 指定参数类型</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 启动应用</span></span><br><span class=\"line\">    app.exec_()</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li><a href=\"https://wiki.qt.io/Qt_for_Python_Signals_and_Slots\">Qt for Python Signals and Slots</a></li>\n</ul>\n"},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"date":"2025-02-10T09:20:37.378Z","updated":"2025-02-10T09:20:37.378Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t8p000jmkinhp86hg2y","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n","excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"title":"加载 QML","date":"2025-02-10T10:35:09.000Z","_content":"\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/00.qml_app_engine.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 加载QML\nQML是在Qt Quick中用来描述GUI界面的声明式脚本语言，并支持嵌入ECMAScript实现一些简单的逻辑。\n> QML主要用于描述界面，复杂的业务逻辑主要由C++或Python来实现。\n\nQML采用如下形式创建对象，并且可以内嵌其他对象 : \n```\n类名 {\n    属性名 : 属性值\n    属性名 : 属性值\n    属性名 : 属性值\n    ...\n}\n```\n* `id`属性是对象的唯一标识符，在每个类中都存在，相当于C++或Python中的对象变量名  \n* QML通过形如`import 模块名 版本号`的形式来加载模块。  \n\n下面是一段QML代码(文件名为`mainwindow.qml`) :  \n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\n\nWindow { // 创建一个窗口对象\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    Rectangle { // 创建一个矩形对象\n        anchors.fill: parent\n        color: \"black\"\n    }\n\n    Text { // 创建一个文本对象\n        anchors.centerIn: parent\n        color: \"white\"\n        text: qsTr(\"Hello World\")\n    }\n}\n```\n* 这段代码创建了一个`Window`对象，将其命名为`mainWindow`，宽度为`640`，高度为`400`。然后在其中嵌入了一个`Rectangle`对象和一个`Text`对象。\n\n然后使用Python程序来加载QML并显示出来 :  \n```Python\nimport sys\nfrom PySide2.QtGui import QGuiApplication\nfrom PySide2.QtQml import QQmlApplicationEngine\n\nif __name__ == \"__main__\":\n    app = QGuiApplication(sys.argv)\n    engine = QQmlApplicationEngine(\"mainwindow.qml\")\n\n    sys.exit(app.exec_())\n```\n\n这就是一个最基本的QML程序。\n* 每一个Qt的应用程序都需要一个Application对象(包含`QCoreApplication`、`QGuiApplication`、`QApplication`)来运行。\n* `QQmlApplicationEngine`对象用来加载运行qml的代码。\n\n运行Python程序 :  \n![运行结果](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master/image/qml/00.qml_app_engine/hello_world.png)\n\n上面的代码采用的是相对路径，如果工作目录不是脚本所在目录就会找不到qml文件，为此我们需要求出qml文件的绝对路径 :  \n```Python\nimport sys, os\nfrom PySide2.QtGui import QGuiApplication\nfrom PySide2.QtQml import QQmlApplicationEngine\n\nif __name__ == \"__main__\":\n    app = QGuiApplication(sys.argv)\n\n    # 得出qml文件的绝对路径\n    file = \"mainwindow.qml\"\n    qml = os.path.abspath(os.path.join(os.path.dirname(__file__), file))\n\n    engine = QQmlApplicationEngine(qml)\n\n    sys.exit(app.exec_())\n```\n\n## 参考 :   \n* QML\n  * [Window](https://doc.qt.io/qt-5/qml-qtquick-window-window.html)\n  * [Rectangle](https://doc.qt.io/qt-5/qml-qtquick-rectangle.html)\n  * [Text](https://doc.qt.io/qt-5/qml-qtquick-text.html)\n* PySide2\n  * [QGuiApplication](https://doc.qt.io/qtforpython/PySide2/QtGui/QGuiApplication.html)  \n  * [QQmlApplicationEngine](https://doc.qt.io/qtforpython/PySide2/QtQml/QQmlApplicationEngine.html)","source":"_posts/加载-QML.md","raw":"---\ntitle: 加载 QML\ndate: 2025-02-10 18:35:09\ntags:\n    - Qt\n    - QML\n    - Python\n    - PySide\n---\n\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/00.qml_app_engine.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 加载QML\nQML是在Qt Quick中用来描述GUI界面的声明式脚本语言，并支持嵌入ECMAScript实现一些简单的逻辑。\n> QML主要用于描述界面，复杂的业务逻辑主要由C++或Python来实现。\n\nQML采用如下形式创建对象，并且可以内嵌其他对象 : \n```\n类名 {\n    属性名 : 属性值\n    属性名 : 属性值\n    属性名 : 属性值\n    ...\n}\n```\n* `id`属性是对象的唯一标识符，在每个类中都存在，相当于C++或Python中的对象变量名  \n* QML通过形如`import 模块名 版本号`的形式来加载模块。  \n\n下面是一段QML代码(文件名为`mainwindow.qml`) :  \n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\n\nWindow { // 创建一个窗口对象\n    id: mainWindow\n    visible: true // 是否可见，请注意默认值是false不可见\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    Rectangle { // 创建一个矩形对象\n        anchors.fill: parent\n        color: \"black\"\n    }\n\n    Text { // 创建一个文本对象\n        anchors.centerIn: parent\n        color: \"white\"\n        text: qsTr(\"Hello World\")\n    }\n}\n```\n* 这段代码创建了一个`Window`对象，将其命名为`mainWindow`，宽度为`640`，高度为`400`。然后在其中嵌入了一个`Rectangle`对象和一个`Text`对象。\n\n然后使用Python程序来加载QML并显示出来 :  \n```Python\nimport sys\nfrom PySide2.QtGui import QGuiApplication\nfrom PySide2.QtQml import QQmlApplicationEngine\n\nif __name__ == \"__main__\":\n    app = QGuiApplication(sys.argv)\n    engine = QQmlApplicationEngine(\"mainwindow.qml\")\n\n    sys.exit(app.exec_())\n```\n\n这就是一个最基本的QML程序。\n* 每一个Qt的应用程序都需要一个Application对象(包含`QCoreApplication`、`QGuiApplication`、`QApplication`)来运行。\n* `QQmlApplicationEngine`对象用来加载运行qml的代码。\n\n运行Python程序 :  \n![运行结果](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master/image/qml/00.qml_app_engine/hello_world.png)\n\n上面的代码采用的是相对路径，如果工作目录不是脚本所在目录就会找不到qml文件，为此我们需要求出qml文件的绝对路径 :  \n```Python\nimport sys, os\nfrom PySide2.QtGui import QGuiApplication\nfrom PySide2.QtQml import QQmlApplicationEngine\n\nif __name__ == \"__main__\":\n    app = QGuiApplication(sys.argv)\n\n    # 得出qml文件的绝对路径\n    file = \"mainwindow.qml\"\n    qml = os.path.abspath(os.path.join(os.path.dirname(__file__), file))\n\n    engine = QQmlApplicationEngine(qml)\n\n    sys.exit(app.exec_())\n```\n\n## 参考 :   \n* QML\n  * [Window](https://doc.qt.io/qt-5/qml-qtquick-window-window.html)\n  * [Rectangle](https://doc.qt.io/qt-5/qml-qtquick-rectangle.html)\n  * [Text](https://doc.qt.io/qt-5/qml-qtquick-text.html)\n* PySide2\n  * [QGuiApplication](https://doc.qt.io/qtforpython/PySide2/QtGui/QGuiApplication.html)  \n  * [QQmlApplicationEngine](https://doc.qt.io/qtforpython/PySide2/QtQml/QQmlApplicationEngine.html)","slug":"加载-QML","published":1,"updated":"2025-02-10T10:41:43.286Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t8q000kmkin6wt14n5i","content":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/00.qml_app_engine.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"加载QML\"><a href=\"#加载QML\" class=\"headerlink\" title=\"加载QML\"></a>加载QML</h1><p>QML是在Qt Quick中用来描述GUI界面的声明式脚本语言，并支持嵌入ECMAScript实现一些简单的逻辑。</p>\n<blockquote>\n<p>QML主要用于描述界面，复杂的业务逻辑主要由C++或Python来实现。</p>\n</blockquote>\n<p>QML采用如下形式创建对象，并且可以内嵌其他对象 : </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">类名 &#123;</span><br><span class=\"line\">    属性名 : 属性值</span><br><span class=\"line\">    属性名 : 属性值</span><br><span class=\"line\">    属性名 : 属性值</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>id</code>属性是对象的唯一标识符，在每个类中都存在，相当于C++或Python中的对象变量名  </li>\n<li>QML通过形如<code>import 模块名 版本号</code>的形式来加载模块。</li>\n</ul>\n<p>下面是一段QML代码(文件名为<code>mainwindow.qml</code>) :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123; <span class=\"comment\">// 创建一个窗口对象</span></span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Rectangle</span> &#123; <span class=\"comment\">// 创建一个矩形对象</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">color</span>: <span class=\"string\">&quot;black&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Text</span> &#123; <span class=\"comment\">// 创建一个文本对象</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.centerIn</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">color</span>: <span class=\"string\">&quot;white&quot;</span></span><br><span class=\"line\">        <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;Hello World&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>这段代码创建了一个<code>Window</code>对象，将其命名为<code>mainWindow</code>，宽度为<code>640</code>，高度为<code>400</code>。然后在其中嵌入了一个<code>Rectangle</code>对象和一个<code>Text</code>对象。</li>\n</ul>\n<p>然后使用Python程序来加载QML并显示出来 :  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtGui <span class=\"keyword\">import</span> QGuiApplication</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtQml <span class=\"keyword\">import</span> QQmlApplicationEngine</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app = QGuiApplication(sys.argv)</span><br><span class=\"line\">    engine = QQmlApplicationEngine(<span class=\"string\">&quot;mainwindow.qml&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n\n<p>这就是一个最基本的QML程序。</p>\n<ul>\n<li>每一个Qt的应用程序都需要一个Application对象(包含<code>QCoreApplication</code>、<code>QGuiApplication</code>、<code>QApplication</code>)来运行。</li>\n<li><code>QQmlApplicationEngine</code>对象用来加载运行qml的代码。</li>\n</ul>\n<p>运行Python程序 :<br><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master/image/qml/00.qml_app_engine/hello_world.png\" alt=\"运行结果\"></p>\n<p>上面的代码采用的是相对路径，如果工作目录不是脚本所在目录就会找不到qml文件，为此我们需要求出qml文件的绝对路径 :  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> sys, os</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtGui <span class=\"keyword\">import</span> QGuiApplication</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtQml <span class=\"keyword\">import</span> QQmlApplicationEngine</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app = QGuiApplication(sys.argv)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 得出qml文件的绝对路径</span></span><br><span class=\"line\">    file = <span class=\"string\">&quot;mainwindow.qml&quot;</span></span><br><span class=\"line\">    qml = os.path.abspath(os.path.join(os.path.dirname(__file__), file))</span><br><span class=\"line\"></span><br><span class=\"line\">    engine = QQmlApplicationEngine(qml)</span><br><span class=\"line\"></span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li>QML<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-window-window.html\">Window</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-rectangle.html\">Rectangle</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-text.html\">Text</a></li>\n</ul>\n</li>\n<li>PySide2<ul>\n<li><a href=\"https://doc.qt.io/qtforpython/PySide2/QtGui/QGuiApplication.html\">QGuiApplication</a>  </li>\n<li><a href=\"https://doc.qt.io/qtforpython/PySide2/QtQml/QQmlApplicationEngine.html\">QQmlApplicationEngine</a></li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/00.qml_app_engine.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"加载QML\"><a href=\"#加载QML\" class=\"headerlink\" title=\"加载QML\"></a>加载QML</h1><p>QML是在Qt Quick中用来描述GUI界面的声明式脚本语言，并支持嵌入ECMAScript实现一些简单的逻辑。</p>\n<blockquote>\n<p>QML主要用于描述界面，复杂的业务逻辑主要由C++或Python来实现。</p>\n</blockquote>\n<p>QML采用如下形式创建对象，并且可以内嵌其他对象 : </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">类名 &#123;</span><br><span class=\"line\">    属性名 : 属性值</span><br><span class=\"line\">    属性名 : 属性值</span><br><span class=\"line\">    属性名 : 属性值</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>id</code>属性是对象的唯一标识符，在每个类中都存在，相当于C++或Python中的对象变量名  </li>\n<li>QML通过形如<code>import 模块名 版本号</code>的形式来加载模块。</li>\n</ul>\n<p>下面是一段QML代码(文件名为<code>mainwindow.qml</code>) :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123; <span class=\"comment\">// 创建一个窗口对象</span></span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 是否可见，请注意默认值是false不可见</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Rectangle</span> &#123; <span class=\"comment\">// 创建一个矩形对象</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">color</span>: <span class=\"string\">&quot;black&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">Text</span> &#123; <span class=\"comment\">// 创建一个文本对象</span></span><br><span class=\"line\">        <span class=\"attribute\">anchors.centerIn</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\">        <span class=\"attribute\">color</span>: <span class=\"string\">&quot;white&quot;</span></span><br><span class=\"line\">        <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;Hello World&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>这段代码创建了一个<code>Window</code>对象，将其命名为<code>mainWindow</code>，宽度为<code>640</code>，高度为<code>400</code>。然后在其中嵌入了一个<code>Rectangle</code>对象和一个<code>Text</code>对象。</li>\n</ul>\n<p>然后使用Python程序来加载QML并显示出来 :  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtGui <span class=\"keyword\">import</span> QGuiApplication</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtQml <span class=\"keyword\">import</span> QQmlApplicationEngine</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app = QGuiApplication(sys.argv)</span><br><span class=\"line\">    engine = QQmlApplicationEngine(<span class=\"string\">&quot;mainwindow.qml&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n\n<p>这就是一个最基本的QML程序。</p>\n<ul>\n<li>每一个Qt的应用程序都需要一个Application对象(包含<code>QCoreApplication</code>、<code>QGuiApplication</code>、<code>QApplication</code>)来运行。</li>\n<li><code>QQmlApplicationEngine</code>对象用来加载运行qml的代码。</li>\n</ul>\n<p>运行Python程序 :<br><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master/image/qml/00.qml_app_engine/hello_world.png\" alt=\"运行结果\"></p>\n<p>上面的代码采用的是相对路径，如果工作目录不是脚本所在目录就会找不到qml文件，为此我们需要求出qml文件的绝对路径 :  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> sys, os</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtGui <span class=\"keyword\">import</span> QGuiApplication</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtQml <span class=\"keyword\">import</span> QQmlApplicationEngine</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app = QGuiApplication(sys.argv)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 得出qml文件的绝对路径</span></span><br><span class=\"line\">    file = <span class=\"string\">&quot;mainwindow.qml&quot;</span></span><br><span class=\"line\">    qml = os.path.abspath(os.path.join(os.path.dirname(__file__), file))</span><br><span class=\"line\"></span><br><span class=\"line\">    engine = QQmlApplicationEngine(qml)</span><br><span class=\"line\"></span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li>QML<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-window-window.html\">Window</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-rectangle.html\">Rectangle</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-text.html\">Text</a></li>\n</ul>\n</li>\n<li>PySide2<ul>\n<li><a href=\"https://doc.qt.io/qtforpython/PySide2/QtGui/QGuiApplication.html\">QGuiApplication</a>  </li>\n<li><a href=\"https://doc.qt.io/qtforpython/PySide2/QtQml/QQmlApplicationEngine.html\">QQmlApplicationEngine</a></li>\n</ul>\n</li>\n</ul>\n"},{"title":"在 QML 中使用信号槽","date":"2025-02-10T10:40:06.000Z","_content":"\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/02.qml_signal_and_slot.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 在QML中使用信号槽\n[Qt信号槽机制](/note/basic/02.signal_and_slot.md)在前文中已经介绍过，本小节介绍QML中的信号槽机制。  \n\n在QML里，信号和槽必须遵守驼峰命名法，名为`signalName`的信号，自动连接到相同元素中名为`onSignalName`的槽函数(也称为`信号处理器`，采用[QML扩展的JavaScript](https://doc.qt.io/qt-5/qtqml-javascript-topic.html))。  \n例如`Button`元素有如下七个信号和对应的槽函数 :  \n\n| 信号              | 槽                | 说明                                                        |\n| :-:               | :-:               | :-                                                         |\n| `canceled`        | `onCanceled`      | 在按钮上按下鼠标左键后，将鼠标移出按钮后松开时发送该信号        |\n| `clicked`         | `onClicked`       | 在按钮上单击鼠标左键时发送该信号                     |\n| `doubleClicked`   | `onDoubleClicked` | 在按钮上双击鼠标左键时发送该信号                              |\n| `pressAndHold`    | `onPressAndHold`  | 在按钮上长按鼠标左键时发送该信号                              |\n| `pressed`         | `onPressed`       | 在按钮上按下鼠标左键时发送该信号                              |\n| `released`        | `onReleased`      | 在按钮上松开鼠标左键时发送该信号                              |\n| `toggled`         | `onToggled`       | 当`checkable`按钮切换状态时发送该信号                        |\n\n下面代码在点击按钮时，会随机改变`rect`的颜色 :  \n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    ColumnLayout {\n        anchors.fill: parent\n\n        Rectangle {\n            id: rect\n            Layout.fillWidth: true\n            Layout.preferredHeight: 300\n            color: \"black\"\n        }\n\n        Button {\n            width: 640\n            text: qsTr(\"BUTTON\")\n            Layout.fillWidth: true\n            Layout.fillHeight: true\n            onClicked : {\n                // 将rect的颜色设为随机值\n                rect.color = Qt.rgba(Math.random(),Math.random(),Math.random(),1)\n            }\n        }\n    }\n}\n```\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/02.qml_signal_and_slot/button.png)\n\n## 自定义信号\n在QML中，可以通过`signal`关键字来定义信号，下面代码在为`rect`定义了名为`colorChanged`的信号和与其连接的`onColorChanged`槽，功能和之前一样，也是点击按钮时随机修改`rect`的颜色 :  \n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    ColumnLayout {\n        anchors.fill: parent\n\n        Rectangle {\n            id: rect\n            Layout.fillWidth: true\n            Layout.preferredHeight: 300\n            color: \"black\"\n\n            // 定义信号\n            signal colorChanged(double r, double g, double b)\n            // 对应的槽\n            onColorChanged: function(r, g, b) {\n                rect.color = Qt.rgba(r, g, b, 1)\n            }\n        }\n\n        Button {\n            width: 640\n            text: qsTr(\"BUTTON\")\n            Layout.fillWidth: true\n            Layout.fillHeight: true\n            onClicked : {\n                // rect发送colorChanged信号\n                rect.colorChanged(Math.random(), Math.random(), Math.random())\n            }\n        }\n    }\n}\n```\n\n## 连接信号  \n使用`Connections`元素(需要`import QtQml 2.13`)，可以将信号连接到元素之外的信号处理器，并且可以连接多个信号处理器。\n```QML\nConnections {\n    target:          // 信号发出者的id\n    on<SignalName>:  // 信号处理器函数\n}\n```\n\n下面代码和之前差不多，创建了两个Rectangle，在点击按钮时，两个Rectangle都会被随机更改颜色 :  \n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\nimport QtQml 2.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    ColumnLayout {\n        anchors.fill: parent\n\n        RowLayout {\n            Layout.fillWidth: true\n            Layout.preferredHeight: 300\n\n            Rectangle {\n                id: rect1\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"black\"\n                // 连接信号槽\n                Connections {\n                    target: button // 信号发出者的id\n                    onClicked: {   // clicked信号的槽\n                        rect1.color = Qt.rgba(Math.random(), Math.random(), Math.random(), 1)\n                    }\n                }\n            }\n\n            Rectangle {\n                id: rect2\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"black\"\n                // 连接信号槽\n                Connections {\n                    target: button // 信号发出者的id\n                    onClicked: {   // clicked信号的槽\n                        rect2.color = Qt.rgba(Math.random(), Math.random(), Math.random(), 1)\n                    }\n                }\n            }\n        }\n\n        Button {\n            id: button\n            width: 640\n            text: qsTr(\"BUTTON\")\n            Layout.fillWidth: true\n            Layout.fillHeight: true\n        }\n    }\n}\n```\n\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/02.qml_signal_and_slot/connect.png)\n\n## 参考 :  \n* QML\n  * [AbstractButton](https://doc.qt.io/qt-5/qml-qtquick-controls2-abstractbutton.html)\n  * [Button](https://doc.qt.io/qt-5/qml-qtquick-controls2-button.html)\n  * [Connections](https://doc.qt.io/qt-5/qml-qtqml-connections.html)","source":"_posts/在-QML-中使用信号槽.md","raw":"---\ntitle: 在 QML 中使用信号槽\ndate: 2025-02-10 18:40:06\ntags:\n    - Qt\n    - QML\n    - Python\n    - PySide\n---\n\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/02.qml_signal_and_slot.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 在QML中使用信号槽\n[Qt信号槽机制](/note/basic/02.signal_and_slot.md)在前文中已经介绍过，本小节介绍QML中的信号槽机制。  \n\n在QML里，信号和槽必须遵守驼峰命名法，名为`signalName`的信号，自动连接到相同元素中名为`onSignalName`的槽函数(也称为`信号处理器`，采用[QML扩展的JavaScript](https://doc.qt.io/qt-5/qtqml-javascript-topic.html))。  \n例如`Button`元素有如下七个信号和对应的槽函数 :  \n\n| 信号              | 槽                | 说明                                                        |\n| :-:               | :-:               | :-                                                         |\n| `canceled`        | `onCanceled`      | 在按钮上按下鼠标左键后，将鼠标移出按钮后松开时发送该信号        |\n| `clicked`         | `onClicked`       | 在按钮上单击鼠标左键时发送该信号                     |\n| `doubleClicked`   | `onDoubleClicked` | 在按钮上双击鼠标左键时发送该信号                              |\n| `pressAndHold`    | `onPressAndHold`  | 在按钮上长按鼠标左键时发送该信号                              |\n| `pressed`         | `onPressed`       | 在按钮上按下鼠标左键时发送该信号                              |\n| `released`        | `onReleased`      | 在按钮上松开鼠标左键时发送该信号                              |\n| `toggled`         | `onToggled`       | 当`checkable`按钮切换状态时发送该信号                        |\n\n下面代码在点击按钮时，会随机改变`rect`的颜色 :  \n\n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    ColumnLayout {\n        anchors.fill: parent\n\n        Rectangle {\n            id: rect\n            Layout.fillWidth: true\n            Layout.preferredHeight: 300\n            color: \"black\"\n        }\n\n        Button {\n            width: 640\n            text: qsTr(\"BUTTON\")\n            Layout.fillWidth: true\n            Layout.fillHeight: true\n            onClicked : {\n                // 将rect的颜色设为随机值\n                rect.color = Qt.rgba(Math.random(),Math.random(),Math.random(),1)\n            }\n        }\n    }\n}\n```\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/02.qml_signal_and_slot/button.png)\n\n## 自定义信号\n在QML中，可以通过`signal`关键字来定义信号，下面代码在为`rect`定义了名为`colorChanged`的信号和与其连接的`onColorChanged`槽，功能和之前一样，也是点击按钮时随机修改`rect`的颜色 :  \n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    ColumnLayout {\n        anchors.fill: parent\n\n        Rectangle {\n            id: rect\n            Layout.fillWidth: true\n            Layout.preferredHeight: 300\n            color: \"black\"\n\n            // 定义信号\n            signal colorChanged(double r, double g, double b)\n            // 对应的槽\n            onColorChanged: function(r, g, b) {\n                rect.color = Qt.rgba(r, g, b, 1)\n            }\n        }\n\n        Button {\n            width: 640\n            text: qsTr(\"BUTTON\")\n            Layout.fillWidth: true\n            Layout.fillHeight: true\n            onClicked : {\n                // rect发送colorChanged信号\n                rect.colorChanged(Math.random(), Math.random(), Math.random())\n            }\n        }\n    }\n}\n```\n\n## 连接信号  \n使用`Connections`元素(需要`import QtQml 2.13`)，可以将信号连接到元素之外的信号处理器，并且可以连接多个信号处理器。\n```QML\nConnections {\n    target:          // 信号发出者的id\n    on<SignalName>:  // 信号处理器函数\n}\n```\n\n下面代码和之前差不多，创建了两个Rectangle，在点击按钮时，两个Rectangle都会被随机更改颜色 :  \n```QML\nimport QtQuick 2.13\nimport QtQuick.Window 2.13\nimport QtQuick.Controls 2.5\nimport QtQuick.Layouts 1.13\nimport QtQml 2.13\n\nWindow {\n    id: mainWindow\n    visible: true\n    width: 640\n    height: 400\n    title: qsTr(\"PySide2 QML\")\n\n    ColumnLayout {\n        anchors.fill: parent\n\n        RowLayout {\n            Layout.fillWidth: true\n            Layout.preferredHeight: 300\n\n            Rectangle {\n                id: rect1\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"black\"\n                // 连接信号槽\n                Connections {\n                    target: button // 信号发出者的id\n                    onClicked: {   // clicked信号的槽\n                        rect1.color = Qt.rgba(Math.random(), Math.random(), Math.random(), 1)\n                    }\n                }\n            }\n\n            Rectangle {\n                id: rect2\n                Layout.fillWidth: true\n                Layout.fillHeight: true\n                color: \"black\"\n                // 连接信号槽\n                Connections {\n                    target: button // 信号发出者的id\n                    onClicked: {   // clicked信号的槽\n                        rect2.color = Qt.rgba(Math.random(), Math.random(), Math.random(), 1)\n                    }\n                }\n            }\n        }\n\n        Button {\n            id: button\n            width: 640\n            text: qsTr(\"BUTTON\")\n            Layout.fillWidth: true\n            Layout.fillHeight: true\n        }\n    }\n}\n```\n\n![Image](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/02.qml_signal_and_slot/connect.png)\n\n## 参考 :  \n* QML\n  * [AbstractButton](https://doc.qt.io/qt-5/qml-qtquick-controls2-abstractbutton.html)\n  * [Button](https://doc.qt.io/qt-5/qml-qtquick-controls2-button.html)\n  * [Connections](https://doc.qt.io/qt-5/qml-qtqml-connections.html)","slug":"在-QML-中使用信号槽","published":1,"updated":"2025-02-10T10:55:58.297Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t8r000mmkind2458rnx","content":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/02.qml_signal_and_slot.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"在QML中使用信号槽\"><a href=\"#在QML中使用信号槽\" class=\"headerlink\" title=\"在QML中使用信号槽\"></a>在QML中使用信号槽</h1><p><a href=\"/note/basic/02.signal_and_slot.md\">Qt信号槽机制</a>在前文中已经介绍过，本小节介绍QML中的信号槽机制。  </p>\n<p>在QML里，信号和槽必须遵守驼峰命名法，名为<code>signalName</code>的信号，自动连接到相同元素中名为<code>onSignalName</code>的槽函数(也称为<code>信号处理器</code>，采用<a href=\"https://doc.qt.io/qt-5/qtqml-javascript-topic.html\">QML扩展的JavaScript</a>)。<br>例如<code>Button</code>元素有如下七个信号和对应的槽函数 :  </p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">信号</th>\n<th align=\"center\">槽</th>\n<th align=\"left\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"><code>canceled</code></td>\n<td align=\"center\"><code>onCanceled</code></td>\n<td align=\"left\">在按钮上按下鼠标左键后，将鼠标移出按钮后松开时发送该信号</td>\n</tr>\n<tr>\n<td align=\"center\"><code>clicked</code></td>\n<td align=\"center\"><code>onClicked</code></td>\n<td align=\"left\">在按钮上单击鼠标左键时发送该信号</td>\n</tr>\n<tr>\n<td align=\"center\"><code>doubleClicked</code></td>\n<td align=\"center\"><code>onDoubleClicked</code></td>\n<td align=\"left\">在按钮上双击鼠标左键时发送该信号</td>\n</tr>\n<tr>\n<td align=\"center\"><code>pressAndHold</code></td>\n<td align=\"center\"><code>onPressAndHold</code></td>\n<td align=\"left\">在按钮上长按鼠标左键时发送该信号</td>\n</tr>\n<tr>\n<td align=\"center\"><code>pressed</code></td>\n<td align=\"center\"><code>onPressed</code></td>\n<td align=\"left\">在按钮上按下鼠标左键时发送该信号</td>\n</tr>\n<tr>\n<td align=\"center\"><code>released</code></td>\n<td align=\"center\"><code>onReleased</code></td>\n<td align=\"left\">在按钮上松开鼠标左键时发送该信号</td>\n</tr>\n<tr>\n<td align=\"center\"><code>toggled</code></td>\n<td align=\"center\"><code>onToggled</code></td>\n<td align=\"left\">当<code>checkable</code>按钮切换状态时发送该信号</td>\n</tr>\n</tbody></table>\n<p>下面代码在点击按钮时，会随机改变<code>rect</code>的颜色 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">ColumnLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> rect</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.preferredHeight</span>: <span class=\"number\">300</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>: <span class=\"string\">&quot;black&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;BUTTON&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">onClicked</span> : &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 将rect的颜色设为随机值</span></span><br><span class=\"line\">                <span class=\"built_in\">rect</span>.color = Qt.rgba(<span class=\"built_in\">Math</span>.random(),<span class=\"built_in\">Math</span>.random(),<span class=\"built_in\">Math</span>.random(),<span class=\"number\">1</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/02.qml_signal_and_slot/button.png\" alt=\"Image\"></p>\n<h2 id=\"自定义信号\"><a href=\"#自定义信号\" class=\"headerlink\" title=\"自定义信号\"></a>自定义信号</h2><p>在QML中，可以通过<code>signal</code>关键字来定义信号，下面代码在为<code>rect</code>定义了名为<code>colorChanged</code>的信号和与其连接的<code>onColorChanged</code>槽，功能和之前一样，也是点击按钮时随机修改<code>rect</code>的颜色 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">ColumnLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> rect</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.preferredHeight</span>: <span class=\"number\">300</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>: <span class=\"string\">&quot;black&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 定义信号</span></span><br><span class=\"line\">            <span class=\"keyword\">signal</span><span class=\"string\"> colorChanged</span>(<span class=\"built_in\">double</span> r, <span class=\"built_in\">double</span> g, <span class=\"built_in\">double</span> b)</span><br><span class=\"line\">            <span class=\"comment\">// 对应的槽</span></span><br><span class=\"line\">            <span class=\"attribute\">onColorChanged</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">r, g, b</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"built_in\">rect</span>.color = Qt.rgba(r, g, b, <span class=\"number\">1</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;BUTTON&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">onClicked</span> : &#123;</span><br><span class=\"line\">                <span class=\"comment\">// rect发送colorChanged信号</span></span><br><span class=\"line\">                <span class=\"built_in\">rect</span>.colorChanged(<span class=\"built_in\">Math</span>.random(), <span class=\"built_in\">Math</span>.random(), <span class=\"built_in\">Math</span>.random())</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"连接信号\"><a href=\"#连接信号\" class=\"headerlink\" title=\"连接信号\"></a>连接信号</h2><p>使用<code>Connections</code>元素(需要<code>import QtQml 2.13</code>)，可以将信号连接到元素之外的信号处理器，并且可以连接多个信号处理器。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">Connections</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">target</span>:          <span class=\"comment\">// 信号发出者的id</span></span><br><span class=\"line\">    <span class=\"keyword\">on</span>&lt;SignalName&gt;:  <span class=\"comment\">// 信号处理器函数</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>下面代码和之前差不多，创建了两个Rectangle，在点击按钮时，两个Rectangle都会被随机更改颜色 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQml <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">ColumnLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">RowLayout</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.preferredHeight</span>: <span class=\"number\">300</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">id:</span><span class=\"string\"> rect1</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;black&quot;</span></span><br><span class=\"line\">                <span class=\"comment\">// 连接信号槽</span></span><br><span class=\"line\">                <span class=\"title\">Connections</span> &#123;</span><br><span class=\"line\">                    <span class=\"attribute\">target</span>: button <span class=\"comment\">// 信号发出者的id</span></span><br><span class=\"line\">                    <span class=\"attribute\">onClicked</span>: &#123;   <span class=\"comment\">// clicked信号的槽</span></span><br><span class=\"line\">                        rect1.color = Qt.rgba(<span class=\"built_in\">Math</span>.random(), <span class=\"built_in\">Math</span>.random(), <span class=\"built_in\">Math</span>.random(), <span class=\"number\">1</span>)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">id:</span><span class=\"string\"> rect2</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;black&quot;</span></span><br><span class=\"line\">                <span class=\"comment\">// 连接信号槽</span></span><br><span class=\"line\">                <span class=\"title\">Connections</span> &#123;</span><br><span class=\"line\">                    <span class=\"attribute\">target</span>: button <span class=\"comment\">// 信号发出者的id</span></span><br><span class=\"line\">                    <span class=\"attribute\">onClicked</span>: &#123;   <span class=\"comment\">// clicked信号的槽</span></span><br><span class=\"line\">                        rect2.color = Qt.rgba(<span class=\"built_in\">Math</span>.random(), <span class=\"built_in\">Math</span>.random(), <span class=\"built_in\">Math</span>.random(), <span class=\"number\">1</span>)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> button</span></span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;BUTTON&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/02.qml_signal_and_slot/connect.png\" alt=\"Image\"></p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li>QML<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-abstractbutton.html\">AbstractButton</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-button.html\">Button</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtqml-connections.html\">Connections</a></li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/qml/02.qml_signal_and_slot.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"在QML中使用信号槽\"><a href=\"#在QML中使用信号槽\" class=\"headerlink\" title=\"在QML中使用信号槽\"></a>在QML中使用信号槽</h1><p><a href=\"/note/basic/02.signal_and_slot.md\">Qt信号槽机制</a>在前文中已经介绍过，本小节介绍QML中的信号槽机制。  </p>\n<p>在QML里，信号和槽必须遵守驼峰命名法，名为<code>signalName</code>的信号，自动连接到相同元素中名为<code>onSignalName</code>的槽函数(也称为<code>信号处理器</code>，采用<a href=\"https://doc.qt.io/qt-5/qtqml-javascript-topic.html\">QML扩展的JavaScript</a>)。<br>例如<code>Button</code>元素有如下七个信号和对应的槽函数 :  </p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">信号</th>\n<th align=\"center\">槽</th>\n<th align=\"left\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"><code>canceled</code></td>\n<td align=\"center\"><code>onCanceled</code></td>\n<td align=\"left\">在按钮上按下鼠标左键后，将鼠标移出按钮后松开时发送该信号</td>\n</tr>\n<tr>\n<td align=\"center\"><code>clicked</code></td>\n<td align=\"center\"><code>onClicked</code></td>\n<td align=\"left\">在按钮上单击鼠标左键时发送该信号</td>\n</tr>\n<tr>\n<td align=\"center\"><code>doubleClicked</code></td>\n<td align=\"center\"><code>onDoubleClicked</code></td>\n<td align=\"left\">在按钮上双击鼠标左键时发送该信号</td>\n</tr>\n<tr>\n<td align=\"center\"><code>pressAndHold</code></td>\n<td align=\"center\"><code>onPressAndHold</code></td>\n<td align=\"left\">在按钮上长按鼠标左键时发送该信号</td>\n</tr>\n<tr>\n<td align=\"center\"><code>pressed</code></td>\n<td align=\"center\"><code>onPressed</code></td>\n<td align=\"left\">在按钮上按下鼠标左键时发送该信号</td>\n</tr>\n<tr>\n<td align=\"center\"><code>released</code></td>\n<td align=\"center\"><code>onReleased</code></td>\n<td align=\"left\">在按钮上松开鼠标左键时发送该信号</td>\n</tr>\n<tr>\n<td align=\"center\"><code>toggled</code></td>\n<td align=\"center\"><code>onToggled</code></td>\n<td align=\"left\">当<code>checkable</code>按钮切换状态时发送该信号</td>\n</tr>\n</tbody></table>\n<p>下面代码在点击按钮时，会随机改变<code>rect</code>的颜色 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">ColumnLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> rect</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.preferredHeight</span>: <span class=\"number\">300</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>: <span class=\"string\">&quot;black&quot;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;BUTTON&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">onClicked</span> : &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 将rect的颜色设为随机值</span></span><br><span class=\"line\">                <span class=\"built_in\">rect</span>.color = Qt.rgba(<span class=\"built_in\">Math</span>.random(),<span class=\"built_in\">Math</span>.random(),<span class=\"built_in\">Math</span>.random(),<span class=\"number\">1</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/02.qml_signal_and_slot/button.png\" alt=\"Image\"></p>\n<h2 id=\"自定义信号\"><a href=\"#自定义信号\" class=\"headerlink\" title=\"自定义信号\"></a>自定义信号</h2><p>在QML中，可以通过<code>signal</code>关键字来定义信号，下面代码在为<code>rect</code>定义了名为<code>colorChanged</code>的信号和与其连接的<code>onColorChanged</code>槽，功能和之前一样，也是点击按钮时随机修改<code>rect</code>的颜色 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">ColumnLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> rect</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.preferredHeight</span>: <span class=\"number\">300</span></span><br><span class=\"line\">            <span class=\"attribute\">color</span>: <span class=\"string\">&quot;black&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 定义信号</span></span><br><span class=\"line\">            <span class=\"keyword\">signal</span><span class=\"string\"> colorChanged</span>(<span class=\"built_in\">double</span> r, <span class=\"built_in\">double</span> g, <span class=\"built_in\">double</span> b)</span><br><span class=\"line\">            <span class=\"comment\">// 对应的槽</span></span><br><span class=\"line\">            <span class=\"attribute\">onColorChanged</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">r, g, b</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"built_in\">rect</span>.color = Qt.rgba(r, g, b, <span class=\"number\">1</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;BUTTON&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">onClicked</span> : &#123;</span><br><span class=\"line\">                <span class=\"comment\">// rect发送colorChanged信号</span></span><br><span class=\"line\">                <span class=\"built_in\">rect</span>.colorChanged(<span class=\"built_in\">Math</span>.random(), <span class=\"built_in\">Math</span>.random(), <span class=\"built_in\">Math</span>.random())</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"连接信号\"><a href=\"#连接信号\" class=\"headerlink\" title=\"连接信号\"></a>连接信号</h2><p>使用<code>Connections</code>元素(需要<code>import QtQml 2.13</code>)，可以将信号连接到元素之外的信号处理器，并且可以连接多个信号处理器。</p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title\">Connections</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">target</span>:          <span class=\"comment\">// 信号发出者的id</span></span><br><span class=\"line\">    <span class=\"keyword\">on</span>&lt;SignalName&gt;:  <span class=\"comment\">// 信号处理器函数</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>下面代码和之前差不多，创建了两个Rectangle，在点击按钮时，两个Rectangle都会被随机更改颜色 :  </p>\n<figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> QtQuick <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Window <span class=\"number\">2.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Controls <span class=\"number\">2.5</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQuick.Layouts <span class=\"number\">1.13</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> QtQml <span class=\"number\">2.13</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title\">Window</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">id:</span><span class=\"string\"> mainWindow</span></span><br><span class=\"line\">    <span class=\"attribute\">visible</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">400</span></span><br><span class=\"line\">    <span class=\"attribute\">title</span>: qsTr(<span class=\"string\">&quot;PySide2 QML&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"title\">ColumnLayout</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">anchors.fill</span>: <span class=\"built_in\">parent</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">RowLayout</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.preferredHeight</span>: <span class=\"number\">300</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">id:</span><span class=\"string\"> rect1</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;black&quot;</span></span><br><span class=\"line\">                <span class=\"comment\">// 连接信号槽</span></span><br><span class=\"line\">                <span class=\"title\">Connections</span> &#123;</span><br><span class=\"line\">                    <span class=\"attribute\">target</span>: button <span class=\"comment\">// 信号发出者的id</span></span><br><span class=\"line\">                    <span class=\"attribute\">onClicked</span>: &#123;   <span class=\"comment\">// clicked信号的槽</span></span><br><span class=\"line\">                        rect1.color = Qt.rgba(<span class=\"built_in\">Math</span>.random(), <span class=\"built_in\">Math</span>.random(), <span class=\"built_in\">Math</span>.random(), <span class=\"number\">1</span>)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"title\">Rectangle</span> &#123;</span><br><span class=\"line\">                <span class=\"attribute\">id:</span><span class=\"string\"> rect2</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">                <span class=\"attribute\">color</span>: <span class=\"string\">&quot;black&quot;</span></span><br><span class=\"line\">                <span class=\"comment\">// 连接信号槽</span></span><br><span class=\"line\">                <span class=\"title\">Connections</span> &#123;</span><br><span class=\"line\">                    <span class=\"attribute\">target</span>: button <span class=\"comment\">// 信号发出者的id</span></span><br><span class=\"line\">                    <span class=\"attribute\">onClicked</span>: &#123;   <span class=\"comment\">// clicked信号的槽</span></span><br><span class=\"line\">                        rect2.color = Qt.rgba(<span class=\"built_in\">Math</span>.random(), <span class=\"built_in\">Math</span>.random(), <span class=\"built_in\">Math</span>.random(), <span class=\"number\">1</span>)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"title\">Button</span> &#123;</span><br><span class=\"line\">            <span class=\"attribute\">id:</span><span class=\"string\"> button</span></span><br><span class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">640</span></span><br><span class=\"line\">            <span class=\"attribute\">text</span>: qsTr(<span class=\"string\">&quot;BUTTON&quot;</span>)</span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillWidth</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">            <span class=\"attribute\">Layout.fillHeight</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master//image/qml/02.qml_signal_and_slot/connect.png\" alt=\"Image\"></p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考 :\"></a>参考 :</h2><ul>\n<li>QML<ul>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-abstractbutton.html\">AbstractButton</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtquick-controls2-button.html\">Button</a></li>\n<li><a href=\"https://doc.qt.io/qt-5/qml-qtqml-connections.html\">Connections</a></li>\n</ul>\n</li>\n</ul>\n"},{"title":"安装 PySide","date":"2025-02-10T10:26:54.000Z","_content":"\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/basic/00.install_pyside2.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 安装PySide2\n\n打开Qt官网的下载页面([https://download.qt.io/](https://download.qt.io/))，下载对应版本的wheel包。  \n\n* pyside2 : 包含Qt库的所有PySide2模块，依赖shiboken2包。\n* shiboken2 : 包含shiboken2模块和PySide2辅助功能。\n* shiboken2_generator : 用于由C++代码生成Python绑定的工具。\n\n> 使用PySide2不需要安装shiboken2_generator，它是用来从零构建PySide2的。\n\n部分版本的下载页面连接 :  \n\n|包|OS|Python|Bit| 下载页面 |\n|:-:|:-:|:-:|:-:|:-:|\n|shiboken2|Windows|Python3|32-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win32.whl.mirrorlist)|\n|pyside2|Windows|Python3|32-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win32.whl.mirrorlist)|\n|shiboken2|Windows|Python3|64-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win_amd64.whl.mirrorlist)|\n|pyside2|Windows|Python3|64-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win_amd64.whl.mirrorlist)|\n|shiboken2|Linux|Python3|64-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-manylinux1_x86_64.whl.mirrorlist)|\n|pyside2|Linux|Python3|64-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-manylinux1_x86_64.whl.mirrorlist)|\n|shiboken2|Mac OS X|Python3|64-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-macosx_10_12_intel.whl.mirrorlist)|\n|pyside2|Mac OS X|Python3|64-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-macosx_10_12_intel.whl.mirrorlist)|\n\n下载完成后使用pip安装wheel包即可 :  \n```bash\npip install shiboken2.whl\npip install pyside2.whl\n```\n\n测试程序 : \n```Python\nimport sys\nfrom PySide2.QtWidgets import QApplication, QLabel\n                                                     \nif __name__ == \"__main__\":\n    app = QApplication(sys.argv)\n    label = QLabel(\"Hello World\")\n    label.show()\n    sys.exit(app.exec_())\n```\n![运行结果](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master/image/basic/00.install_pyside2/hello_world.png)\n\n> 在VS Code中pylint会在import PySide2时报错，因为它默认不加载C/C++库。  \n> 在Pylint Args中添加`--extension-pkg-whitelist=PySide2`即可消除这个报错。\n>\n>![白名单配置](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master/image/basic/00.install_pyside2/whitelist-pyside2.png)","source":"_posts/安装-PySide.md","raw":"---\ntitle: 安装 PySide\ndate: 2025-02-10 18:26:54\ntags:\n    - Qt\n    - Python\n    - PySide\n---\n\n转载自 [Qt-PySide2-Primer](https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/basic/00.install_pyside2.md)，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。\n\n# 安装PySide2\n\n打开Qt官网的下载页面([https://download.qt.io/](https://download.qt.io/))，下载对应版本的wheel包。  \n\n* pyside2 : 包含Qt库的所有PySide2模块，依赖shiboken2包。\n* shiboken2 : 包含shiboken2模块和PySide2辅助功能。\n* shiboken2_generator : 用于由C++代码生成Python绑定的工具。\n\n> 使用PySide2不需要安装shiboken2_generator，它是用来从零构建PySide2的。\n\n部分版本的下载页面连接 :  \n\n|包|OS|Python|Bit| 下载页面 |\n|:-:|:-:|:-:|:-:|:-:|\n|shiboken2|Windows|Python3|32-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win32.whl.mirrorlist)|\n|pyside2|Windows|Python3|32-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win32.whl.mirrorlist)|\n|shiboken2|Windows|Python3|64-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win_amd64.whl.mirrorlist)|\n|pyside2|Windows|Python3|64-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win_amd64.whl.mirrorlist)|\n|shiboken2|Linux|Python3|64-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-manylinux1_x86_64.whl.mirrorlist)|\n|pyside2|Linux|Python3|64-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-manylinux1_x86_64.whl.mirrorlist)|\n|shiboken2|Mac OS X|Python3|64-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-macosx_10_12_intel.whl.mirrorlist)|\n|pyside2|Mac OS X|Python3|64-bit|[Details](https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-macosx_10_12_intel.whl.mirrorlist)|\n\n下载完成后使用pip安装wheel包即可 :  \n```bash\npip install shiboken2.whl\npip install pyside2.whl\n```\n\n测试程序 : \n```Python\nimport sys\nfrom PySide2.QtWidgets import QApplication, QLabel\n                                                     \nif __name__ == \"__main__\":\n    app = QApplication(sys.argv)\n    label = QLabel(\"Hello World\")\n    label.show()\n    sys.exit(app.exec_())\n```\n![运行结果](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master/image/basic/00.install_pyside2/hello_world.png)\n\n> 在VS Code中pylint会在import PySide2时报错，因为它默认不加载C/C++库。  \n> 在Pylint Args中添加`--extension-pkg-whitelist=PySide2`即可消除这个报错。\n>\n>![白名单配置](https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master/image/basic/00.install_pyside2/whitelist-pyside2.png)","slug":"安装-PySide","published":1,"updated":"2025-02-10T10:34:17.277Z","comments":1,"layout":"post","photos":[],"_id":"cm6yy8t8s000nmkin0tofh521","content":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/basic/00.install_pyside2.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"安装PySide2\"><a href=\"#安装PySide2\" class=\"headerlink\" title=\"安装PySide2\"></a>安装PySide2</h1><p>打开Qt官网的下载页面(<a href=\"https://download.qt.io/\">https://download.qt.io/</a>)，下载对应版本的wheel包。  </p>\n<ul>\n<li>pyside2 : 包含Qt库的所有PySide2模块，依赖shiboken2包。</li>\n<li>shiboken2 : 包含shiboken2模块和PySide2辅助功能。</li>\n<li>shiboken2_generator : 用于由C++代码生成Python绑定的工具。</li>\n</ul>\n<blockquote>\n<p>使用PySide2不需要安装shiboken2_generator，它是用来从零构建PySide2的。</p>\n</blockquote>\n<p>部分版本的下载页面连接 :  </p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">包</th>\n<th align=\"center\">OS</th>\n<th align=\"center\">Python</th>\n<th align=\"center\">Bit</th>\n<th align=\"center\">下载页面</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">shiboken2</td>\n<td align=\"center\">Windows</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">32-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win32.whl.mirrorlist\">Details</a></td>\n</tr>\n<tr>\n<td align=\"center\">pyside2</td>\n<td align=\"center\">Windows</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">32-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win32.whl.mirrorlist\">Details</a></td>\n</tr>\n<tr>\n<td align=\"center\">shiboken2</td>\n<td align=\"center\">Windows</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">64-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win_amd64.whl.mirrorlist\">Details</a></td>\n</tr>\n<tr>\n<td align=\"center\">pyside2</td>\n<td align=\"center\">Windows</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">64-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win_amd64.whl.mirrorlist\">Details</a></td>\n</tr>\n<tr>\n<td align=\"center\">shiboken2</td>\n<td align=\"center\">Linux</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">64-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-manylinux1_x86_64.whl.mirrorlist\">Details</a></td>\n</tr>\n<tr>\n<td align=\"center\">pyside2</td>\n<td align=\"center\">Linux</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">64-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-manylinux1_x86_64.whl.mirrorlist\">Details</a></td>\n</tr>\n<tr>\n<td align=\"center\">shiboken2</td>\n<td align=\"center\">Mac OS X</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">64-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-macosx_10_12_intel.whl.mirrorlist\">Details</a></td>\n</tr>\n<tr>\n<td align=\"center\">pyside2</td>\n<td align=\"center\">Mac OS X</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">64-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-macosx_10_12_intel.whl.mirrorlist\">Details</a></td>\n</tr>\n</tbody></table>\n<p>下载完成后使用pip安装wheel包即可 :  </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install shiboken2.whl</span><br><span class=\"line\">pip install pyside2.whl</span><br></pre></td></tr></table></figure>\n\n<p>测试程序 : </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtWidgets <span class=\"keyword\">import</span> QApplication, QLabel</span><br><span class=\"line\">                                                     </span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app = QApplication(sys.argv)</span><br><span class=\"line\">    label = QLabel(<span class=\"string\">&quot;Hello World&quot;</span>)</span><br><span class=\"line\">    label.show()</span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master/image/basic/00.install_pyside2/hello_world.png\" alt=\"运行结果\"></p>\n<blockquote>\n<p>在VS Code中pylint会在import PySide2时报错，因为它默认不加载C&#x2F;C++库。<br>在Pylint Args中添加<code>--extension-pkg-whitelist=PySide2</code>即可消除这个报错。</p>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master/image/basic/00.install_pyside2/whitelist-pyside2.png\" alt=\"白名单配置\"></p>\n</blockquote>\n","excerpt":"","more":"<p>转载自 <a href=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/blob/master/note/basic/00.install_pyside2.md\">Qt-PySide2-Primer</a>，年代久远，PySide2 无法在新版本的 Python 中运行，建议替换为 PySide6，原文的代码仍可使用。</p>\n<h1 id=\"安装PySide2\"><a href=\"#安装PySide2\" class=\"headerlink\" title=\"安装PySide2\"></a>安装PySide2</h1><p>打开Qt官网的下载页面(<a href=\"https://download.qt.io/\">https://download.qt.io/</a>)，下载对应版本的wheel包。  </p>\n<ul>\n<li>pyside2 : 包含Qt库的所有PySide2模块，依赖shiboken2包。</li>\n<li>shiboken2 : 包含shiboken2模块和PySide2辅助功能。</li>\n<li>shiboken2_generator : 用于由C++代码生成Python绑定的工具。</li>\n</ul>\n<blockquote>\n<p>使用PySide2不需要安装shiboken2_generator，它是用来从零构建PySide2的。</p>\n</blockquote>\n<p>部分版本的下载页面连接 :  </p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">包</th>\n<th align=\"center\">OS</th>\n<th align=\"center\">Python</th>\n<th align=\"center\">Bit</th>\n<th align=\"center\">下载页面</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">shiboken2</td>\n<td align=\"center\">Windows</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">32-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win32.whl.mirrorlist\">Details</a></td>\n</tr>\n<tr>\n<td align=\"center\">pyside2</td>\n<td align=\"center\">Windows</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">32-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win32.whl.mirrorlist\">Details</a></td>\n</tr>\n<tr>\n<td align=\"center\">shiboken2</td>\n<td align=\"center\">Windows</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">64-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win_amd64.whl.mirrorlist\">Details</a></td>\n</tr>\n<tr>\n<td align=\"center\">pyside2</td>\n<td align=\"center\">Windows</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">64-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-none-win_amd64.whl.mirrorlist\">Details</a></td>\n</tr>\n<tr>\n<td align=\"center\">shiboken2</td>\n<td align=\"center\">Linux</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">64-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-manylinux1_x86_64.whl.mirrorlist\">Details</a></td>\n</tr>\n<tr>\n<td align=\"center\">pyside2</td>\n<td align=\"center\">Linux</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">64-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-manylinux1_x86_64.whl.mirrorlist\">Details</a></td>\n</tr>\n<tr>\n<td align=\"center\">shiboken2</td>\n<td align=\"center\">Mac OS X</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">64-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/shiboken2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-macosx_10_12_intel.whl.mirrorlist\">Details</a></td>\n</tr>\n<tr>\n<td align=\"center\">pyside2</td>\n<td align=\"center\">Mac OS X</td>\n<td align=\"center\">Python3</td>\n<td align=\"center\">64-bit</td>\n<td align=\"center\"><a href=\"https://download.qt.io/snapshots/ci/pyside/5.13/latest/pyside2/PySide2-5.13.1a1.dev1567626422-5.13.1-cp35.cp36.cp37-abi3-macosx_10_12_intel.whl.mirrorlist\">Details</a></td>\n</tr>\n</tbody></table>\n<p>下载完成后使用pip安装wheel包即可 :  </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install shiboken2.whl</span><br><span class=\"line\">pip install pyside2.whl</span><br></pre></td></tr></table></figure>\n\n<p>测试程序 : </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> sys</span><br><span class=\"line\"><span class=\"keyword\">from</span> PySide2.QtWidgets <span class=\"keyword\">import</span> QApplication, QLabel</span><br><span class=\"line\">                                                     </span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app = QApplication(sys.argv)</span><br><span class=\"line\">    label = QLabel(<span class=\"string\">&quot;Hello World&quot;</span>)</span><br><span class=\"line\">    label.show()</span><br><span class=\"line\">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master/image/basic/00.install_pyside2/hello_world.png\" alt=\"运行结果\"></p>\n<blockquote>\n<p>在VS Code中pylint会在import PySide2时报错，因为它默认不加载C&#x2F;C++库。<br>在Pylint Args中添加<code>--extension-pkg-whitelist=PySide2</code>即可消除这个报错。</p>\n<p><img src=\"https://github.com/hubenchang0515/Qt-PySide2-Primer/raw/master/image/basic/00.install_pyside2/whitelist-pyside2.png\" alt=\"白名单配置\"></p>\n</blockquote>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cm6yy8t7w0000mkin2gyvg5j9","tag_id":"cm6yy8t870002mkinhecqfz7k","_id":"cm6yy8t8i000bmkin6mczd6bv"},{"post_id":"cm6yy8t7w0000mkin2gyvg5j9","tag_id":"cm6yy8t8d0006mkinfph0hspb","_id":"cm6yy8t8k000dmkin1y84flzq"},{"post_id":"cm6yy8t8r000mmkind2458rnx","tag_id":"cm6yy8t8g0009mking1xa6341","_id":"cm6yy8t8v000pmkin4u5p94uu"},{"post_id":"cm6yy8t8r000mmkind2458rnx","tag_id":"cm6yy8t8k000emkinhpkc7vtp","_id":"cm6yy8t8w000qmkin5v765ej0"},{"post_id":"cm6yy8t8r000mmkind2458rnx","tag_id":"cm6yy8t8n000hmkincwouhat1","_id":"cm6yy8t8w000smkinfweubws1"},{"post_id":"cm6yy8t8r000mmkind2458rnx","tag_id":"cm6yy8t8r000lmkin54pwc0tz","_id":"cm6yy8t8x000tmkinaehta295"},{"post_id":"cm6yy8t850001mkinbmin7vfw","tag_id":"cm6yy8t8g0009mking1xa6341","_id":"cm6yy8t8x000vmkinhrsc2adn"},{"post_id":"cm6yy8t850001mkinbmin7vfw","tag_id":"cm6yy8t8k000emkinhpkc7vtp","_id":"cm6yy8t8y000wmkin8h0e0nre"},{"post_id":"cm6yy8t850001mkinbmin7vfw","tag_id":"cm6yy8t8n000hmkincwouhat1","_id":"cm6yy8t8y000ymkin7bdr83mz"},{"post_id":"cm6yy8t850001mkinbmin7vfw","tag_id":"cm6yy8t8r000lmkin54pwc0tz","_id":"cm6yy8t8y000zmkin4c4l6zzy"},{"post_id":"cm6yy8t8s000nmkin0tofh521","tag_id":"cm6yy8t8g0009mking1xa6341","_id":"cm6yy8t8z0011mkin1pqoh1ol"},{"post_id":"cm6yy8t8s000nmkin0tofh521","tag_id":"cm6yy8t8n000hmkincwouhat1","_id":"cm6yy8t8z0012mkinh07l37lz"},{"post_id":"cm6yy8t8s000nmkin0tofh521","tag_id":"cm6yy8t8r000lmkin54pwc0tz","_id":"cm6yy8t8z0014mkinanfqhmz2"},{"post_id":"cm6yy8t890003mkin4joded8o","tag_id":"cm6yy8t8g0009mking1xa6341","_id":"cm6yy8t900015mkinhlw46te6"},{"post_id":"cm6yy8t890003mkin4joded8o","tag_id":"cm6yy8t8k000emkinhpkc7vtp","_id":"cm6yy8t900017mkineojzf86i"},{"post_id":"cm6yy8t890003mkin4joded8o","tag_id":"cm6yy8t8n000hmkincwouhat1","_id":"cm6yy8t900018mkinem5qc2p8"},{"post_id":"cm6yy8t890003mkin4joded8o","tag_id":"cm6yy8t8r000lmkin54pwc0tz","_id":"cm6yy8t91001amkinfn5ra41q"},{"post_id":"cm6yy8t8b0004mkingxcf91bf","tag_id":"cm6yy8t8g0009mking1xa6341","_id":"cm6yy8t91001cmkin8bkx23vk"},{"post_id":"cm6yy8t8b0004mkingxcf91bf","tag_id":"cm6yy8t8k000emkinhpkc7vtp","_id":"cm6yy8t91001dmkinf2um63je"},{"post_id":"cm6yy8t8b0004mkingxcf91bf","tag_id":"cm6yy8t8n000hmkincwouhat1","_id":"cm6yy8t92001fmkin0c2o2lck"},{"post_id":"cm6yy8t8b0004mkingxcf91bf","tag_id":"cm6yy8t8r000lmkin54pwc0tz","_id":"cm6yy8t92001gmkin2b7l1mue"},{"post_id":"cm6yy8t8c0005mkinaz2k4o4w","tag_id":"cm6yy8t8g0009mking1xa6341","_id":"cm6yy8t93001kmkin8t8w0jl6"},{"post_id":"cm6yy8t8c0005mkinaz2k4o4w","tag_id":"cm6yy8t8k000emkinhpkc7vtp","_id":"cm6yy8t94001lmkine2mr0xf6"},{"post_id":"cm6yy8t8c0005mkinaz2k4o4w","tag_id":"cm6yy8t8n000hmkincwouhat1","_id":"cm6yy8t94001nmkin769f6z38"},{"post_id":"cm6yy8t8c0005mkinaz2k4o4w","tag_id":"cm6yy8t8r000lmkin54pwc0tz","_id":"cm6yy8t94001omkinfgj219jk"},{"post_id":"cm6yy8t8e0007mkin31tn4bah","tag_id":"cm6yy8t8g0009mking1xa6341","_id":"cm6yy8t95001smking6fc524j"},{"post_id":"cm6yy8t8e0007mkin31tn4bah","tag_id":"cm6yy8t8k000emkinhpkc7vtp","_id":"cm6yy8t95001tmkin1altcvdd"},{"post_id":"cm6yy8t8e0007mkin31tn4bah","tag_id":"cm6yy8t8n000hmkincwouhat1","_id":"cm6yy8t96001vmkin1vh63mo7"},{"post_id":"cm6yy8t8e0007mkin31tn4bah","tag_id":"cm6yy8t8r000lmkin54pwc0tz","_id":"cm6yy8t96001wmkin0zia5fs3"},{"post_id":"cm6yy8t8f0008mkin93sjd545","tag_id":"cm6yy8t8g0009mking1xa6341","_id":"cm6yy8t970020mkin2svle1ij"},{"post_id":"cm6yy8t8f0008mkin93sjd545","tag_id":"cm6yy8t8k000emkinhpkc7vtp","_id":"cm6yy8t980021mkinaonlfxc4"},{"post_id":"cm6yy8t8f0008mkin93sjd545","tag_id":"cm6yy8t8n000hmkincwouhat1","_id":"cm6yy8t980023mkin3zfa3ve8"},{"post_id":"cm6yy8t8f0008mkin93sjd545","tag_id":"cm6yy8t8r000lmkin54pwc0tz","_id":"cm6yy8t980024mkin97oy0z3w"},{"post_id":"cm6yy8t8h000amkinfvtfes05","tag_id":"cm6yy8t8g0009mking1xa6341","_id":"cm6yy8t990027mkingow38r28"},{"post_id":"cm6yy8t8h000amkinfvtfes05","tag_id":"cm6yy8t8k000emkinhpkc7vtp","_id":"cm6yy8t990028mkinfjld6r2q"},{"post_id":"cm6yy8t8h000amkinfvtfes05","tag_id":"cm6yy8t8n000hmkincwouhat1","_id":"cm6yy8t9a002amkin80ay6l35"},{"post_id":"cm6yy8t8h000amkinfvtfes05","tag_id":"cm6yy8t8r000lmkin54pwc0tz","_id":"cm6yy8t9a002bmkinfdxubxij"},{"post_id":"cm6yy8t8i000cmkina4cwbxde","tag_id":"cm6yy8t8g0009mking1xa6341","_id":"cm6yy8t9b002emkin7vsjauto"},{"post_id":"cm6yy8t8i000cmkina4cwbxde","tag_id":"cm6yy8t8k000emkinhpkc7vtp","_id":"cm6yy8t9b002fmkin5fkv7oxg"},{"post_id":"cm6yy8t8i000cmkina4cwbxde","tag_id":"cm6yy8t8n000hmkincwouhat1","_id":"cm6yy8t9b002hmkincmagg4fk"},{"post_id":"cm6yy8t8i000cmkina4cwbxde","tag_id":"cm6yy8t8r000lmkin54pwc0tz","_id":"cm6yy8t9c002imkin6zrlcal9"},{"post_id":"cm6yy8t8k000fmkin6detbkkm","tag_id":"cm6yy8t8g0009mking1xa6341","_id":"cm6yy8t9c002kmkind32daf3i"},{"post_id":"cm6yy8t8k000fmkin6detbkkm","tag_id":"cm6yy8t8k000emkinhpkc7vtp","_id":"cm6yy8t9c002lmkin80yigceh"},{"post_id":"cm6yy8t8k000fmkin6detbkkm","tag_id":"cm6yy8t8n000hmkincwouhat1","_id":"cm6yy8t9d002nmkindlvl2hhe"},{"post_id":"cm6yy8t8k000fmkin6detbkkm","tag_id":"cm6yy8t8r000lmkin54pwc0tz","_id":"cm6yy8t9d002omkin2ah7dzrl"},{"post_id":"cm6yy8t8m000gmkin427g6vxi","tag_id":"cm6yy8t8g0009mking1xa6341","_id":"cm6yy8t9e002qmkin06ybdb8n"},{"post_id":"cm6yy8t8m000gmkin427g6vxi","tag_id":"cm6yy8t8n000hmkincwouhat1","_id":"cm6yy8t9e002rmkin5jkpas95"},{"post_id":"cm6yy8t8m000gmkin427g6vxi","tag_id":"cm6yy8t8r000lmkin54pwc0tz","_id":"cm6yy8t9e002tmkin8pevh2nu"},{"post_id":"cm6yy8t8o000imkin3lss5o2k","tag_id":"cm6yy8t8g0009mking1xa6341","_id":"cm6yy8t9f002vmkin5gb2a0vd"},{"post_id":"cm6yy8t8o000imkin3lss5o2k","tag_id":"cm6yy8t8n000hmkincwouhat1","_id":"cm6yy8t9f002wmkin1ly93uk2"},{"post_id":"cm6yy8t8o000imkin3lss5o2k","tag_id":"cm6yy8t8r000lmkin54pwc0tz","_id":"cm6yy8t9f002xmkin725igpgq"},{"post_id":"cm6yy8t8q000kmkin6wt14n5i","tag_id":"cm6yy8t8g0009mking1xa6341","_id":"cm6yy8t9f002ymkin8u95dcds"},{"post_id":"cm6yy8t8q000kmkin6wt14n5i","tag_id":"cm6yy8t8k000emkinhpkc7vtp","_id":"cm6yy8t9f002zmkinhnhy57g7"},{"post_id":"cm6yy8t8q000kmkin6wt14n5i","tag_id":"cm6yy8t8n000hmkincwouhat1","_id":"cm6yy8t9g0030mkinh5ogguto"},{"post_id":"cm6yy8t8q000kmkin6wt14n5i","tag_id":"cm6yy8t8r000lmkin54pwc0tz","_id":"cm6yy8t9g0031mkinhprw4wuh"}],"Tag":[{"name":"Git","_id":"cm6yy8t870002mkinhecqfz7k"},{"name":"Proxy","_id":"cm6yy8t8d0006mkinfph0hspb"},{"name":"Qt","_id":"cm6yy8t8g0009mking1xa6341"},{"name":"QML","_id":"cm6yy8t8k000emkinhpkc7vtp"},{"name":"Python","_id":"cm6yy8t8n000hmkincwouhat1"},{"name":"PySide","_id":"cm6yy8t8r000lmkin54pwc0tz"}]}}